(function(d){var h=/^\s*|\s*$/g,i="$1"==="B".replace(/A(.)|B/,"$1"),g={majorVersion:"3",minorVersion:"5b1",releaseDate:"2012-03-08",_init:function(){function b(c){if(c.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(c.src)){/_(src|dev)\.js/g.test(c.src)&&(a.suffix="_src");if(-1!=(n=c.src.indexOf("?")))a.query=c.src.substring(n+1);a.baseURL=c.src.substring(0,c.src.lastIndexOf("/"));k&&-1==a.baseURL.indexOf("://")&&0!==a.baseURL.indexOf("/")&&(a.baseURL=k+a.baseURL);return a.baseURL}return null}
var a=this,f=document,e=navigator,c=e.userAgent,k,n,m;a.isOpera=d.opera&&opera.buildNumber;a.isWebKit=/WebKit/.test(c);a.isIE=!a.isWebKit&&!a.isOpera&&/MSIE/gi.test(c)&&/Explorer/gi.test(e.appName);a.isIE6=a.isIE&&/MSIE [56]/.test(c);a.isIE7=a.isIE&&/MSIE [7]/.test(c);a.isIE8=a.isIE&&/MSIE [8]/.test(c);a.isIE9=a.isIE&&/MSIE [9]/.test(c);a.isGecko=!a.isWebKit&&/Gecko/.test(c);a.isMac=-1!=c.indexOf("Mac");a.isAir=/adobeair/i.test(c);a.isIDevice=/(iPad|iPhone)/.test(c);a.isIOS5=a.isIDevice&&534<=c.match(/AppleWebKit\/(\d*)/)[1];
if(d.tinyMCEPreInit)a.suffix=tinyMCEPreInit.suffix,a.baseURL=tinyMCEPreInit.base,a.query=tinyMCEPreInit.query;else{a.suffix="";c=f.getElementsByTagName("base");for(e=0;e<c.length;e++)if(m=c[e].href)/^https?:\/\/[^\/]+$/.test(m)&&(m+="/"),k=m?m.match(/.*\//)[0]:"";c=f.getElementsByTagName("script");for(e=0;e<c.length;e++)if(b(c[e]))return;if(f=f.getElementsByTagName("head")[0]){c=f.getElementsByTagName("script");for(e=0;e<c.length&&!b(c[e]);e++);}}},is:function(b,a){return!a?void 0!==b:"array"==a&&
b.hasOwnProperty&&b instanceof Array?!0:typeof b==a},makeMap:function(b,a,f){b=b||[];"string"==typeof b&&(b=b.split(a||","));f=f||{};for(a=b.length;a--;)f[b[a]]={};return f},each:function(b,a,f){var e,c;if(!b)return 0;f=f||b;if(void 0!==b.length){e=0;for(c=b.length;e<c;e++)if(!1===a.call(f,b[e],e,b))return 0}else for(e in b)if(b.hasOwnProperty(e)&&!1===a.call(f,b[e],e,b))return 0;return 1},map:function(b,a){var f=[];g.each(b,function(e){f.push(a(e))});return f},grep:function(b,a){var f=[];g.each(b,
function(e){(!a||a(e))&&f.push(e)});return f},inArray:function(b,a){var f,e;if(b){f=0;for(e=b.length;f<e;f++)if(b[f]===a)return f}return-1},extend:function(b,a){var f,e,c=arguments;f=1;for(e=c.length;f<e;f++)a=c[f],g.each(a,function(c,a){void 0!==c&&(b[a]=c)});return b},trim:function(b){return(b?""+b:"").replace(h,"")},create:function(b,a,f){var e,c,k,n,m,d=0,b=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(b);k=b[3].match(/(^|\.)(\w+)$/i)[2];c=this.createNS(b[3].replace(/\.\w+$/,""),f);if(!c[k])if("static"==
b[2]){if(c[k]=a,this.onCreate)this.onCreate(b[2],b[3],c[k])}else if(a[k]||(a[k]=function(){},d=1),c[k]=a[k],this.extend(c[k].prototype,a),b[5]&&(e=this.resolve(b[5]).prototype,n=b[5].match(/\.(\w+)$/i)[1],m=c[k],c[k]=d?function(){return e[n].apply(this,arguments)}:function(){this.parent=e[n];return m.apply(this,arguments)},c[k].prototype[k]=c[k],this.each(e,function(a,b){c[k].prototype[b]=e[b]}),this.each(a,function(a,b){e[b]?c[k].prototype[b]=function(){this.parent=e[b];return a.apply(this,arguments)}:
b!=k&&(c[k].prototype[b]=a)})),this.each(a["static"],function(a,b){c[k][b]=a}),this.onCreate)this.onCreate(b[2],b[3],c[k].prototype)},walk:function(b,a,f,e){e=e||this;b&&(f&&(b=b[f]),g.each(b,function(c,b){if(!1===a.call(e,c,b,f))return!1;g.walk(c,a,f,e)}))},createNS:function(b,a){var f,e,a=a||d,b=b.split(".");for(f=0;f<b.length;f++)e=b[f],a[e]||(a[e]={}),a=a[e];return a},resolve:function(b,a){var f,e,a=a||d,b=b.split(".");f=0;for(e=b.length;f<e&&!(a=a[b[f]],!a);f++);return a},addUnload:function(b,
a){var f=this,b={func:b,scope:a||this};if(f.unloads)f.unloads.push(b);else{var e=function(){var a=f.unloads,b,m;if(a){for(m in a)(b=a[m])&&b.func&&b.func.call(b.scope,1);d.detachEvent?(d.detachEvent("onbeforeunload",c),d.detachEvent("onunload",e)):d.removeEventListener&&d.removeEventListener("unload",e,!1);f.unloads=w=e=0;d.CollectGarbage&&CollectGarbage()}},c=function(){var c=document;if("interactive"==c.readyState){var a=function(){c.detachEvent("onstop",a);e&&e();c=0};c&&c.attachEvent("onstop",
a);d.setTimeout(function(){c&&c.detachEvent("onstop",a)},0)}};d.attachEvent?(d.attachEvent("onunload",e),d.attachEvent("onbeforeunload",c)):d.addEventListener&&d.addEventListener("unload",e,!1);f.unloads=[b]}return b},removeUnload:function(b){var a=this.unloads,f=null;g.each(a,function(e,c){if(e&&e.func==b)return a.splice(c,1),f=b,!1});return f},explode:function(b,a){return b?g.map(b.split(a||","),g.trim):b},_addVer:function(b){var a;if(!this.query)return b;a=(-1==b.indexOf("?")?"?":"&")+this.query;
return-1==b.indexOf("#")?b+a:b.replace("#",a+"#")},_replace:function(b,a,f){return i?f.replace(b,function(){var b=a,c=arguments,k;for(k=0;k<c.length-2;k++)b=void 0===c[k]?b.replace(RegExp("\\$"+k,"g"),""):b.replace(RegExp("\\$"+k,"g"),c[k]);return b}):f.replace(b,a)}};g._init();d.tinymce=d.tinyMCE=g})(window);
tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(d){this.scope=d||this;this.listeners=[]},add:function(d,h){this.listeners.push({cb:d,scope:h||this.scope});return d},addToTop:function(d,h){this.listeners.unshift({cb:d,scope:h||this.scope});return d},remove:function(d){var h=this.listeners,i=null;tinymce.each(h,function(g,b){if(d==g.cb)return i=d,h.splice(b,1),!1});return i},dispatch:function(){var d,h=arguments,i,g=this.listeners;for(i=0;i<g.length&&!(d=g[i],
d=d.cb.apply(d.scope,0<h.length?h:[d.scope]),!1===d);i++);return d}});
(function(){var d=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(h,i){var g=this,b,h=tinymce.trim(h),i=g.settings=i||{};if(/^([\w\-]+):([^\/]{2})/i.test(h)||/^\s*#/.test(h))g.source=h;else if(0===h.indexOf("/")&&0!==h.indexOf("//")&&(h=(i.base_uri?i.base_uri.protocol||"http":"http")+"://mce_host"+h),/^[\w-]*:?\/\//.test(h)||(b=i.base_uri?i.base_uri.path:(new tinymce.util.URI(location.href)).directory,h=(i.base_uri&&i.base_uri.protocol||"http")+"://mce_host"+g.toAbsPath(b,h)),h=h.replace(/@@/g,
"(mce_at)"),h=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(h),d("source,protocol,authority,userInfo,user,password,host,port,relative,path,directory,file,query,anchor".split(","),function(a,b){var e=h[b];e&&(e=e.replace(/\(mce_at\)/g,"@@"));g[a]=e}),b=i.base_uri){g.protocol||(g.protocol=b.protocol);g.userInfo||(g.userInfo=b.userInfo);!g.port&&"mce_host"==
g.host&&(g.port=b.port);if(!g.host||"mce_host"==g.host)g.host=b.host;g.source=""}},setPath:function(d){d=/^(.*?)\/?(\w+)?$/.exec(d);this.path=d[0];this.directory=d[1];this.file=d[2];this.source="";this.getURI()},toRelative:function(d){var i;if("./"===d)return d;d=new tinymce.util.URI(d,{base_uri:this});if("mce_host"!=d.host&&this.host!=d.host&&d.host||this.port!=d.port||this.protocol!=d.protocol)return d.getURI();i=this.toRelPath(this.path,d.path);d.query&&(i+="?"+d.query);d.anchor&&(i+="#"+d.anchor);
return i},toAbsolute:function(d,i){d=new tinymce.util.URI(d,{base_uri:this});return d.getURI(this.host==d.host&&this.protocol==d.protocol?i:0)},toRelPath:function(d,i){var g,b=0,a="",f,e,d=d.substring(0,d.lastIndexOf("/")),d=d.split("/");g=i.split("/");if(d.length>=g.length){f=0;for(e=d.length;f<e;f++)if(f>=g.length||d[f]!=g[f]){b=f+1;break}}if(d.length<g.length){f=0;for(e=g.length;f<e;f++)if(f>=d.length||d[f]!=g[f]){b=f+1;break}}if(1==b)return i;f=0;for(e=d.length-(b-1);f<e;f++)a+="../";f=b-1;for(e=
g.length;f<e;f++)a=f!=b-1?a+("/"+g[f]):a+g[f];return a},toAbsPath:function(h,i){var g,b=0,a=[],f;f=/\/$/.test(i)?"/":"";h=h.split("/");i=i.split("/");d(h,function(b){b&&a.push(b)});h=a;g=i.length-1;for(a=[];0<=g;g--)0==i[g].length||"."==i[g]||(".."==i[g]?b++:0<b?b--:a.push(i[g]));g=h.length-b;g=0>=g?a.reverse().join("/"):h.slice(0,g).join("/")+"/"+a.reverse().join("/");0!==g.indexOf("/")&&(g="/"+g);f&&g.lastIndexOf("/")!==g.length-1&&(g+=f);return g},getURI:function(d){var i;if(!this.source||d)i=
"",d||(this.protocol&&(i+=this.protocol+"://"),this.userInfo&&(i+=this.userInfo+"@"),this.host&&(i+=this.host),this.port&&(i+=":"+this.port)),this.path&&(i+=this.path),this.query&&(i+="?"+this.query),this.anchor&&(i+="#"+this.anchor),this.source=i;return this.source}})})();
(function(){var d=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(h){var h=this.get(h),i;h&&d(h.split("&"),function(d){d=d.split("=");i=i||{};i[unescape(d[0])]=unescape(d[1])});return i},setHash:function(h,i,g,b,a,f){var e="";d(i,function(c,a){e+=(!e?"":"&")+escape(a)+"="+escape(c)});this.set(h,e,g,b,a,f)},get:function(d){var i=document.cookie,g=d+"=",b;if(i){b=i.indexOf("; "+g);if(-1==b){if(b=i.indexOf(g),0!=b)return null}else b+=2;d=i.indexOf(";",b);-1==d&&(d=i.length);
return unescape(i.substring(b+g.length,d))}},set:function(d,i,g,b,a,f){document.cookie=d+"="+escape(i)+(g?"; expires="+g.toGMTString():"")+(b?"; path="+escape(b):"")+(a?"; domain="+a:"")+(f?"; secure":"")},remove:function(d,i){var g=new Date;g.setTime(g.getTime()-1E3);this.set(d,"",g,i,g)}})})();
(function(){function d(h,i){var g,b,a,i=i||'"';if(null==h)return"null";a=typeof h;if("string"==a)return b="\u0008b\tt\nn\u000cf\rr\"\"''\\\\",i+h.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,e){if('"'===i&&"'"===a)return a;g=b.indexOf(e);if(g+1)return"\\"+b.charAt(g+1);a=e.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+i;if("object"==a){if(h.hasOwnProperty&&h instanceof Array){g=0;for(b="[";g<h.length;g++)b+=(0<g?",":"")+d(h[g],i);return b+"]"}b="{";for(g in h)h.hasOwnProperty(g)&&
(b+="function"!=typeof h[g]?(1<b.length?","+i:i)+g+i+":"+d(h[g],i):"");return b+"}"}return""+h}tinymce.util.JSON={serialize:d,parse:function(d){try{return eval("("+d+")")}catch(i){}}}})();
tinymce.create("static tinymce.util.XHR",{send:function(d){function h(a){i=0;try{i=new ActiveXObject(a)}catch(b){}return i}var i,g=window,b=0;d.scope=d.scope||this;d.success_scope=d.success_scope||d.scope;d.error_scope=d.error_scope||d.scope;d.async=!1===d.async?!1:!0;d.data=d.data||"";if(i=g.XMLHttpRequest?new XMLHttpRequest:h("Microsoft.XMLHTTP")||h("Msxml2.XMLHTTP")){i.overrideMimeType&&i.overrideMimeType(d.content_type);i.open(d.type||(d.data?"POST":"GET"),d.url,d.async);d.content_type&&i.setRequestHeader("Content-Type",
d.content_type);i.setRequestHeader("X-Requested-With","XMLHttpRequest");i.send(d.data);var a=function(){!d.async||4==i.readyState||1E4<b++?(d.success&&1E4>b&&200==i.status?d.success.call(d.success_scope,""+i.responseText,i,d):d.error&&d.error.call(d.error_scope,1E4<b?"TIMED_OUT":"GENERAL",i,d),i=null):g.setTimeout(a,10)};if(!d.async)return a();g.setTimeout(a,10)}}});
(function(){var d=tinymce.extend,h=tinymce.util.JSON,i=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(g){this.settings=d({},g);this.count=0},send:function(g){var b=g.error,a=g.success,g=d(this.settings,g);g.success=function(f,e){f=h.parse(f);"undefined"==typeof f&&(f={error:"JSON Parse error."});f.error?b.call(g.error_scope||g.scope,f.error,e):a.call(g.success_scope||g.scope,f.result)};g.error=function(a,e){b&&b.call(g.error_scope||g.scope,a,e)};g.data=h.serialize({id:g.id||
"c"+this.count++,method:g.method,params:g.params});g.content_type="application/json";i.send(g)},"static":{sendRPC:function(d){return(new tinymce.util.JSONRequest).send(d)}}})})();(function(d){d.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(d){return d.shiftKey||d.ctrlKey||d.altKey}}})(tinymce);
(function(d){function h(c){var a=c.dom,b=c.selection;c.onKeyDown.add(function(c,j){var e,k,f,g;if(!j.isDefaultPrevented()&&((g=j.keyCode==p)||j.keyCode==m)&&!n.modifierPressed(j)){j.preventDefault();e=b.getRng();k=a.getParent(e.startContainer,a.isBlock);g&&(k=a.getNext(k,a.isBlock));if(k){for(k=k.firstChild;k&&3==k.nodeType&&0==k.nodeValue.length;)k=k.nextSibling;k&&"SPAN"===k.nodeName&&(f=k.cloneNode(!1))}c.getDoc().execCommand(g?"ForwardDelete":"Delete",!1,null);k=a.getParent(e.startContainer,a.isBlock);
d.each(a.select("span.Apple-style-span,font.Apple-style-span",k),function(c){var l=b.getBookmark();f?a.replace(f.cloneNode(!1),c,!0):a.remove(c,!0);b.moveToBookmark(l)})}})}function i(c){function a(b){var l=c.dom.create("body"),b=b.cloneContents();l.appendChild(b);return c.selection.serializer.serialize(l,{format:"html"})}c.onKeyDown.addToTop(function(b,l){var e=l.keyCode;if(e==p||e==m){var e=b.selection.getRng(!0),k;if(k=!e.collapsed)e=a(e),k=c.dom.createRng(),k.selectNode(c.getBody()),k=a(k),k=
e===k;k&&(b.setContent("",{format:"raw"}),b.nodeChanged(),l.preventDefault())}})}function g(c){c.dom.bind(c.getDoc(),"focusin",function(){c.selection.setRng(c.selection.getRng())})}function b(c){c.onKeyDown.add(function(c,a){if(a.keyCode===m&&c.selection.isCollapsed()&&0===c.selection.getRng(!0).startOffset){var l=c.selection.getNode().previousSibling;l&&l.nodeName&&"hr"===l.nodeName.toLowerCase()&&(c.dom.remove(l),d.dom.Event.cancel(a))}})}function a(c){Range.prototype.getClientRects||c.onMouseDown.add(function(c,
a){if("HTML"===a.target.nodeName){var l=c.getBody();l.blur();setTimeout(function(){l.focus()},0)}})}function f(c){c.onClick.add(function(c,a){a=a.target;/^(IMG|HR)$/.test(a.nodeName)&&c.selection.getSel().setBaseAndExtent(a,0,a,1);"A"==a.nodeName&&c.dom.hasClass(a,"mceItemAnchor")&&c.selection.select(a);c.nodeChanged()})}function e(c){function a(){var b=e.getAttribs(l.getStart().cloneNode(!1));return function(){var a=l.getStart();a!==c.getBody()&&(e.setAttrib(a,"style",null),d.each(b,function(c){a.setAttributeNode(c.cloneNode(!0))}))}}
function b(c,a){a.preventDefault();return!1}var l=c.selection,e=c.dom;c.onKeyPress.add(function(c,j){var b;if((8==j.keyCode||46==j.keyCode)&&!l.isCollapsed()&&l.getStart()!=l.getEnd())return b=a(),c.getDoc().execCommand("delete",!1,null),b(),j.preventDefault(),!1});e.bind(c.getDoc(),"cut",function(){var e;!l.isCollapsed()&&l.getStart()!=l.getEnd()&&(e=a(),c.onKeyUp.addToTop(b),setTimeout(function(){e();c.onKeyUp.remove(b)},0))})}function c(c){var a,b;c.dom.bind(c.getDoc(),"selectionchange",function(){b&&
(clearTimeout(b),b=0);b=window.setTimeout(function(){var l=c.selection.getRng();if(!a||!d.dom.RangeUtils.compareRanges(l,a)){c.nodeChanged();a=l}},50)})}function k(c){c.onKeyDown.add(function(c,a){if(a.keyCode===m&&c.selection.isCollapsed()&&0===c.selection.getRng(!0).startOffset){var l=c.selection.getNode().previousSibling;if(l&&l.nodeName&&"table"===l.nodeName.toLowerCase())return d.dom.Event.cancel(a)}})}var n=d.VK,m=n.BACKSPACE,p=n.DELETE;d.create("tinymce.util.Quirks",{Quirks:function(j){k(j);
d.isWebKit&&(h(j),i(j),g(j),f(j),d.isIDevice&&c(j));d.isIE&&(b(j),i(j),document.body.setAttribute("role","application"));d.isGecko&&(b(j),a(j),e(j))}})})(tinymce);
(function(d){function h(c,a){var b,j,e,k={};if(c){c=c.split(",");a=a||10;for(b=0;b<c.length;b+=2)j=String.fromCharCode(parseInt(c[b],a)),g[j]||(e="&"+c[b+1]+";",k[j]=e,k[e]=j);return k}}var i,g,b,a=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,e=/[<>&\"\']/g,c=/&(#x|#)?([\w]+);/g,k={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",
139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};g={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};b={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};i=h("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",
32);d.html=d.html||{};d.html.Entities={encodeRaw:function(c,b){return c.replace(b?a:f,function(c){return g[c]||c})},encodeAllRaw:function(c){return(""+c).replace(e,function(c){return g[c]||c})},encodeNumeric:function(c,b){return c.replace(b?a:f,function(c){return 1<c.length?"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";":g[c]||"&#"+c.charCodeAt(0)+";"})},encodeNamed:function(c,b,e){e=e||i;return c.replace(b?a:f,function(c){return g[c]||e[c]||c})},getEncodeFunc:function(c,b){function e(c,
l){return c.replace(l?a:f,function(c){return g[c]||b[c]||"&#"+c.charCodeAt(0)+";"||c})}function j(c,a){return k.encodeNamed(c,a,b)}var k=d.html.Entities,b=h(b)||i,c=d.makeMap(c.replace(/\+/g,","));return c.named&&c.numeric?e:c.named?b?j:k.encodeNamed:c.numeric?k.encodeNumeric:k.encodeRaw},decode:function(a){return a.replace(c,function(c,a,j){if(a)return j=parseInt(j,2===a.length?16:10),65535<j?(j-=65536,String.fromCharCode(55296+(j>>10),56320+(j&1023))):k[j]||String.fromCharCode(j);if(!(a=b[c]))if(!(a=
i[c]))a=document.createElement("div"),a.innerHTML=c,a=a.textContent||a.innerText||c;return a})}}})(tinymce);
tinymce.html.Styles=function(d,h){function i(c,a,b,j){function e(c){c=parseInt(c).toString(16);return 1<c.length?c:"0"+c}return"#"+e(a)+e(b)+e(j)}var g=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,b=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,f=/\s+$/,e,c={},k,d=d||{};k="\\\",\\',\\;,\\:,;,:,\ufeff".split(",");for(e=0;e<k.length;e++)c[k[e]]="\ufeff"+e,c["\ufeff"+e]=k[e];return{toHex:function(c){return c.replace(g,
i)},parse:function(e){function k(c,a){var b,j;if(b=l[c+"-top"+a])j=l[c+"-right"+a],b==j&&(b=l[c+"-bottom"+a],j==b&&(j=l[c+"-left"+a],b==j&&(l[c+a]=j,delete l[c+"-top"+a],delete l[c+"-right"+a],delete l[c+"-bottom"+a],delete l[c+"-left"+a])))}function p(c){var a=l[c],b;if(a&&!(0>a.indexOf(" "))){a=a.split(" ");for(b=a.length;b--;)if(a[b]!==a[0])return!1;l[c]=a[0];return!0}}function j(c,a,b,j){p(a)&&p(b)&&p(j)&&(l[c]=l[a]+" "+l[b]+" "+l[j],delete l[a],delete l[b],delete l[j])}function o(a){v=!0;return c[a]}
function q(a,l){v&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return c[a]}));l||(a=a.replace(/\\([\'\";:])/g,"$1"));return a}var l={},r,t,h,v,x=d.url_converter,u=d.url_converter_scope||this;if(e){for(e=e.replace(/\\[\"\';:\uFEFF]/g,o).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(c){return c.replace(/[;:]/g,o)});r=a.exec(e);){t=r[1].replace(f,"").toLowerCase();h=r[2].replace(f,"");if(t&&0<h.length){if("font-weight"===t&&"700"===h)h="bold";else if("color"===t||"background-color"===t)h=h.toLowerCase();h=h.replace(g,
i);h=h.replace(b,function(c,a,l,b,j,e){if(j=j||e)return j=q(j),"'"+j.replace(/\'/g,"\\'")+"'";a=q(a||l||b);x&&(a=x.call(u,a,"style"));return"url('"+a.replace(/\'/g,"\\'")+"')"});l[t]=v?q(h,!0):h}a.lastIndex=r.index+r[0].length}k("border","");k("border","-width");k("border","-color");k("border","-style");k("padding","");k("margin","");j("border","border-width","border-style","border-color");"medium none"===l.border&&delete l.border}return l},serialize:function(c,a){function b(a){var e,k,f,d;if(e=h.styles[a]){k=
0;for(f=e.length;k<f;k++)a=e[k],d=c[a],void 0!==d&&0<d.length&&(j+=(0<j.length?" ":"")+a+": "+d+";")}}var j="",e,k;if(a&&h&&h.styles)b("*"),b(a);else for(e in c)k=c[e],void 0!==k&&0<k.length&&(j+=(0<j.length?" ":"")+e+": "+k+";");return j}}};
(function(d){function h(c,a){return c.split(a||",")}function i(c,a){function b(a){return a.replace(/[A-Z]+/g,function(a){return b(c[a])})}var e,d={};for(e in c)c.hasOwnProperty(e)&&(c[e]=b(c[e]));b(a).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(c,a,b,l){b=h(b,"|");d[a]={attributes:f(b),attributesOrder:b,children:f(l,"|",{"#comment":{}})}});return d}function g(){var c=a.html5;c||(c=a.html5=i({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title",
B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},
"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][C]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|summary][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]"));
return c}function b(){var c=a.html4;c||(c=a.html4=i({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",
Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"));
return c}var a={},f=d.makeMap,e=d.each;d.html.Schema=function(c){function k(l,b,j){var e=c[l];e?e=f(e,",",f(e.toUpperCase()," ")):(e=a[l],e||(e=f(b," ",f(b.toUpperCase()," ")),e=d.extend(e,j),a[l]=e));return e}function n(c){var a,l,b,j,e,k,n,o,m,t,g,i,p,D,x,v,u,y,C=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,A=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,V=/[*?+]/;if(c){c=h(c);q["@"]&&(v=q["@"].attributes,u=q["@"].attributesOrder);a=0;for(l=c.length;a<l;a++)if(e=C.exec(c[a])){D=e[1];
m=e[2];x=e[3];o=e[4];i={};p=[];k={attributes:i,attributesOrder:p};"#"===D&&(k.paddEmpty=!0);"-"===D&&(k.removeEmpty=!0);if(v){for(y in v)i[y]=v[y];p.push.apply(p,u)}if(o){o=h(o,"|");b=0;for(j=o.length;b<j;b++)if(e=A.exec(o[b]))if(n={},g=e[1],t=e[2].replace(/::/g,":"),D=e[3],e=e[4],"!"===g&&(k.attributesRequired=k.attributesRequired||[],k.attributesRequired.push(t),n.required=!0),"-"===g)delete i[t],p.splice(d.inArray(p,t),1);else{if(D&&("="===D&&(k.attributesDefault=k.attributesDefault||[],k.attributesDefault.push({name:t,
value:e}),n.defaultValue=e),":"===D&&(k.attributesForced=k.attributesForced||[],k.attributesForced.push({name:t,value:e}),n.forcedValue=e),"<"===D))n.validValues=f(e,"?");V.test(t)?(k.attributePatterns=k.attributePatterns||[],n.pattern=RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),k.attributePatterns.push(n)):(i[t]||p.push(t),i[t]=n)}}!v&&"@"==m&&(v=i,u=p);x&&(k.outputName=m,q[x]=k);V.test(m)?(k.pattern=RegExp("^"+m.replace(/([?+*])/g,".$1")+"$"),r.push(k)):q[m]=k}}}function m(c){q={};r=[];n(c);e(D,
function(c,a){l[a]=c.children})}function i(c){var a=/^(~)?(.+)$/;c&&e(h(c),function(c){var c=a.exec(c),b="~"===c[1],j=b?"span":"div",k=c[2];l[k]=l[j];A[k]=j;b||(C[k]={});e(l,function(c){c[j]&&(c[k]=c[j])})})}function j(c){var a=/^([+\-]?)(\w+)\[([^\]]+)\]$/;c&&e(h(c),function(c){var c=a.exec(c),b,j;c&&(b=(j=c[1])?l[c[2]]:l[c[2]]={"#comment":{}},b=l[c[2]],e(h(c[3],"|"),function(c){"-"===j?delete b[c]:b[c]={}}))})}function o(c){var a=q[c],l;if(a)return a;for(l=r.length;l--;)if(a=r[l],a.pattern.test(c))return a}
var q={},l={},r=[],t,D,v,x,u,y,C,z,A={},c=c||{};D="html5"==c.schema?g():b();!1===c.verify_html&&(c.valid_elements="*[*]");c.valid_styles&&(t={},e(c.valid_styles,function(c,a){t[a]=d.explode(c)}));v=k("whitespace_elements","pre script style textarea");x=k("self_closing_elements","colgroup dd dt li options p td tfoot th thead tr");u=k("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source");y=k("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");
z=k("non_empty_elements","td th iframe video audio object",u);C=k("block_elements","h1 h2 h3 h4 h5 h6 hr p div address pre form table tbody thead tfoot th tr td li ol ul caption blockquote center dl dt dd dir fieldset noscript menu isindex samp header footer article section hgroup aside nav");c.valid_elements?m(c.valid_elements):(e(D,function(c,a){q[a]={attributes:c.attributes,attributesOrder:c.attributesOrder};l[a]=c.children}),"html5"!=c.schema&&e(h("strong/b,em/i"),function(c){c=h(c,"/");q[c[1]].outputName=
c[0]}),q.img.attributesDefault=[{name:"alt",value:""}],e(h("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(c){if(q[c])q[c].removeEmpty=true}),e(h("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(c){q[c].paddEmpty=true}));i(c.custom_elements);j(c.valid_children);n(c.extended_valid_elements);j("+ol[ul|ol],+ul[ul|ol]");c.invalid_elements&&d.each(d.explode(c.invalid_elements),function(c){q[c]&&delete q[c]});o("span")||n("span[!data-mce-type|*]");this.children=
l;this.styles=t;this.getBoolAttrs=function(){return y};this.getBlockElements=function(){return C};this.getShortEndedElements=function(){return u};this.getSelfClosingElements=function(){return x};this.getNonEmptyElements=function(){return z};this.getWhiteSpaceElements=function(){return v};this.isValidChild=function(c,a){var b=l[c];return!(!b||!b[a])};this.getElementRule=o;this.getCustomElements=function(){return A};this.addValidElements=n;this.setValidElements=m;this.addCustomElements=i;this.addValidChildren=
j}})(tinymce);
(function(d){d.html.SaxParser=function(h,i){var g=this,b=function(){},h=h||{};g.schema=i=i||new d.html.Schema;!1!==h.fix_self_closing&&(h.fix_self_closing=!0);d.each("comment,cdata,text,start,end,pi,doctype".split(","),function(a){a&&(g[a]=h[a]||b)});g.parse=function(a){function b(c){var a,l;for(a=g.length;a--;)if(g[a].name===c)break;if(a>=0){for(l=g.length-1;l>=a;l--){c=g[l];c.valid&&e.end(c.name)}g.length=a}}var e=this,c,k=0,n,m,g=[],j,o,q,l,r,t,D,v,x,u,y,C,z,A,s,B,F,G,J,E,L,M,N=0,R=d.html.Entities.decode,
K,H;E=RegExp("<(?:(?:!--([\\w\\W]*?)--\>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g");L=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;M={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};t=i.getShortEndedElements();J=i.getSelfClosingElements();D=i.getBoolAttrs();
v=h.validate;r=h.remove_internals;K=h.fix_self_closing;H=d.isIE;for(z=/^:/;c=E.exec(a);){k<c.index&&e.text(R(a.substr(k,c.index-k)));if(n=c[6]){n=n.toLowerCase();H&&z.test(n)&&(n=n.substr(1));b(n)}else if(n=c[7]){n=n.toLowerCase();H&&z.test(n)&&(n=n.substr(1));k=n in t;K&&J[n]&&g.length>0&&g[g.length-1].name===n&&b(n);if(!v||(x=i.getElementRule(n))){u=true;if(v){A=x.attributes;s=x.attributePatterns}if(C=c[8]){(l=C.indexOf("data-mce-type")!==-1)&&r&&(u=false);j=[];j.map={};C.replace(L,function(c,a,
b,e,k){a=a.toLowerCase();b=a in D?a:R(b||e||k||"");if(v&&!l&&a.indexOf("data-")!==0){c=A[a];if(!c&&s){for(e=s.length;e--;){c=s[e];if(c.pattern.test(a))break}e===-1&&(c=null)}if(!c||c.validValues&&!(b in c.validValues))return}j.map[a]=b;j.push({name:a,value:b})})}else{j=[];j.map={}}if(v&&!l){B=x.attributesRequired;F=x.attributesDefault;if(G=x.attributesForced)for(m=G.length;m--;){y=G[m];q=y.name;y=y.value;y==="{$uid}"&&(y="mce_"+N++);j.map[q]=y;j.push({name:q,value:y})}if(F)for(m=F.length;m--;){y=
F[m];q=y.name;if(!(q in j.map)){y=y.value;y==="{$uid}"&&(y="mce_"+N++);j.map[q]=y;j.push({name:q,value:y})}}if(B){for(m=B.length;m--;)if(B[m]in j.map)break;m===-1&&(u=false)}j.map["data-mce-bogus"]&&(u=false)}u&&e.start(n,j,k)}else u=false;if(m=M[n]){m.lastIndex=k=c.index+c[0].length;if(c=m.exec(a)){u&&(o=a.substr(k,c.index-k));k=c.index+c[0].length}else{o=a.substr(k);k=a.length}u&&o.length>0&&e.text(o,true);u&&e.end(n);E.lastIndex=k;continue}k||(!C||C.indexOf("/")!=C.length-1?g.push({name:n,valid:u}):
u&&e.end(n))}else(n=c[1])?e.comment(n):(n=c[2])?e.cdata(n):(n=c[3])?e.doctype(n):(n=c[4])&&e.pi(n,c[5]);k=c.index+c[0].length}k<a.length&&e.text(R(a.substr(k)));for(m=g.length-1;m>=0;m--){n=g[m];n.valid&&e.end(n.name)}}}})(tinymce);
(function(d){function h(a,b,e){var c;c=e?"lastChild":"firstChild";e=e?"prev":"next";if(a[c])return a[c];if(a!==b){if(c=a[e])return c;for(a=a.parent;a&&a!==b;a=a.parent)if(c=a[e])return c}}function i(a,b){this.name=a;this.type=b;1===b&&(this.attributes=[],this.attributes.map={})}var g=/^[ \t\r\n]*$/,b={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};d.extend(i.prototype,{replace:function(a){a.parent&&a.remove();this.insert(a,this);this.remove();return this},attr:function(a,
b){var e,c;if("string"!==typeof a){for(c in a)this.attr(c,a[c]);return this}if(e=this.attributes){if(void 0!==b){if(null===b){if(a in e.map){delete e.map[a];for(c=e.length;c--;)if(e[c].name===a){e.splice(c,1);break}}return this}if(a in e.map)for(c=e.length;c--;){if(e[c].name===a){e[c].value=b;break}}else e.push({name:a,value:b});e.map[a]=b;return this}return e.map[a]}},clone:function(){var a=new i(this.name,this.type),b,e,c,k,d;if(c=this.attributes){d=[];d.map={};b=0;for(e=c.length;b<e;b++)k=c[b],
"id"!==k.name&&(d[d.length]={name:k.name,value:k.value},d.map[k.name]=k.value);a.attributes=d}a.value=this.value;a.shortEnded=this.shortEnded;return a},wrap:function(a){this.parent.insert(a,this);a.append(this);return this},unwrap:function(){var a,b;for(a=this.firstChild;a;)b=a.next,this.insert(a,this,!0),a=b;this.remove()},remove:function(){var a=this.parent,b=this.next,e=this.prev;if(a){if(a.firstChild===this){if(a.firstChild=b)b.prev=null}else e.next=b;if(a.lastChild===this){if(a.lastChild=e)e.next=
null}else b.prev=e;this.parent=this.next=this.prev=null}return this},append:function(a){var b;a.parent&&a.remove();(b=this.lastChild)?(b.next=a,a.prev=b,this.lastChild=a):this.lastChild=this.firstChild=a;a.parent=this;return a},insert:function(a,b,e){var c;a.parent&&a.remove();c=b.parent||this;e?(b===c.firstChild?c.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===c.lastChild?c.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a);a.parent=c;return a},getAll:function(a){var b,
e=[];for(b=this.firstChild;b;b=h(b,this))b.name===a&&e.push(b);return e},empty:function(){var a,b,e;if(this.firstChild){a=[];for(e=this.firstChild;e;e=h(e,this))a.push(e);for(b=a.length;b--;)e=a[b],e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}this.firstChild=this.lastChild=null;return this},isEmpty:function(a){var b=this.firstChild,e,c;if(b){do{if(1===b.type){if(b.attributes.map["data-mce-bogus"])continue;if(a[b.name])return!1;for(e=b.attributes.length;e--;)if(c=b.attributes[e].name,"name"===
c||0===c.indexOf("data-"))return!1}if(8===b.type||3===b.type&&!g.test(b.value))return!1}while(b=h(b,this))}return!0},walk:function(a){return h(this,null,a)}});d.extend(i,{create:function(a,d){var e,c;e=new i(a,b[a]||1);if(d)for(c in d)e.attr(c,d[c]);return e}});d.html.Node=i})(tinymce);
(function(d){var h=d.html.Node;d.html.DomParser=function(i,g){function b(c){var b,e,j,k,f,l,r,t,i,v,x;v=d.makeMap("tr,td,th,tbody,thead,tfoot,table");i=g.getNonEmptyElements();for(b=0;b<c.length;b++)if(e=c[b],e.parent){k=[e];for(j=e.parent;j&&!g.isValidChild(j.name,e.name)&&!v[j.name];j=j.parent)k.push(j);if(j&&1<k.length){k.reverse();f=l=a.filterNode(k[0].clone());for(t=0;t<k.length-1;t++){g.isValidChild(l.name,k[t].name)?(r=a.filterNode(k[t].clone()),l.append(r)):r=l;for(l=k[t].firstChild;l&&l!=
k[t+1];)x=l.next,r.append(l),l=x;l=r}f.isEmpty(i)?j.insert(e,k[0],!0):(j.insert(f,k[0],!0),j.insert(e,f));j=k[0];(j.isEmpty(i)||j.firstChild===j.lastChild&&"br"===j.firstChild.name)&&j.empty().remove()}else e.parent&&("li"===e.name?(j=e.prev)&&("ul"===j.name||"ul"===j.name)?j.append(e):(j=e.next)&&("ul"===j.name||"ul"===j.name)?j.insert(e,j.firstChild,!0):e.wrap(a.filterNode(new h("ul",1))):g.isValidChild(e.parent.name,"div")&&g.isValidChild("div",e.name)?e.wrap(a.filterNode(new h("div",1))):"style"===
e.name||"script"===e.name?e.empty().remove():e.unwrap())}}var a=this,f={},e=[],c={},k={},i=i||{};i.validate="validate"in i?i.validate:!0;i.root_name=i.root_name||"body";a.schema=g=g||new d.html.Schema;a.filterNode=function(a){var b,d,j;d in f&&((j=c[d])?j.push(a):c[d]=[a]);for(b=e.length;b--;)d=e[b].name,d in a.attributes.map&&((j=k[d])?j.push(a):k[d]=[a]);return a};a.addNodeFilter=function(c,a){d.each(d.explode(c),function(c){var b=f[c];b||(f[c]=b=[]);b.push(a)})};a.addAttributeFilter=function(c,
a){d.each(d.explode(c),function(c){var b;for(b=0;b<e.length;b++)if(e[b].name===c){e[b].callbacks.push(a);return}e.push({name:c,callbacks:[a]})})};a.parse=function(a,m){function p(){for(var c=l.firstChild,a,b;c;)a=c.next,3==c.type||1==c.type&&"p"!==c.name&&!C[c.name]&&!c.attr("data-mce-type")?(b||(b=j(L,1),l.insert(b,c)),b.append(c)):b=null,c=a}function j(a,b){var l=new h(a,b),e;a in f&&((e=c[a])?e.push(l):c[a]=[l]);return l}function o(c){for(var a,c=c.prev;c&&3===c.type;)a=c.value.replace(B,""),0<
a.length?(c.value=a,c=c.prev):(a=c.prev,c.remove(),c=a)}var q,l,r,t,D,v,x,u,y,C,z,A=[],s,B,F,G,J,E,L,m=m||{};c={};k={};C=d.extend(d.makeMap("script,style,head,html,body,title,meta,param"),g.getBlockElements());E=g.getNonEmptyElements();J=g.children;y=i.validate;L="forced_root_block"in m?m.forced_root_block:i.forced_root_block;G=g.getWhiteSpaceElements();z=/^[ \t\r\n]+/;B=/[ \t\r\n]+$/;F=/[ \t\r\n]+/g;q=new d.html.SaxParser({validate:y,fix_self_closing:!y,cdata:function(c){r.append(j("#cdata",4)).value=
c},text:function(c,a){var b;s||(c=c.replace(F," "),r.lastChild&&C[r.lastChild.name]&&(c=c.replace(z,"")));0!==c.length&&(b=j("#text",3),b.raw=!!a,r.append(b).value=c)},comment:function(c){r.append(j("#comment",8)).value=c},pi:function(c,a){r.append(j(c,7)).value=a;o(r)},doctype:function(c){r.append(j("#doctype",10)).value=c;o(r)},start:function(c,a,b){var l,d,n;if(l=y?g.getElementRule(c):{}){l=j(l.outputName||c,1);l.attributes=a;l.shortEnded=b;r.append(l);(d=J[r.name])&&J[l.name]&&!d[l.name]&&A.push(l);
for(d=e.length;d--;)n=e[d].name,n in a.map&&((u=k[n])?u.push(l):k[n]=[l]);C[c]&&o(l);b||(r=l);!s&&G[c]&&(s=!0)}},end:function(c){var a,b,l;if(b=y?g.getElementRule(c):{}){if(C[c]){if(!s){for(a=r.firstChild;a&&3===a.type;)l=a.value.replace(z,""),0<l.length?(a.value=l,a=a.next):(l=a.next,a.remove(),a=l);for(a=r.lastChild;a&&3===a.type;)l=a.value.replace(B,""),0<l.length?(a.value=l,a=a.prev):(l=a.prev,a.remove(),a=l)}if((a=r.prev)&&3===a.type)l=a.value.replace(z,""),0<l.length?a.value=l:a.remove()}s&&
G[c]&&(s=!1);if((b.removeEmpty||b.paddEmpty)&&r.isEmpty(E))if(b.paddEmpty)r.empty().append(new h("#text","3")).value="\u00a0";else if(!r.attributes.map.name){c=r.parent;r.empty().remove();r=c;return}r=r.parent}}},g);l=r=new h(m.context||i.root_name,11);q.parse(a);y&&A.length&&(m.context?m.invalid=!0:b(A));L&&"body"==l.name&&p();if(!m.invalid){for(x in c){u=f[x];q=c[x];for(v=q.length;v--;)q[v].parent||q.splice(v,1);t=0;for(D=u.length;t<D;t++)u[t](q,x,m)}t=0;for(D=e.length;t<D;t++)if(u=e[t],u.name in
k){q=k[u.name];for(v=q.length;v--;)q[v].parent||q.splice(v,1);v=0;for(x=u.callbacks.length;v<x;v++)u.callbacks[v](q,u.name,m)}}return l};i.remove_trailing_brs&&a.addNodeFilter("br",function(c){var a,b=c.length,e,k=g.getBlockElements(),f=g.getNonEmptyElements(),l,r,t;k.body=1;for(a=0;a<b;a++)if(e=c[a],l=e.parent,k[e.parent.name]&&e===l.lastChild){for(r=e.prev;r;){t=r.name;if("span"!==t||"bookmark"!==r.attr("data-mce-type")){if("br"!==t)break;if("br"===t){e=null;break}}r=r.prev}if(e&&(e.remove(),l.isEmpty(f)&&
(elementRule=g.getElementRule(l.name))))elementRule.removeEmpty?l.remove():elementRule.paddEmpty&&(l.empty().append(new d.html.Node("#text",3)).value="\u00a0")}})}})(tinymce);
tinymce.html.Writer=function(d){var h=[],i,g,b,a,f,d=d||{};i=d.indent;g=tinymce.makeMap(d.indent_before||"");b=tinymce.makeMap(d.indent_after||"");a=tinymce.html.Entities.getEncodeFunc(d.entity_encoding||"raw",d.entities);f="html"==d.element_format;return{start:function(e,c,k){var d,m,p;i&&g[e]&&0<h.length&&(d=h[h.length-1],0<d.length&&"\n"!==d&&h.push("\n"));h.push("<",e);if(c){d=0;for(m=c.length;d<m;d++)p=c[d],h.push(" ",p.name,'="',a(p.value,!0),'"')}h[h.length]=!k||f?">":" />";k&&i&&b[e]&&0<h.length&&
(d=h[h.length-1],0<d.length&&"\n"!==d&&h.push("\n"))},end:function(a){h.push("</",a,">");i&&b[a]&&0<h.length&&(a=h[h.length-1],0<a.length&&"\n"!==a&&h.push("\n"))},text:function(b,c){0<b.length&&(h[h.length]=c?b:a(b))},cdata:function(a){h.push("<![CDATA[",a,"]]\>")},comment:function(a){h.push("<\!--",a,"--\>")},pi:function(a,c){c?h.push("<?",a," ",c,"?>"):h.push("<?",a,"?>");i&&h.push("\n")},doctype:function(a){h.push("<!DOCTYPE",a,">",i?"\n":"")},reset:function(){h.length=0},getContent:function(){return h.join("").replace(/\n$/,
"")}}};
(function(d){d.html.Serializer=function(h,i){var g=new d.html.Writer(h),h=h||{};h.validate="validate"in h?h.validate:!0;this.schema=i=i||new d.html.Schema;this.writer=g;this.serialize=function(b){function a(c){var b=d[c.type],n,m,h,j,o,q,l,r;if(b)b(c);else{b=c.name;n=c.shortEnded;m=c.attributes;if(e&&m&&1<m.length){o=[];o.map={};r=i.getElementRule(c.name);q=0;for(l=r.attributesOrder.length;q<l;q++)h=r.attributesOrder[q],h in m.map&&(j=m.map[h],o.map[h]=j,o.push({name:h,value:j}));q=0;for(l=m.length;q<
l;q++)h=m[q].name,h in o.map||(j=m.map[h],o.map[h]=j,o.push({name:h,value:j}));m=o}g.start(c.name,m,n);if(!n){if(c=c.firstChild){do a(c);while(c=c.next)}g.end(b)}}}var d,e;e=h.validate;d={3:function(c){g.text(c.value,c.raw)},8:function(c){g.comment(c.value)},7:function(c){g.pi(c.name,c.value)},10:function(c){g.doctype(c.value)},4:function(c){g.cdata(c.value)},11:function(c){if(c=c.firstChild){do a(c);while(c=c.next)}}};g.reset();if(1==b.type&&!h.inner)a(b);else d[11](b);return g.getContent()}}})(tinymce);
tinymce.dom={};
(function(d,h){function i(c,a,b,e){c.addEventListener?c.addEventListener(a,b,e||!1):c.attachEvent&&c.attachEvent("on"+a,b)}function g(c,a,b,e){c.removeEventListener?c.removeEventListener(a,b,e||!1):c.detachEvent&&c.detachEvent("on"+a,b)}function b(c,a){function b(){return!1}function e(){return!0}var d,j=a||{};for(d in c)"layerX"!==d&&"layerY"!==d&&(j[d]=c[d]);j.target||(j.target=j.srcElement||document);j.preventDefault=function(){j.isDefaultPrevented=e;if(c)c.preventDefault?c.preventDefault():c.returnValue=
false};j.stopPropagation=function(){j.isPropagationStopped=e;if(c)c.stopPropagation?c.stopPropagation():c.cancelBubble=true};j.stopImmediatePropagation=function(){j.isImmediatePropagationStopped=e;j.stopPropagation()};j.isDefaultPrevented||(j.isDefaultPrevented=b,j.isPropagationStopped=b,j.isImmediatePropagationStopped=b);return j}function a(c,a,b){function d(){b.domLoaded||(b.domLoaded=!0,a(j))}var f=c.document,j={type:"ready"};e?i(c,"DOMContentLoaded",d):(i(f,"readystatechange",function(){"complete"===
f.readyState&&(g(f,"readystatechange",arguments.callee),d())}),f.documentElement.doScroll&&c===c.top&&function(){try{f.documentElement.doScroll("left")}catch(c){setTimeout(arguments.callee,0);return}d()}());i(c,"load",d)}function f(c){function k(c,a){var b,e,j,k;if(b=f[a][c.type]){e=0;for(j=b.length;e<j&&!((k=b[e])&&!1===k.func.call(k.scope,c)&&c.preventDefault(),c.isImmediatePropagationStopped());e++);}}var d=this,f={},p,j,o,q;o="onmouseenter"in document.documentElement;j="onfocusin"in document.documentElement;
q={mouseenter:"mouseover",mouseleave:"mouseout"};p=1;d.domLoaded=!1;d.events=f;d.bind=function(l,r,t,g){function v(c){k(b(c||B.event),x)}var x,u,y,C,z,A,s,B=window;if(l&&!(3===l.nodeType||8===l.nodeType)){l[h]?(x=l[h],f[x]||(f[x]={})):(x=p++,l[h]=x,f[x]={});g=g||l;r=r.split(" ");for(y=r.length;y--;)if(C=r[y],A=v,z=s=!1,"DOMContentLoaded"===C&&(C="ready"),(d.domLoaded||"complete"==l.readyState)&&"ready"===C)d.domLoaded=!0,t.call(g,b({type:C}));else{o||(z=q[C])&&(A=function(c){var a,l;a=c.currentTarget;
if((l=c.relatedTarget)&&a.contains)l=a.contains(l);else for(;l&&l!==a;)l=l.parentNode;if(!l){c=b(c||B.event);c.type=c.type==="mouseout"?"mouseleave":"mouseenter";c.target=a;k(c,x)}});if(!j&&("focusin"===C||"focusout"===C))s=!0,z="focusin"===C?"focus":"blur",A=function(c){c=b(c||B.event);c.type=c.type==="focus"?"focusin":"focusout";k(c,x)};(u=f[x][C])?u.push({func:t,scope:g}):(f[x][C]=u=[{func:t,scope:g}],u.fakeName=z,u.capture=s,u.nativeHandler=A,e||(u.proxyHandler=c(x)),"ready"===C?a(l,A,d):i(l,
z||C,e?A:u.proxyHandler,s))}l=u=0;return t}};d.unbind=function(c,a,b){var j,k,o,i,q,p;if(!c||3===c.nodeType||8===c.nodeType)return d;if(j=c[h]){p=f[j];if(a){a=a.split(" ");for(o=a.length;o--;)if(q=a[o],k=p[q]){if(b)for(i=k.length;i--;)k[i].func===b&&k.splice(i,1);if(!b||0===k.length)delete p[q],g(c,k.fakeName||q,e?k.nativeHandler:k.proxyHandler,k.capture)}}else{for(q in p)k=p[q],g(c,k.fakeName||q,e?k.nativeHandler:k.proxyHandler,k.capture);p={}}for(q in p)return d;delete f[j];try{delete c[h]}catch(z){c[h]=
null}}return d};d.fire=function(c,a,e){if(!c||3===c.nodeType||8===c.nodeType)return d;e=b(null,e);e.type=a;do(a=c[h])&&k(e,a),c=c.parentNode||c.ownerDocument||c.defaultView||c.parentWindow;while(c&&!e.isPropagationStopped());return d};d.clean=function(c){var a,b,e=d.unbind;if(!c||3===c.nodeType||8===c.nodeType)return d;c[h]&&e(c);c.getElementsByTagName||(c=c.document);if(c&&c.getElementsByTagName){e(c);b=c.getElementsByTagName("*");for(a=b.length;a--;)c=b[a],c[h]&&e(c)}return d};d.callNativeHandler=
function(c,a){f&&f[c][a.type].nativeHandler(a)};d.destory=function(){f={}};d.add=function(c,a,b,e){"string"===typeof c&&(c=document.getElementById(c));if(c&&c instanceof Array)for(var j=c;j--;)d.add(c[j],a,b,e);else return"init"===a&&(a="ready"),d.bind(c,a instanceof Array?a.join(" "):a,b,e)};d.remove=function(c,a,b){"string"===typeof c&&(c=document.getElementById(c));if(null!=c&&c instanceof Array){for(var e=c;e--;)d.remove(c[e],a,b);return d}return d.unbind(c,a instanceof Array?a.join(" "):a,b)};
d.clear=function(c){"string"===typeof c&&(c=document.getElementById(c));return d.clean(c)};d.cancel=function(c){c&&(d.prevent(c),d.stop(c));return!1};d.prevent=function(c){c.preventDefault();return!1};d.stop=function(c){c.stopPropagation();return!1}}var e=!!document.addEventListener;d.EventUtils=f;d.Event=new f(function(c){return function(a){tinymce.dom.Event.callNativeHandler(c,a)}});d.Event.bind(window,"ready",function(){});d=0})(tinymce.dom,"data-mce-expando");
(function(d){var h=d.each,i=d.is,g=d.isWebKit,b=d.isIE,a=d.html.Entities,f=/^([a-z0-9],?)+$/i,e=/^[ \t\r\n]*$/;d.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(c,a){var b;this.doc=c;this.win=window;
this.files={};this.cssFlicker=!1;this.counter=0;this.stdMode=!d.isIE||8<=c.documentMode;this.boxModel=!d.isIE||"CSS1Compat"==c.compatMode||this.stdMode;this.hasOuterHTML="outerHTML"in c.createElement("a");this.settings=a=d.extend({keep_values:!1,hex_colors:1},a);this.schema=a.schema;this.styles=new d.html.Styles({url_converter:a.url_converter,url_converter_scope:a.url_converter_scope},a.schema);if(d.isIE6)try{c.execCommand("BackgroundImageCache",!1,!0)}catch(e){this.cssFlicker=!0}this.fixDoc(c);this.events=
a.ownEvents?new d.dom.EventUtils(a.proxy):d.dom.Event;d.addUnload(this.destroy,this);b=a.schema?a.schema.getBlockElements():{};this.isBlock=function(c){var a=c.nodeType;return a?!!(1===a&&b[c.nodeName]):!!b[c]}},fixDoc:function(c){var a=this.settings,e;if(b&&a.schema)for(e in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(a){c.createElement(a)}),a.schema.getCustomElements())c.createElement(e)},
clone:function(c,a){var e=this,d,f;if(!b||1!==c.nodeType||a)return c.cloneNode(a);f=e.doc;return!a?(d=f.createElement(c.nodeName),h(e.getAttribs(c),function(a){e.setAttrib(d,a.nodeName,e.getAttrib(c,a.nodeName))}),d):d.firstChild},getRoot:function(){var c=this.settings;return c&&this.get(c.root_element)||this.doc.body},getViewPort:function(c){var a,c=!c?this.win:c;a=c.document;a=this.boxModel?a.documentElement:a.body;return{x:c.pageXOffset||a.scrollLeft,y:c.pageYOffset||a.scrollTop,w:c.innerWidth||
a.clientWidth,h:c.innerHeight||a.clientHeight}},getRect:function(c){var a,c=this.get(c);a=this.getPos(c);c=this.getSize(c);return{x:a.x,y:a.y,w:c.w,h:c.h}},getSize:function(c){var a,b,c=this.get(c);a=this.getStyle(c,"width");b=this.getStyle(c,"height");-1===a.indexOf("px")&&(a=0);-1===b.indexOf("px")&&(b=0);return{w:parseInt(a)||c.offsetWidth||c.clientWidth,h:parseInt(b)||c.offsetHeight||c.clientHeight}},getParent:function(c,a,b){return this.getParents(c,a,b,!1)},getParents:function(c,a,b,e){var d=
this,j,f=d.settings,g=[],c=d.get(c),e=void 0===e;f.strict_root&&(b=b||d.getRoot());i(a,"string")&&(j=a,a="*"===a?function(c){return 1==c.nodeType}:function(c){return d.is(c,j)});for(;c&&!(c==b||!c.nodeType||9===c.nodeType);){if(!a||a(c))if(e)g.push(c);else return c;c=c.parentNode}return e?g:null},get:function(c){var a;return c&&this.doc&&"string"==typeof c&&(a=c,(c=this.doc.getElementById(c))&&c.id!==a)?this.doc.getElementsByName(a)[1]:c},getNext:function(c,a){return this._findSib(c,a,"nextSibling")},
getPrev:function(c,a){return this._findSib(c,a,"previousSibling")},select:function(c,a){return d.dom.Sizzle(c,this.get(a)||this.get(this.settings.root_element)||this.doc,[])},is:function(c,a){var b;if(void 0===c.length){if("*"===a)return 1==c.nodeType;if(f.test(a)){a=a.toLowerCase().split(/,/);c=c.nodeName.toLowerCase();for(b=a.length-1;0<=b;b--)if(a[b]==c)return!0;return!1}}return 0<d.dom.Sizzle.matches(a,c.nodeType?[c]:c).length},add:function(c,a,b,e,d){var j=this;return this.run(c,function(c){var f;
f=i(a,"string")?j.doc.createElement(a):a;j.setAttribs(f,b);e&&(e.nodeType?f.appendChild(e):j.setHTML(f,e));return!d?c.appendChild(f):f})},create:function(c,a,b){return this.add(this.doc.createElement(c),c,a,b,1)},createHTML:function(c,a,b){var e,d;e="<"+c;for(d in a)a.hasOwnProperty(d)&&(e+=" "+d+'="'+this.encode(a[d])+'"');return"undefined"!=typeof b?e+">"+b+"</"+c+">":e+" />"},remove:function(c,a){return this.run(c,function(c){var b,e=c.parentNode;if(!e)return null;if(a)for(;b=c.firstChild;)!d.isIE||
3!==b.nodeType||b.nodeValue?e.insertBefore(b,c):c.removeChild(b);return e.removeChild(c)})},setStyle:function(c,a,e){var f=this;return f.run(c,function(g){var j;j=g.style;a=a.replace(/-(\D)/g,function(c,a){return a.toUpperCase()});if(f.pixelStyles.test(a)&&(d.is(e,"number")||/^[\-0-9\.]+$/.test(e)))e+="px";switch(a){case "opacity":if(b&&(j.filter=""===e?"":"alpha(opacity="+100*e+")",!c.currentStyle||!c.currentStyle.hasLayout))j.display="inline-block";j[a]=j["-moz-opacity"]=j["-khtml-opacity"]=e||
"";break;case "float":b?j.styleFloat=e:j.cssFloat=e;break;default:j[a]=e||""}f.settings.update_styles&&f.setAttrib(g,"data-mce-style")})},getStyle:function(c,a,e){if(c=this.get(c)){if(this.doc.defaultView&&e){a=a.replace(/[A-Z]/g,function(c){return"-"+c});try{return this.doc.defaultView.getComputedStyle(c,null).getPropertyValue(a)}catch(d){return null}}a=a.replace(/-(\D)/g,function(c,a){return a.toUpperCase()});"float"==a&&(a=b?"styleFloat":"cssFloat");return c.currentStyle&&e?c.currentStyle[a]:c.style?
c.style[a]:void 0}},setStyles:function(c,a){var b=this,e=b.settings,d;d=e.update_styles;e.update_styles=0;h(a,function(a,e){b.setStyle(c,e,a)});e.update_styles=d;e.update_styles&&b.setAttrib(c,e.cssText)},removeAllAttribs:function(c){return this.run(c,function(c){var a,b=c.attributes;for(a=b.length-1;0<=a;a--)c.removeAttributeNode(b.item(a))})},setAttrib:function(c,a,b){var e=this;if(c&&a)return e.settings.strict&&(a=a.toLowerCase()),this.run(c,function(c){var j=e.settings,d=c.getAttribute(a);if(null!==
b)switch(a){case "style":if(!i(b,"string")){h(b,function(a,b){e.setStyle(c,b,a)});return}j.keep_values&&(b&&!e._isRes(b)?c.setAttribute("data-mce-style",b,2):c.removeAttribute("data-mce-style",2));c.style.cssText=b;break;case "class":c.className=b||"";break;case "src":case "href":j.keep_values&&(j.url_converter&&(b=j.url_converter.call(j.url_converter_scope||e,b,a,c)),e.setAttrib(c,"data-mce-"+a,b,2));break;case "shape":c.setAttribute("data-mce-style",b)}i(b)&&null!==b&&0!==b.length?c.setAttribute(a,
""+b,2):c.removeAttribute(a,2);tinyMCE.activeEditor&&d!=b&&(j=tinyMCE.activeEditor,j.onSetAttrib.dispatch(j,c,a,b))})},setAttribs:function(c,a){var b=this;return this.run(c,function(c){h(a,function(a,e){b.setAttrib(c,e,a)})})},getAttrib:function(c,a,e){var f,c=this.get(c);if(!c||1!==c.nodeType)return void 0===e?!1:e;i(e)||(e="");if(/^(src|href|style|coords|shape)$/.test(a)&&(f=c.getAttribute("data-mce-"+a)))return f;b&&this.props[a]&&(f=(f=c[this.props[a]])&&f.nodeValue?f.nodeValue:f);f||(f=c.getAttribute(a,
2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(a))return!0===c[this.props[a]]&&""===f?a:f?a:"";if("FORM"===c.nodeName&&c.getAttributeNode(a))return c.getAttributeNode(a).nodeValue;if("style"===a&&(f=f||c.style.cssText))f=this.serializeStyle(this.parseStyle(f),c.nodeName),this.settings.keep_values&&!this._isRes(f)&&c.setAttribute("data-mce-style",f);g&&"class"===a&&f&&(f=f.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(b)switch(a){case "rowspan":case "colspan":1===
f&&(f="");break;case "size":if("+0"===f||20===f||0===f)f="";break;case "width":case "height":case "vspace":case "checked":case "disabled":case "readonly":0===f&&(f="");break;case "hspace":-1===f&&(f="");break;case "maxlength":case "tabindex":if(32768===f||2147483647===f||"32768"===f)f="";break;case "multiple":case "compact":case "noshade":case "nowrap":return 65535===f?a:e;case "shape":f=f.toLowerCase();break;default:0===a.indexOf("on")&&f&&(f=d._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",
""+f))}return void 0!==f&&null!==f&&""!==f?""+f:e},getPos:function(a,b){var e=0,d=0,f=this.doc,a=this.get(a),b=b||f.body;if(a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),d=this.boxModel?f.documentElement:f.body,e=a.left+(f.documentElement.scrollLeft||f.body.scrollLeft)-d.clientTop,d=a.top+(f.documentElement.scrollTop||f.body.scrollTop)-d.clientLeft,{x:e,y:d};for(f=a;f&&f!=b&&f.nodeType;)e+=f.offsetLeft||0,d+=f.offsetTop||0,f=f.offsetParent;for(f=a.parentNode;f&&f!=b&&f.nodeType;)e-=
f.scrollLeft||0,d-=f.scrollTop||0,f=f.parentNode}return{x:e,y:d}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},loadCSS:function(a){var e=this,f=e.doc,g;a||(a="");g=e.select("head")[0];h(a.split(","),function(a){var c;e.files[a]||(e.files[a]=!0,c=e.create("link",{rel:"stylesheet",href:d._addVer(a)}),b&&f.documentMode&&f.recalc&&(c.onload=function(){f.recalc&&f.recalc();c.onload=null}),g.appendChild(c))})},addClass:function(a,b){return this.run(a,
function(a){var c;if(!b)return 0;if(this.hasClass(a,b))return a.className;c=this.removeClass(a,b);return a.className=(""!=c?c+" ":"")+b})},removeClass:function(a,b){var e=this,f;return e.run(a,function(a){var c;return e.hasClass(a,b)?(f||(f=RegExp("(^|\\s+)"+b+"(\\s+|$)","g")),c=a.className.replace(f," "),c=d.trim(" "!=c?c:""),a.className=c,c||(a.removeAttribute("class"),a.removeAttribute("className")),c):a.className})},hasClass:function(a,b){a=this.get(a);return!a||!b?!1:-1!==(" "+a.className+" ").indexOf(" "+
b+" ")},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){a=this.get(a);return!a||"none"==a.style.display||"none"==this.getStyle(a,"display")},uniqueId:function(a){return(!a?"mce_":a)+this.counter++},setHTML:function(a,e){var d=this;return d.run(a,function(a){if(b){for(;a.firstChild;)a.removeChild(a.firstChild);try{a.innerHTML="<br />"+e,a.removeChild(a.firstChild)}catch(c){a=d.create("div"),a.innerHTML="<br />"+
e,h(a.childNodes,function(c,b){b&&a.appendChild(c)})}}else a.innerHTML=e;return e})},getOuterHTML:function(a){var b,a=this.get(a);if(!a)return null;if(1===a.nodeType&&this.hasOuterHTML)return a.outerHTML;b=(a.ownerDocument||this.doc).createElement("body");b.appendChild(a.cloneNode(!0));return b.innerHTML},setOuterHTML:function(a,e,d){function f(a,c,b){b=b.createElement("body");b.innerHTML=c;for(c=b.lastChild;c;)g.insertAfter(c.cloneNode(!0),a),c=c.previousSibling;g.remove(a)}var g=this;return this.run(a,
function(a){a=g.get(a);if(1==a.nodeType)if(d=d||a.ownerDocument||g.doc,b)try{b&&1==a.nodeType?a.outerHTML=e:f(a,e,d)}catch(c){f(a,e,d)}else f(a,e,d)})},decode:a.decode,encode:a.encodeAllRaw,insertAfter:function(a,b){b=this.get(b);return this.run(a,function(a){var c,e;c=b.parentNode;(e=b.nextSibling)?c.insertBefore(a,e):c.appendChild(a);return a})},replace:function(a,b,e){i(b,"array")&&(a=a.cloneNode(!0));return this.run(b,function(b){e&&h(d.grep(b.childNodes),function(b){a.appendChild(b)});return b.parentNode.replaceChild(a,
b)})},rename:function(a,b){var e=this,d;a.nodeName!=b.toUpperCase()&&(d=e.create(b),h(e.getAttribs(a),function(b){e.setAttrib(d,b.nodeName,e.getAttrib(a,b.nodeName))}),e.replace(d,a,1));return d||a},findCommonAncestor:function(a,b){for(var e=a,d;e;){for(d=b;d&&e!=d;)d=d.parentNode;if(e==d)break;e=e.parentNode}return!e&&a.ownerDocument?a.ownerDocument.documentElement:e},toHex:function(a){function b(a){a=parseInt(a).toString(16);return 1<a.length?a:"0"+a}var e=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);
e&&(a="#"+b(e[1])+b(e[2])+b(e[3]));return a},getClasses:function(){function a(j){h(j.imports,function(b){a(b)});h(j.cssRules||j.rules,function(j){switch(j.type||1){case 1:j.selectorText&&h(j.selectorText.split(","),function(a){a=a.replace(/^\s*|\s*$|^\s\./g,"");if(!/\.mce/.test(a)&&/\.[\w\-]+$/.test(a)&&(g=a,a=d._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",a),(!f||(a=f(a,g)))&&!e[a]))b.push({"class":a}),e[a]=1});break;case 3:a(j.styleSheet)}})}var b=[],e={},f=this.settings.class_filter,g;if(this.classes)return this.classes;
try{h(this.doc.styleSheets,a)}catch(j){}0<b.length&&(this.classes=b);return b},run:function(a,b,e){var d=this,f;d.doc&&"string"===typeof a&&(a=d.get(a));if(!a)return!1;e=e||this;return!a.nodeType&&(a.length||0===a.length)?(f=[],h(a,function(a,c){a&&("string"==typeof a&&(a=d.doc.getElementById(a)),f.push(b.call(e,a,c)))}),f):b.call(e,a)},getAttribs:function(a){var e,a=this.get(a);if(!a)return[];if(b){e=[];if("OBJECT"==a.nodeName)return a.attributes;"OPTION"===a.nodeName&&this.getAttrib(a,"selected")&&
e.push({specified:1,nodeName:"selected"});a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){e.push({specified:1,nodeName:a})});return e}return a.attributes},isEmpty:function(a,b){var f,g,i,j;if(a=a.firstChild){i=new d.dom.TreeWalker(a,a.parentNode);b=b||this.schema?this.schema.getNonEmptyElements():null;do{g=a.nodeType;if(1===g){if(a.getAttribute("data-mce-bogus"))continue;j=a.nodeName.toLowerCase();if(b&&b[j]){f=a.parentNode;
if("br"===j&&this.isBlock(f)&&f.firstChild===a&&f.lastChild===a)continue;return!1}this.getAttribs(a);for(f=a.attributes.length;f--;)if(j=a.attributes[f].nodeName,"name"===j||"data-mce-bookmark"===j)return!1}if(8==g||3===g&&!e.test(a.nodeValue))return!1}while(a=i.next())}return!0},destroy:function(a){this.win=this.doc=this.root=this.events=this.frag=null;a||d.removeUnload(this.destroy)},createRng:function(){var a=this.doc;return a.createRange?a.createRange():new d.dom.Range(this)},nodeIndex:function(a,
b){var e=0,d,f;if(a){d=a.nodeType;for(a=a.previousSibling;a;a=a.previousSibling)if(f=a.nodeType,!(b&&3==f)||f!=d&&a.nodeValue.length)e++,d=f}return e},split:function(a,b,e){function f(a){var c,b=a.childNodes,e=a.nodeType;if(!(1==e&&"bookmark"==a.getAttribute("data-mce-type"))){for(c=b.length-1;0<=c;c--)f(b[c]);if(9!=e){if(3==e&&0<a.nodeValue.length){c=d.trim(a.nodeValue).length;if(!(b=!g.isBlock(a.parentNode)))if(!(b=0<c)){if(c=0==c)c=a.nextSibling&&"SPAN"==a.nextSibling.nodeName,c=a.previousSibling&&
"SPAN"==a.previousSibling.nodeName&&c;b=c}if(b)return}else if(1==e&&(b=a.childNodes,1==b.length&&b[0]&&1==b[0].nodeType&&"bookmark"==b[0].getAttribute("data-mce-type")&&a.parentNode.insertBefore(b[0],a),b.length||/^(br|hr|input|img)$/i.test(a.nodeName)))return;g.remove(a)}return a}}var g=this,j=g.createRng(),o,i;if(a&&b)return j.setStart(a.parentNode,g.nodeIndex(a)),j.setEnd(b.parentNode,g.nodeIndex(b)),o=j.extractContents(),j=g.createRng(),j.setStart(b.parentNode,g.nodeIndex(b)+1),j.setEnd(a.parentNode,
g.nodeIndex(a)+1),j=j.extractContents(),i=a.parentNode,i.insertBefore(f(o),a),e?i.replaceChild(e,b):i.insertBefore(b,a),i.insertBefore(f(j),a),g.remove(a),e||b},bind:function(a,b,e,d){return this.events.add(a,b,e,d||this)},unbind:function(a,b,e){return this.events.remove(a,b,e)},fire:function(a,b,e){return this.events.fire(a,b,e)},_findSib:function(a,b,e){var d=this,f=b;if(a){i(f,"string")&&(f=function(a){return d.is(a,b)});for(a=a[e];a;a=a[e])if(f(a))return a}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||
/;\s*(top|left|bottom|right|width|height)/i.test(a)}});d.DOM=new d.dom.DOMUtils(document,{process_html:0})})(tinymce);
(function(d){function h(d){function g(a,c){k(v,a,c)}function b(a,c){k(x,a,c)}function a(a){g(a.parentNode,s(a))}function f(a){b(a.parentNode,s(a)+1)}function e(a,c){var b;if(3==a.nodeType||0>c)return a;for(b=a.firstChild;b&&0<c;)--c,b=b.nextSibling;return b?b:a}function c(a,c,b,e){var l,j;if(a==b)return c==e?0:c<e?-1:1;for(l=b;l&&l.parentNode!=a;)l=l.parentNode;if(l){j=0;for(b=a.firstChild;b!=l&&j<c;)j++,b=b.nextSibling;return c<=j?-1:1}for(l=a;l&&l.parentNode!=b;)l=l.parentNode;if(l){j=0;for(b=b.firstChild;b!=
l&&j<e;)j++,b=b.nextSibling;return j<e?-1:1}for(c=d.findCommonAncestor(a,b);a&&a.parentNode!=c;)a=a.parentNode;a||(a=c);for(e=b;e&&e.parentNode!=c;)e=e.parentNode;e||(e=c);if(a==e)return 0;for(b=c.firstChild;b;){if(b==a)return-1;if(b==e)return 1;b=b.nextSibling}}function k(a,b,e){a?(l[y]=b,l[u]=e):(l[C]=b,l[z]=e);for(b=l[C];b.parentNode;)b=b.parentNode;for(e=l[y];e.parentNode;)e=e.parentNode;e==b?0<c(l[y],l[u],l[C],l[z])&&l.collapse(a):l.collapse(a);l.collapsed=l[y]==l[C]&&l[u]==l[z];l.commonAncestorContainer=
d.findCommonAncestor(l[y],l[C])}function n(a){var c,b=0,e=0,d;if(l[y]==l[C])return m(a);c=l[C];for(d=c.parentNode;d;c=d,d=d.parentNode){if(d==l[y]){var f=c;d=e=b=b=d=c=void 0;a!=D&&(c=r.createDocumentFragment());d=p(f,a);c&&c.appendChild(d);b=s(f);b-=l[u];if(!(0>=b))for(d=f.previousSibling;0<b;)e=d.previousSibling,d=q(d,a),c&&c.insertBefore(d,c.firstChild),--b,d=e;a!=t&&(l.setEndBefore(f),l.collapse(x));a=c;return a}++b}c=l[y];for(d=c.parentNode;d;c=d,d=d.parentNode){if(d==l[C]){f=c;d=e=b=d=b=c=void 0;
a!=D&&(c=r.createDocumentFragment());d=j(f,a);c&&c.appendChild(d);b=s(f);++b;b=l[z]-b;for(d=f.nextSibling;d&&0<b;)e=d.nextSibling,d=q(d,a),c&&c.appendChild(d),--b,d=e;a!=t&&(l.setStartAfter(f),l.collapse(v));return c}++e}e-=b;for(c=l[y];0<e;)c=c.parentNode,e--;for(b=l[C];0>e;)b=b.parentNode,e++;e=c.parentNode;for(d=b.parentNode;e!=d;e=e.parentNode,d=d.parentNode)c=e,b=d;var g;a!=D&&(f=r.createDocumentFragment());g=j(c,a);f&&f.appendChild(g);e=s(c);d=s(b);++e;e=d-e;for(g=c.nextSibling;0<e;)d=g.nextSibling,
g=q(g,a),f&&f.appendChild(g),g=d,--e;g=p(b,a);f&&f.appendChild(g);a!=t&&(l.setStartAfter(c),l.collapse(v));return f}function m(a){var c,b,d,j,f;a!=D&&(c=r.createDocumentFragment());if(l[u]==l[z])return c;if(3==l[y].nodeType){b=l[y].nodeValue;d=b.substring(l[u],l[z]);a!=t&&(b=l[y],j=l[u],f=l[z]-l[u],0===j&&f>=b.nodeValue.length-1?b.parentNode.removeChild(b):b.deleteData(j,f),l.collapse(v));if(a==D)return;0<d.length&&c.appendChild(r.createTextNode(d));return c}b=e(l[y],l[u]);for(d=l[z]-l[u];b&&0<d;)j=
b.nextSibling,b=q(b,a),c&&c.appendChild(b),--d,b=j;a!=t&&l.collapse(v);return c}function p(a,c){var b=e(l[C],l[z]-1),d,j,f,r=b!=l[C];if(b==a)return o(b,r,x,c);d=b.parentNode;for(j=o(d,x,x,c);d;){for(;b;)f=b.previousSibling,b=o(b,r,x,c),c!=D&&j.insertBefore(b,j.firstChild),r=v,b=f;if(d==a)return j;b=d.previousSibling;d=d.parentNode;f=o(d,x,x,c);c!=D&&f.appendChild(j);j=f}}function j(a,c){var b=e(l[y],l[u]),d=b!=l[y],j,f,r;if(b==a)return o(b,d,v,c);j=b.parentNode;for(f=o(j,x,v,c);j;){for(;b;)r=b.nextSibling,
b=o(b,d,v,c),c!=D&&f.appendChild(b),d=v,b=r;if(j==a)return f;b=j.nextSibling;j=j.parentNode;r=o(j,x,v,c);c!=D&&r.appendChild(f);f=r}}function o(a,c,b,e){var j;if(c)return q(a,e);if(3==a.nodeType){c=a.nodeValue;b?(j=l[u],b=c.substring(j),c=c.substring(0,j)):(j=l[z],b=c.substring(0,j),c=c.substring(j));e!=t&&(a.nodeValue=c);if(e==D)return;a=d.clone(a,x);a.nodeValue=b;return a}if(e!=D)return d.clone(a,x)}function q(a,c){if(c!=D)return c==t?d.clone(a,v):a;a.parentNode.removeChild(a)}var l=this,r=d.doc,
t=1,D=2,v=!0,x=!1,u="startOffset",y="startContainer",C="endContainer",z="endOffset",A=tinymce.extend,s=d.nodeIndex;A(l,{startContainer:r,startOffset:0,endContainer:r,endOffset:0,collapsed:v,commonAncestorContainer:r,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:g,setEnd:b,setStartBefore:a,setStartAfter:function(a){g(a.parentNode,s(a)+1)},setEndBefore:function(a){b(a.parentNode,s(a))},setEndAfter:f,collapse:function(a){a?(l[C]=l[y],l[z]=l[u]):(l[y]=l[C],l[u]=l[z]);l.collapsed=
v},selectNode:function(c){a(c);f(c)},selectNodeContents:function(a){g(a,0);b(a,1===a.nodeType?a.childNodes.length:a.nodeValue.length)},compareBoundaryPoints:function(a,b){var e=l[y],d=l[u],j=l[C],f=l[z],r=b.startContainer,g=b.startOffset,k=b.endContainer,o=b.endOffset;if(0===a)return c(e,d,r,g);if(1===a)return c(j,f,r,g);if(2===a)return c(j,f,k,o);if(3===a)return c(e,d,k,o)},deleteContents:function(){n(D)},extractContents:function(){return n(0)},cloneContents:function(){return n(t)},insertNode:function(a){var c=
this[y],b=this[u],e;(3===c.nodeType||4===c.nodeType)&&c.nodeValue?b?b>=c.nodeValue.length?d.insertAfter(a,c):(b=c.splitText(b),c.parentNode.insertBefore(a,b)):c.parentNode.insertBefore(a,c):(0<c.childNodes.length&&(e=c.childNodes[b]),e?c.insertBefore(a,e):c.appendChild(a))},surroundContents:function(a){var c=l.extractContents();l.insertNode(a);a.appendChild(c);l.selectNode(a)},cloneRange:function(){return A(new h(d),{startContainer:l[y],startOffset:l[u],endContainer:l[C],endOffset:l[z],collapsed:l.collapsed,
commonAncestorContainer:l.commonAncestorContainer})}})}d.Range=h})(tinymce.dom);
(function(){tinymce.dom.TridentSelection=function(d){function h(a,b){var e,c=0,g,i,h,p,j,o,q=-1,l;e=a.duplicate();e.collapse(b);l=e.parentElement();if(l.ownerDocument===d.dom.doc){for(;"false"===l.contentEditable;)l=l.parentNode;if(!l.hasChildNodes())return{node:l,inside:1};h=l.children;for(g=h.length-1;c<=g;)if(o=Math.floor((c+g)/2),p=h[o],e.moveToElementText(p),q=e.compareEndPoints(b?"StartToStart":"EndToEnd",a),0<q)g=o-1;else if(0>q)c=o+1;else return{node:p};if(0>q){p?e.collapse(!1):(e.moveToElementText(l),
e.collapse(!0),p=l,i=!0);e.setEndPoint(b?"EndToStart":"EndToEnd",a);if(0<e.compareEndPoints(b?"StartToStart":"StartToEnd",a)){e=a.duplicate();e.collapse(b);for(j=-1;l==e.parentElement()&&0!=e.move("character",-1);)j++}j=j||e.text.replace("\r\n"," ").length}else e.collapse(!0),e.setEndPoint(b?"StartToStart":"StartToEnd",a),j=e.text.replace("\r\n"," ").length;return{node:p,position:q,offset:j,inside:i}}}var i=this,g=d.dom,b=!1;this.getBookmark=function(a){function b(a){var c,e,d,f,k=[];c=a.parentNode;
for(e=g.getRoot().parentNode;c!=e&&9!==c.nodeType;){d=c.children;for(f=d.length;f--;)if(a===d[f]){k.push(f);break}a=c;c=c.parentNode}return k}function e(a){if(a=h(c,a))return{position:a.position,offset:a.offset,indexes:b(a.node),inside:a.inside}}var c=d.getRng(),k={};2===a&&(c.item?k.start={ctrl:!0,indexes:b(c.item(0))}:(k.start=e(!0),d.isCollapsed()||(k.end=e())));return k};this.moveToBookmark=function(a){function b(a){var c,e,d,f;c=g.getRoot();for(e=a.length-1;0<=e;e--)f=c.children,d=a[e],d<=f.length-
1&&(c=f[d]);return c}function e(e){var g=a[e?"start":"end"],i,j;g&&(i=0<g.position,j=d.createTextRange(),j.moveToElementText(b(g.indexes)),offset=g.offset,void 0!==offset?(j.collapse(g.inside||i),j.moveStart("character",i?-offset:offset)):j.collapse(e),c.setEndPoint(e?"StartToStart":"EndToStart",j),e&&c.collapse(!0))}var c,d=g.doc.body;a.start&&(a.start.ctrl?(c=d.createControlRange(),c.addElement(b(a.start.indexes))):(c=d.createTextRange(),e(!0),e()),c.select())};this.addRange=function(a){function f(a){var c,
d,f,q,x;f=g.create("a");c=a?k:h;d=a?i:p;q=e.duplicate();if(c==j||c==j.documentElement)c=o,d=0;3==c.nodeType?(c.parentNode.insertBefore(f,c),q.moveToElementText(f),q.moveStart("character",d),g.remove(f),e.setEndPoint(a?"StartToStart":"EndToEnd",q)):(x=c.childNodes,x.length?(d>=x.length?g.insertAfter(f,x[x.length-1]):c.insertBefore(f,x[d]),q.moveToElementText(f)):c.canHaveHTML&&(c.innerHTML="<span>\ufeff</span>",f=c.firstChild,q.moveToElementText(f),q.collapse(b)),e.setEndPoint(a?"StartToStart":"EndToEnd",
q),g.remove(f))}var e,c,k,i,h,p,j=d.dom.doc,o=j.body;k=a.startContainer;i=a.startOffset;h=a.endContainer;p=a.endOffset;e=o.createTextRange();if(k==h&&1==k.nodeType){if(!k.hasChildNodes()){k.innerHTML="<span>\ufeff</span><span>\ufeff</span>";e.moveToElementText(k.lastChild);e.select();g.doc.selection.clear();k.innerHTML="";return}if(i==p-1)try{c=o.createControlRange();c.addElement(k.childNodes[i]);c.select();return}catch(q){}}f(!0);f();e.select()};this.getRangeAt=function(){function a(a){var c=h(b,
a),d,l,r=0,g;d=c.node;l=c.offset;if(c.inside&&!d.hasChildNodes())e[a?"setStart":"setEnd"](d,0);else if(void 0===l)e[a?"setStartBefore":"setEndAfter"](d);else{if(0>c.position){c=c.inside?d.firstChild:d.nextSibling;if(!c){e[a?"setStartAfter":"setEndAfter"](d);return}if(!l){if(3==c.nodeType)e[a?"setStart":"setEnd"](c,0);else e[a?"setStartBefore":"setEndBefore"](c);return}for(;c;){g=c.nodeValue;r+=g.length;if(r>=l){d=c;r-=l;r=g.length-r;break}c=c.nextSibling}}else{c=d.previousSibling;if(!c)return e[a?
"setStartBefore":"setEndBefore"](d);if(!l){if(3==d.nodeType)e[a?"setStart":"setEnd"](c,d.nodeValue.length);else e[a?"setStartAfter":"setEndAfter"](c);return}for(;c;){r+=c.nodeValue.length;if(r>=l){d=c;r-=l;break}c=c.previousSibling}}e[a?"setStart":"setEnd"](d,r)}}var b=d.getRng(),e=g.createRng(),c,k,n,m;c=b.item?b.item(0):b.parentElement();if(c.ownerDocument!=g.doc)return e;k=d.isCollapsed();if(b.item)return e.setStart(c.parentNode,g.nodeIndex(c)),e.setEnd(e.startContainer,e.startOffset+1),e;try{a(!0),
k||a()}catch(p){if(-2147024809==p.number)m=i.getBookmark(2),n=b.duplicate(),n.collapse(!0),c=n.parentElement(),k||(n=b.duplicate(),n.collapse(!1),n=n.parentElement(),n.innerHTML=n.innerHTML),c.innerHTML=c.innerHTML,i.moveToBookmark(m),b=d.getRng(),a(!0),k||a();else throw p;}return e}}})();
(function(){function d(a,c,b,e,d,f){for(var d=0,j=e.length;d<j;d++){var g=e[d];if(g){for(var g=g[a],k=!1;g;){if(g.sizcache===b){k=e[g.sizset];break}1===g.nodeType&&!f&&(g.sizcache=b,g.sizset=d);if(g.nodeName.toLowerCase()===c){k=g;break}g=g[a]}e[d]=k}}}function h(a,c,b,d,f,j){for(var f=0,g=d.length;f<g;f++){var k=d[f];if(k){for(var k=k[a],i=!1;k;){if(k.sizcache===b){i=d[k.sizset];break}if(1===k.nodeType)if(j||(k.sizcache=b,k.sizset=f),"string"!==typeof c){if(k===c){i=!0;break}}else if(0<e.filter(c,
[k]).length){i=k;break}k=k[a]}d[f]=i}}}var i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,g=0,b=Object.prototype.toString,a=!1,f=!0;[0,0].sort(function(){f=!1;return 0});var e=function(a,d,f,j){var f=f||[],g=d=d||document;if(1!==d.nodeType&&9!==d.nodeType)return[];if(!a||"string"!==typeof a)return f;var o=[],h,n,m,z,A=!0,s=e.isXML(d),B=a,F;do if(i.exec(""),h=i.exec(B))if(B=h[3],o.push(h[1]),h[2]){z=h[3];break}while(h);
if(1<o.length&&k.exec(a))if(2===o.length&&c.relative[o[0]])n=q(o[0]+o[1],d);else for(n=c.relative[o[0]]?[d]:e(o.shift(),d);o.length;)a=o.shift(),c.relative[a]&&(a+=o.shift()),n=q(a,n);else if(!j&&1<o.length&&9===d.nodeType&&!s&&c.match.ID.test(o[0])&&!c.match.ID.test(o[o.length-1])&&(h=e.find(o.shift(),d,s),d=h.expr?e.filter(h.expr,h.set)[0]:h.set[0]),d){h=j?{expr:o.pop(),set:p(j)}:e.find(o.pop(),1===o.length&&("~"===o[0]||"+"===o[0])&&d.parentNode?d.parentNode:d,s);n=h.expr?e.filter(h.expr,h.set):
h.set;for(0<o.length?m=p(n):A=!1;o.length;)h=F=o.pop(),c.relative[F]?h=o.pop():F="",null==h&&(h=d),c.relative[F](m,h,s)}else m=[];m||(m=n);m||e.error(F||a);if("[object Array]"===b.call(m))if(A)if(d&&1===d.nodeType)for(a=0;null!=m[a];a++)m[a]&&(!0===m[a]||1===m[a].nodeType&&e.contains(d,m[a]))&&f.push(n[a]);else for(a=0;null!=m[a];a++)m[a]&&1===m[a].nodeType&&f.push(n[a]);else f.push.apply(f,m);else p(m,f);z&&(e(z,g,f,j),e.uniqueSort(f));return f};e.uniqueSort=function(c){if(o&&(a=f,c.sort(o),a))for(var b=
1;b<c.length;b++)c[b]===c[b-1]&&c.splice(b--,1);return c};e.matches=function(a,c){return e(a,null,null,c)};e.find=function(a,b,e){var d;if(!a)return[];for(var f=0,j=c.order.length;f<j;f++){var g=c.order[f],k;if(k=c.leftMatch[g].exec(a)){var o=k[1];k.splice(1,1);if("\\"!==o.substr(o.length-1)&&(k[1]=(k[1]||"").replace(/\\/g,""),d=c.find[g](k,b,e),null!=d)){a=a.replace(c.match[g],"");break}}}d||(d=b.getElementsByTagName("*"));return{set:d,expr:a}};e.filter=function(a,b,d,f){for(var j=a,g=[],k=b,o,i,
h=b&&b[0]&&e.isXML(b[0]);a&&b.length;){for(var q in c.filter)if(null!=(o=c.leftMatch[q].exec(a))&&o[2]){var n=c.filter[q],m,p;p=o[1];i=!1;o.splice(1,1);if("\\"!==p.substr(p.length-1)){k===g&&(g=[]);if(c.preFilter[q])if(o=c.preFilter[q](o,k,d,g,f,h)){if(!0===o)continue}else i=m=!0;if(o)for(var G=0;null!=(p=k[G]);G++)if(p){m=n(p,o,G,k);var J=f^!!m;d&&null!=m?J?i=!0:k[G]=!1:J&&(g.push(p),i=!0)}if(void 0!==m){d||(k=g);a=a.replace(c.match[q],"");if(!i)return[];break}}}if(a===j)if(null==i)e.error(a);else break;
j=a}return k};e.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var c=e.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,c){var b="string"===typeof c,d=b&&!/\W/.test(c),b=b&&!d;d&&(c=c.toLowerCase());for(var d=0,f=a.length,j;d<f;d++)if(j=a[d]){for(;(j=j.previousSibling)&&1!==j.nodeType;);a[d]=b||j&&j.nodeName.toLowerCase()===c?j||!1:j===c}b&&e.filter(c,a,!0)},">":function(a,c){var b="string"===
typeof c,d,f=0,j=a.length;if(b&&!/\W/.test(c))for(c=c.toLowerCase();f<j;f++){if(d=a[f])b=d.parentNode,a[f]=b.nodeName.toLowerCase()===c?b:!1}else{for(;f<j;f++)(d=a[f])&&(a[f]=b?d.parentNode:d.parentNode===c);b&&e.filter(c,a,!0)}},"":function(a,c,b){var e=g++,f=h,j;"string"===typeof c&&!/\W/.test(c)&&(j=c=c.toLowerCase(),f=d);f("parentNode",c,e,a,j,b)},"~":function(a,c,b){var e=g++,f=h,j;"string"===typeof c&&!/\W/.test(c)&&(j=c=c.toLowerCase(),f=d);f("previousSibling",c,e,a,j,b)}},find:{ID:function(a,
c,b){if("undefined"!==typeof c.getElementById&&!b)return(a=c.getElementById(a[1]))?[a]:[]},NAME:function(a,c){if("undefined"!==typeof c.getElementsByName){for(var b=[],e=c.getElementsByName(a[1]),d=0,f=e.length;d<f;d++)e[d].getAttribute("name")===a[1]&&b.push(e[d]);return 0===b.length?null:b}},TAG:function(a,c){return c.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,c,b,e,d,f){a=" "+a[1].replace(/\\/g,"")+" ";if(f)return a;for(var f=0,j;null!=(j=c[f]);f++)j&&(d^(j.className&&0<=(" "+j.className+
" ").replace(/[\t\n]/g," ").indexOf(a))?b||e.push(j):b&&(c[f]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if("nth"===a[1]){var c=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=c[1]+(c[2]||1)-0;a[3]=c[3]-0}a[0]=g++;return a},ATTR:function(a,b,e,d,f,j){b=a[1].replace(/\\/g,"");!j&&c.attrMap[b]&&(a[1]=c.attrMap[b]);"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},
PSEUDO:function(a,b,d,f,j){if("not"===a[1])if(1<(i.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=e(a[3],null,null,b);else return a=e.filter(a[3],b,d,1^j),d||f.push.apply(f,a),!1;else if(c.match.POS.test(a[0])||c.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode.selectedIndex;return!0===
a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,c,b){return!!e(b[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===
a.type},button:function(a){return"button"===a.type||"button"===a.nodeName.toLowerCase()},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,c){return 0===c},last:function(a,c,b,e){return c===e.length-1},even:function(a,c){return 0===c%2},odd:function(a,c){return 1===c%2},lt:function(a,c,b){return c<b[3]-0},gt:function(a,c,b){return c>b[3]-0},nth:function(a,c,b){return b[3]-0===c},eq:function(a,c,b){return b[3]-0===c}},filter:{PSEUDO:function(a,
b,d,f){var j=b[1],g=c.filters[j];if(g)return g(a,d,b,f);if("contains"===j)return 0<=(a.textContent||a.innerText||e.getText([a])||"").indexOf(b[3]);if("not"===j){b=b[3];d=0;for(f=b.length;d<f;d++)if(b[d]===a)return!1;return!0}e.error("Syntax error, unrecognized expression: "+j)},CHILD:function(a,c){var b=c[1],e=a;switch(b){case "only":case "first":for(;e=e.previousSibling;)if(1===e.nodeType)return!1;if("first"===b)return!0;e=a;case "last":for(;e=e.nextSibling;)if(1===e.nodeType)return!1;return!0;case "nth":var b=
c[2],d=c[3];if(1===b&&0===d)return!0;var f=c[0],j=a.parentNode;if(j&&(j.sizcache!==f||!a.nodeIndex)){for(var g=0,e=j.firstChild;e;e=e.nextSibling)1===e.nodeType&&(e.nodeIndex=++g);j.sizcache=f}e=a.nodeIndex-d;return 0===b?0===e:0===e%b&&0<=e/b}},ID:function(a,c){return 1===a.nodeType&&a.getAttribute("id")===c},TAG:function(a,c){return"*"===c&&1===a.nodeType||a.nodeName.toLowerCase()===c},CLASS:function(a,c){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(c)},ATTR:function(a,b){var e=
b[1],e=c.attrHandle[e]?c.attrHandle[e](a):null!=a[e]?a[e]:a.getAttribute(e),d=e+"",f=b[2],j=b[4];return null==e?"!="===f:"="===f?d===j:"*="===f?0<=d.indexOf(j):"~="===f?0<=(" "+d+" ").indexOf(j):!j?d&&!1!==e:"!="===f?d!==j:"^="===f?0===d.indexOf(j):"$="===f?d.substr(d.length-j.length)===j:"|="===f?d===j||d.substr(0,j.length+1)===j+"-":!1},POS:function(a,b,e,d){var f=c.setFilters[b[2]];if(f)return f(a,e,b,d)}}},k=c.match.POS,n=function(a,c){return"\\"+(c-0+1)},m;for(m in c.match)c.match[m]=RegExp(c.match[m].source+
/(?![^\[]*\])(?![^\(]*\))/.source),c.leftMatch[m]=RegExp(/(^(?:.|\r|\n)*?)/.source+c.match[m].source.replace(/\\(\d+)/g,n));var p=function(a,c){a=Array.prototype.slice.call(a,0);return c?(c.push.apply(c,a),c):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(j){p=function(a,c){var e=c||[],d=0;if("[object Array]"===b.call(a))Array.prototype.push.apply(e,a);else if("number"===typeof a.length)for(var f=a.length;d<f;d++)e.push(a[d]);else for(;a[d];d++)e.push(a[d]);
return e}}var o;document.documentElement.compareDocumentPosition?o=function(c,b){if(!c.compareDocumentPosition||!b.compareDocumentPosition)return c==b&&(a=!0),c.compareDocumentPosition?-1:1;var e=c.compareDocumentPosition(b)&4?-1:c===b?0:1;0===e&&(a=!0);return e}:"sourceIndex"in document.documentElement?o=function(c,b){if(!c.sourceIndex||!b.sourceIndex)return c==b&&(a=!0),c.sourceIndex?-1:1;var e=c.sourceIndex-b.sourceIndex;0===e&&(a=!0);return e}:document.createRange&&(o=function(c,b){if(!c.ownerDocument||
!b.ownerDocument)return c==b&&(a=!0),c.ownerDocument?-1:1;var e=c.ownerDocument.createRange(),d=b.ownerDocument.createRange();e.setStart(c,0);e.setEnd(c,0);d.setStart(b,0);d.setEnd(b,0);e=e.compareBoundaryPoints(Range.START_TO_END,d);0===e&&(a=!0);return e});e.getText=function(a){for(var c="",b,d=0;a[d];d++)b=a[d],3===b.nodeType||4===b.nodeType?c+=b.nodeValue:8!==b.nodeType&&(c+=e.getText(b.childNodes));return c};(function(){var a=document.createElement("div"),b="script"+(new Date).getTime();a.innerHTML=
"<a name='"+b+"'/>";var e=document.documentElement;e.insertBefore(a,e.firstChild);document.getElementById(b)&&(c.find.ID=function(a,c,b){if("undefined"!==typeof c.getElementById&&!b)return(c=c.getElementById(a[1]))?c.id===a[1]||"undefined"!==typeof c.getAttributeNode&&c.getAttributeNode("id").nodeValue===a[1]?[c]:void 0:[]},c.filter.ID=function(a,c){var b="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&b&&b.nodeValue===c});e.removeChild(a);e=a=null})();(function(){var a=
document.createElement("div");a.appendChild(document.createComment(""));0<a.getElementsByTagName("*").length&&(c.find.TAG=function(a,c){var b=c.getElementsByTagName(a[1]);if("*"===a[1]){for(var e=[],d=0;b[d];d++)1===b[d].nodeType&&e.push(b[d]);b=e}return b});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(c.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();document.querySelectorAll&&function(){var a=
e,c=document.createElement("div");c.innerHTML="<p class='TEST'></p>";if(!(c.querySelectorAll&&0===c.querySelectorAll(".TEST").length)){e=function(c,b,d,f){b=b||document;if(!f&&9===b.nodeType&&!e.isXML(b))try{return p(b.querySelectorAll(c),d)}catch(j){}return a(c,b,d,f)};for(var b in a)e[b]=a[b];c=null}}();(function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className=
"e",1!==a.getElementsByClassName("e").length&&(c.order.splice(1,0,"CLASS"),c.find.CLASS=function(a,c,b){if("undefined"!==typeof c.getElementsByClassName&&!b)return c.getElementsByClassName(a[1])},a=null))})();e.contains=document.compareDocumentPosition?function(a,c){return!!(a.compareDocumentPosition(c)&16)}:function(a,c){return a!==c&&(a.contains?a.contains(c):!0)};e.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var q=function(a,b){for(var d=[],f="",
j,g=b.nodeType?[b]:b;j=c.match.PSEUDO.exec(a);)f+=j[0],a=a.replace(c.match.PSEUDO,"");a=c.relative[a]?a+"*":a;j=0;for(var k=g.length;j<k;j++)e(a,g[j],d);return e.filter(f,d)};window.tinymce.dom.Sizzle=e})();
(function(d){d.dom.Element=function(h,i){var g=this,b;g.settings=i=i||{};g.id=h;g.dom=b=i.dom||d.DOM;d.isIE||b.get(g.id);d.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){g[a]=function(){var d=[h],e;for(e=0;e<arguments.length;e++)d.push(arguments[e]);d=b[a].apply(b,d);g.update(a);return d}});d.extend(g,{on:function(a,b,e){return d.dom.Event.add(g.id,
a,b,e)},getXY:function(){return{x:parseInt(g.getStyle("left")),y:parseInt(g.getStyle("top"))}},getSize:function(){var a=b.get(g.id);return{w:parseInt(g.getStyle("width")||a.clientWidth),h:parseInt(g.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){g.setStyles({left:a,top:b})},moveBy:function(a,b){var e=g.getXY();g.moveTo(e.x+a,e.y+b)},resizeTo:function(a,b){g.setStyles({width:a,height:b})},resizeBy:function(a,b){var e=g.getSize();g.resizeTo(e.w+a,e.h+b)},update:function(a){d.isIE6&&i.blocker&&
(a=a||"",0===a.indexOf("get")||0===a.indexOf("has")||0===a.indexOf("is")||("remove"==a?b.remove(g.blocker):(g.blocker?a=b.get(g.blocker):(g.blocker=b.uniqueId(),a=b.add(i.container||b.getRoot(),"iframe",{id:g.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),b.setStyle(a,"opacity",0)),b.setStyles(a,{left:g.getStyle("left",1),top:g.getStyle("top",1),width:g.getStyle("width",1),height:g.getStyle("height",1),display:g.getStyle("display",1),zIndex:parseInt(g.getStyle("zIndex",1)||
0)-1}))))}})}})(tinymce);
(function(d){var h=d.is,i=d.isIE,g=d.each;d.create("tinymce.dom.Selection",{Selection:function(b,a,f){var e=this;e.dom=b;e.win=a;e.serializer=f;g(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(a){e[a]=new d.util.Dispatcher(e)});e.win.getSelection||(e.tridentSel=new d.dom.TridentSelection(e));d.isIE&&b.boxModel&&this._fixIESelection();d.addUnload(e.destroy,e)},setCursorLocation:function(b,a){var d=this.dom.createRng();d.setStart(b,a);d.setEnd(b,a);this.setRng(d);
this.collapse(!1)},getContent:function(b){var a=this.getRng(),d=this.dom.create("body"),e=this.getSel(),c,g,b=b||{};c=g="";b.get=!0;b.format=b.format||"html";b.forced_root_block="";this.onBeforeGetContent.dispatch(this,b);if("text"==b.format)return this.isCollapsed()?"":a.text||(e.toString?e.toString():"");a.cloneContents?(a=a.cloneContents())&&d.appendChild(a):h(a.item)||h(a.htmlText)?(d.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),d.removeChild(d.firstChild)):d.innerHTML=a.toString();
/^\s/.test(d.innerHTML)&&(c=" ");/\s+$/.test(d.innerHTML)&&(g=" ");b.getInner=!0;b.content=this.isCollapsed()?"":c+this.serializer.serialize(d,b)+g;this.onGetContent.dispatch(this,b);return b.content},setContent:function(b,a){var d=this.getRng(),e,c=this.win.document,g,a=a||{format:"html"};a.set=!0;a.content=b;a.no_events||this.onBeforeSetContent.dispatch(this,a);b=a.content;if(d.insertNode){b+='<span id="__caret">_</span>';d.startContainer==c&&d.endContainer==c?c.body.innerHTML=b:(d.deleteContents(),
0==c.body.childNodes.length?c.body.innerHTML=b:d.createContextualFragment?d.insertNode(d.createContextualFragment(b)):(e=c.createDocumentFragment(),g=c.createElement("div"),e.appendChild(g),g.outerHTML=b,d.insertNode(e)));e=this.dom.get("__caret");d=c.createRange();d.setStartBefore(e);d.setEndBefore(e);this.setRng(d);this.dom.remove("__caret");try{this.setRng(d)}catch(i){}}else(d.item&&(c.execCommand("Delete",!1,null),d=this.getRng()),/^\s+/.test(b))?(d.pasteHTML('<span id="__mce_tmp">_</span>'+b),
this.dom.remove("__mce_tmp")):d.pasteHTML(b);a.no_events||this.onSetContent.dispatch(this,a)},getStart:function(){var b=this.getRng(),a,d;if(b.duplicate||b.item){if(b.item)return b.item(0);a=b.duplicate();a.collapse(1);a=a.parentElement();for(b=d=b.parentElement();d=d.parentNode;)if(d==a){a=b;break}return a}a=b.startContainer;1==a.nodeType&&a.hasChildNodes()&&(a=a.childNodes[Math.min(a.childNodes.length-1,b.startOffset)]);return a&&3==a.nodeType?a.parentNode:a},getEnd:function(){var b=this.getRng(),
a;if(b.duplicate||b.item){if(b.item)return b.item(0);b=b.duplicate();b.collapse(0);return(a=b.parentElement())&&"BODY"==a.nodeName?a.lastChild||a:a}a=b.endContainer;b=b.endOffset;1==a.nodeType&&a.hasChildNodes()&&(a=a.childNodes[0<b?b-1:b]);return a&&3==a.nodeType?a.parentNode:a},getBookmark:function(b,a){function d(a,b){var e=0;g(c.select(a),function(a,c){a==b&&(e=c)});return e}var e=this,c=e.dom,k,i,h,p,j;if(2==b)return e.tridentSel?e.tridentSel.getBookmark(b):function(){function b(c,d){var f=c[d?
"startContainer":"endContainer"],g=c[d?"startOffset":"endOffset"],l=[],k,o=0;if(3==f.nodeType){if(a)for(k=f.previousSibling;k&&3==k.nodeType;k=k.previousSibling)g+=k.nodeValue.length;l.push(g)}else k=f.childNodes,g>=k.length&&k.length&&(o=1,g=Math.max(0,k.length-1)),l.push(e.dom.nodeIndex(k[g],a)+o);for(;f&&f!=j;f=f.parentNode)l.push(e.dom.nodeIndex(f,a));return l}var d=e.getRng(!0),j=c.getRoot(),f={};f.start=b(d,!0);e.isCollapsed()||(f.end=b(d));return f}();if(b)return{rng:e.getRng()};k=e.getRng();
h=c.uniqueId();p=tinyMCE.activeEditor.selection.isCollapsed();if(k.duplicate||k.item){if(k.item)return j=k.item(0),i=j.nodeName,{name:i,index:d(i,j)};i=k.duplicate();try{k.collapse(),k.pasteHTML('<span data-mce-type="bookmark" id="'+h+'_start" style="overflow:hidden;line-height:0px">\ufeff</span>'),p||(i.collapse(!1),k.moveToElementText(i.parentElement()),0==k.compareEndPoints("StartToEnd",i)&&i.move("character",-1),i.pasteHTML('<span data-mce-type="bookmark" id="'+h+'_end" style="overflow:hidden;line-height:0px">\ufeff</span>'))}catch(o){return null}}else{j=
e.getNode();i=j.nodeName;if("IMG"==i)return{name:i,index:d(i,j)};i=k.cloneRange();p||(i.collapse(!1),i.insertNode(c.create("span",{"data-mce-type":"bookmark",id:h+"_end",style:"overflow:hidden;line-height:0px"},"\ufeff")));k.collapse(!0);k.insertNode(c.create("span",{"data-mce-type":"bookmark",id:h+"_start",style:"overflow:hidden;line-height:0px"},"\ufeff"))}e.moveToBookmark({id:h,keep:1});return{id:h}},moveToBookmark:function(b){var a=this.dom,f,e,c,k,h,m;if(b)if(b.start){f=a.createRng();e=a.getRoot();
var p=function(a){var c=b[a?"start":"end"],d,j,g;if(c){g=c[0];j=e;for(d=c.length-1;1<=d;d--){j=j.childNodes;if(c[d]>j.length-1)return;j=j[c[d]]}3===j.nodeType&&(g=Math.min(c[0],j.nodeValue.length));1===j.nodeType&&(g=Math.min(c[0],j.childNodes.length));a?f.setStart(j,g):f.setEnd(j,g)}return!0};if(this.tridentSel)return this.tridentSel.moveToBookmark(b);p(!0)&&p()&&this.setRng(f)}else if(b.id){var p=function(e){var j=a.get(b.id+"_"+e),f,i,t;t=b.keep;if(j&&(f=j.parentNode,"start"==e?(t?(f=j.firstChild,
i=1):i=a.nodeIndex(j),c=k=f,h=m=i):(t?(f=j.firstChild,i=1):i=a.nodeIndex(j),k=f,m=i),!t)){t=j.previousSibling;f=j.nextSibling;for(g(d.grep(j.childNodes),function(a){if(a.nodeType==3)a.nodeValue=a.nodeValue.replace(/\uFEFF/g,"")});j=a.get(b.id+"_"+e);)a.remove(j,1);t&&f&&t.nodeType==f.nodeType&&3==t.nodeType&&!d.isOpera&&(i=t.nodeValue.length,t.appendData(f.nodeValue),a.remove(f),"start"==e?(c=k=t,h=m=i):(k=t,m=i))}},j=function(c){a.isBlock(c)&&!c.innerHTML&&(c.innerHTML=!i?'<br data-mce-bogus="1" />':
" ");return c};p("start");p("end");c&&(f=a.createRng(),f.setStart(j(c),h),f.setEnd(j(k),m),this.setRng(f))}else b.name?this.select(a.select(b.name)[b.index]):b.rng&&this.setRng(b.rng)},select:function(b,a){var f=this.dom,e=f.createRng();b&&(f=f.nodeIndex(b),e.setStart(b.parentNode,f),e.setEnd(b.parentNode,f+1),a&&(f=function(a,b){var f=new d.dom.TreeWalker(a,a);do{if(3==a.nodeType&&0!=d.trim(a.nodeValue).length){b?e.setStart(a,0):e.setEnd(a,a.nodeValue.length);break}if("BR"==a.nodeName){b?e.setStartBefore(a):
e.setEndBefore(a);break}}while(a=b?f.next():f.prev())},f(b,1),f(b)),this.setRng(e));return b},isCollapsed:function(){var b=this.getRng(),a=this.getSel();return!b||b.item?!1:b.compareEndPoints?0===b.compareEndPoints("StartToEnd",b):!a||b.collapsed},collapse:function(b){var a=this.getRng(),d;a.item&&(d=a.item(0),a=this.win.document.body.createTextRange(),a.moveToElementText(d));a.collapse(!!b);this.setRng(a)},getSel:function(){var b=this.win;return b.getSelection?b.getSelection():b.document.selection},
getRng:function(b){var a,f,e=this.win.document;if(b&&this.tridentSel)return this.tridentSel.getRangeAt(0);try{if(a=this.getSel())f=0<a.rangeCount?a.getRangeAt(0):a.createRange?a.createRange():e.createRange()}catch(c){}d.isIE&&f&&f.setStart&&e.selection.createRange().item&&(b=e.selection.createRange().item(0),f=e.createRange(),f.setStartBefore(b),f.setEndAfter(b));f||(f=e.createRange?e.createRange():e.body.createTextRange());this.selectedRange&&this.explicitRange&&(0===f.compareBoundaryPoints(f.START_TO_START,
this.selectedRange)&&0===f.compareBoundaryPoints(f.END_TO_END,this.selectedRange)?f=this.explicitRange:this.explicitRange=this.selectedRange=null);return f},setRng:function(b){var a;if(this.tridentSel){if(b.cloneRange)try{this.tridentSel.addRange(b);return}catch(d){}try{b.select()}catch(e){}}else if(a=this.getSel()){this.explicitRange=b;try{a.removeAllRanges()}catch(c){}a.addRange(b);this.selectedRange=0<a.rangeCount?a.getRangeAt(0):null}},setNode:function(b){this.setContent(this.dom.getOuterHTML(b));
return b},getNode:function(){var b=this.getRng();this.getSel();var a,d=b.startContainer,e=b.endContainer;if(!b)return this.dom.getRoot();if(b.setStart){a=b.commonAncestorContainer;if(!b.collapsed&&(b.startContainer==b.endContainer&&2>b.endOffset-b.startOffset&&b.startContainer.hasChildNodes()&&(a=b.startContainer.childNodes[b.startOffset]),3===d.nodeType&&3===e.nodeType)){var c=function(a,c){for(var b=a;a&&3===a.nodeType&&0===a.length;)a=c?a.nextSibling:a.previousSibling;return a||b},d=d.length===
b.startOffset?c(d.nextSibling,!0):d.parentNode,e=0===b.endOffset?c(e.previousSibling,!1):e.parentNode;if(d&&d===e)return d}return a&&3==a.nodeType?a.parentNode:a}return b.item?b.item(0):b.parentElement()},getSelectedBlocks:function(b,a){var f=this.dom,e,c,g,i=[];e=f.getParent(b||this.getStart(),f.isBlock);c=f.getParent(a||this.getEnd(),f.isBlock);e&&i.push(e);if(e&&c&&e!=c){g=e;for(var h=new d.dom.TreeWalker(e,f.getRoot());(g=h.next())&&g!=c;)f.isBlock(g)&&i.push(g)}c&&e!=c&&i.push(c);return i},normalize:function(){function b(c){var b,
g,i,h=a.dom;i=h.getRoot();var j;b=f[(c?"start":"end")+"Container"];g=f[(c?"start":"end")+"Offset"];9===b.nodeType&&(b=b.body,g=0);if(b===i&&b.hasChildNodes()&&(b=b.childNodes[Math.min(!c&&0<g?g-1:g,b.childNodes.length-1)],g=0,b.hasChildNodes())){j=b;i=new d.dom.TreeWalker(b,i);do{if(3===j.nodeType){g=c?0:j.nodeValue.length-1;b=j;e=!0;break}if(/^(BR|IMG)$/.test(j.nodeName)){g=h.nodeIndex(j);b=j.parentNode;"IMG"==j.nodeName&&!c&&g++;e=!0;break}}while(j=c?i.next():i.prev())}if(e)f["set"+(c?"Start":"End")](b,
g)}var a=this,f,e;d.isIE||(f=a.getRng(),b(!0),f.collapsed||b(),e&&a.setRng(f))},destroy:function(b){this.win=null;b||d.removeUnload(this.destroy)},_fixIESelection:function(){function b(a,c){var b=g.createTextRange();try{b.moveToPoint(a,c)}catch(e){b=null}return b}function a(a){if(a.button){if(a=b(a.x,a.y))0<a.compareEndPoints("StartToStart",h)?a.setEndPoint("StartToStart",h):a.setEndPoint("EndToEnd",h),a.select()}else d()}function d(){var b=c.selection.createRange();h&&!b.item&&0===b.compareEndPoints("StartToEnd",
b)&&h.select();e.unbind(c,"mouseup",d);e.unbind(c,"mousemove",a);h=i=0}var e=this.dom,c=e.doc,g=c.body,i,h,p;c.documentElement.unselectable=!0;e.bind(c,["mousedown","contextmenu"],function(j){if("HTML"===j.target.nodeName&&(i&&d(),p=c.documentElement,!(p.scrollHeight>p.clientHeight)&&(i=1,h=b(j.x,j.y))))e.bind(c,"mouseup",d),e.bind(c,"mousemove",a),e.win.focus(),h.select()})}})})(tinymce);
(function(d){d.dom.Serializer=function(h,i,g){var b,a,f=d.isIE,e=d.each,c;h.apply_source_formatting||(h.indent=!1);i=i||d.DOM;g=g||new d.html.Schema(h);h.entity_encoding=h.entity_encoding||"named";h.remove_trailing_brs="remove_trailing_brs"in h?h.remove_trailing_brs:!0;b=new d.util.Dispatcher(self);a=new d.util.Dispatcher(self);c=new d.html.DomParser(h,g);c.addAttributeFilter("src,href,style",function(a,c){for(var b=a.length,e,d,f="data-mce-"+c,g=h.url_converter,l=h.url_converter_scope;b--;){e=a[b];
d=e.attributes.map[f];if(d!==void 0){e.attr(c,d.length>0?d:null);e.attr(f,null)}else{d=e.attributes.map[c];c==="style"?d=i.serializeStyle(i.parseStyle(d),e.name):g&&(d=g.call(l,d,c,e.name));e.attr(c,d.length>0?d:null)}}});c.addAttributeFilter("class",function(a){for(var c=a.length,b,e;c--;){b=a[c];e=b.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,"");b.attr("class",e.length>0?e:null)}});c.addAttributeFilter("data-mce-type",function(a,c,b){for(var c=a.length,e;c--;){e=a[c];e.attributes.map["data-mce-type"]===
"bookmark"&&!b.cleanup&&e.remove()}});c.addAttributeFilter("data-mce-expando",function(a,c){for(var b=a.length;b--;)a[b].attr(c,null)});c.addNodeFilter("script,style",function(a,c){function b(a){return a.replace(/(<\!--\[CDATA\[|\]\]--\>)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<\!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<\!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<\!--|\/\*\s*<\!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(--\>)?|\s*\/\/\s*\]\]>(--\>)?|\/\/\s*(--\>)?|\]\]>|\/\*\s*--\>\s*\*\/|\s*--\>\s*)\s*$/g,
"")}for(var e=a.length,d,f;e--;){d=a[e];f=d.firstChild?d.firstChild.value:"";if(c==="script"){d.attr("type",(d.attr("type")||"text/javascript").replace(/^mce\-/,""));if(f.length>0)d.firstChild.value="// <![CDATA[\n"+b(f)+"\n// ]]\>"}else if(f.length>0)d.firstChild.value="<\!--\n"+b(f)+"\n--\>"}});c.addNodeFilter("#comment",function(a){for(var c=a.length,b;c--;){b=a[c];if(b.value.indexOf("[CDATA[")===0){b.name="#cdata";b.type=4;b.value=b.value.replace(/^\[CDATA\[|\]\]$/g,"")}else if(b.value.indexOf("mce:protected ")===
0){b.name="#text";b.type=3;b.raw=true;b.value=unescape(b.value).substr(14)}}});c.addNodeFilter("xml:namespace,input",function(a,c){for(var b=a.length,e;b--;){e=a[b];e.type===7?e.remove():e.type===1&&c==="input"&&!("type"in e.attributes.map)&&e.attr("type","text")}});h.fix_list_elements&&c.addNodeFilter("ul,ol",function(a){for(var c=a.length,b,e;c--;){b=a[c];e=b.parent;(e.name==="ul"||e.name==="ol")&&b.prev&&b.prev.name==="li"&&b.prev.append(b)}});c.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",
function(a,c){for(var b=a.length;b--;)a[b].attr(c,null)});return{schema:g,addNodeFilter:c.addNodeFilter,addAttributeFilter:c.addAttributeFilter,onPreProcess:b,onPostProcess:a,serialize:function(k,n){var m,p,j;if(f&&i.select("script,style,select,map").length>0){m=k.innerHTML;k=k.cloneNode(false);i.setHTML(k,m)}else k=k.cloneNode(true);m=k.ownerDocument.implementation;if(m.createHTMLDocument){p=m.createHTMLDocument("");e(k.nodeName=="BODY"?k.childNodes:[k],function(a){p.body.appendChild(p.importNode(a,
true))});k=k.nodeName!="BODY"?p.body.firstChild:p.body;j=i.doc;i.doc=p}n=n||{};n.format=n.format||"html";if(!n.no_events){n.node=k;b.dispatch(self,n)}m=new d.html.Serializer(h,g);n.content=m.serialize(c.parse(n.getInner?k.innerHTML:d.trim(i.getOuterHTML(k),n),n));if(!n.cleanup)n.content=n.content.replace(/\uFEFF|\u200B/g,"");n.no_events||a.dispatch(self,n);if(j)i.doc=j;n.node=null;return n.content},addRules:function(a){g.addValidElements(a)},setRules:function(a){g.setValidElements(a)}}}})(tinymce);
(function(d){d.dom.ScriptLoader=function(){function h(a,c){function b(){g.remove(h);i&&(i.onreadystatechange=i.onload=i=null);c()}function f(){"undefined"!==typeof console&&console.log&&console.log("Failed to load: "+a)}var g=d.DOM,i,j,o,h;h=g.uniqueId();if(d.isIE6&&(j=new d.util.URI(a),o=location,j.host==o.hostname&&j.port==o.port&&j.protocol+":"==o.protocol&&"file"!=j.protocol.toLowerCase())){d.util.XHR.send({url:d._addVer(j.getURI()),success:function(a){var c=g.create("script",{type:"text/javascript"});
c.text=a;document.getElementsByTagName("head")[0].appendChild(c);g.remove(c);b()},error:f});return}i=g.create("script",{id:h,type:"text/javascript",src:d._addVer(a)});d.isIE||(i.onload=b);i.onerror=f;d.isOpera||(i.onreadystatechange=function(){var a=i.readyState;(a=="complete"||a=="loaded")&&b()});(document.getElementsByTagName("head")[0]||document.body).appendChild(i)}var i={},g=[],b={},a=[],f=0;this.isDone=function(a){return 2==i[a]};this.markDone=function(a){i[a]=2};this.add=this.load=function(a,
c,d){void 0==i[a]&&(g.push(a),i[a]=0);c&&(b[a]||(b[a]=[]),b[a].push({func:c,scope:d||this}))};this.loadQueue=function(a,c){this.loadScripts(g,a,c)};this.loadScripts=function(e,c,g){function n(a){d.each(b[a],function(a){a.func.call(a.scope)});b[a]=void 0}var m;a.push({func:c,scope:g||this});m=function(){var c=d.grep(e);e.length=0;d.each(c,function(a){2==i[a]?n(a):1!=i[a]&&(i[a]=1,f++,h(a,function(){i[a]=2;f--;n(a);m()}))});f||(d.each(a,function(a){a.func.call(a.scope)}),a.length=0)};m()}};d.ScriptLoader=
new d.dom.ScriptLoader})(tinymce);tinymce.dom.TreeWalker=function(d,h){function i(b,a,d,e){if(b){if(!e&&b[a])return b[a];if(b!=h){if(a=b[d])return a;for(b=b.parentNode;b&&b!=h;b=b.parentNode)if(a=b[d])return a}}}var g=d;this.current=function(){return g};this.next=function(b){return g=i(g,"firstChild","nextSibling",b)};this.prev=function(b){return g=i(g,"lastChild","previousSibling",b)}};
(function(d){d.dom.RangeUtils=function(h){this.walk=function(i,g){function b(a){var b;b=a[0];3===b.nodeType&&b===c&&k>=b.nodeValue.length&&a.splice(0,1);b=a[a.length-1];0===m&&0<a.length&&b===n&&3===b.nodeType&&a.splice(a.length-1,1);return a}function a(a,c,b){for(var e=[];a&&a!=b;a=a[c])e.push(a);return e}function f(a,c){do{if(a.parentNode==c)return a;a=a.parentNode}while(a)}function e(c,e,d){var j=d?"nextSibling":"previousSibling";o=c;for(q=o.parentNode;o&&o!=e;o=q)q=o.parentNode,l=a(o==c?o:o[j],
j),l.length&&(d||l.reverse(),g(b(l)))}var c=i.startContainer,k=i.startOffset,n=i.endContainer,m=i.endOffset,p,j,o,q,l;j=h.select("td.mceSelected,th.mceSelected");if(0<j.length)d.each(j,function(a){g([a])});else{1==c.nodeType&&c.hasChildNodes()&&(c=c.childNodes[k]);1==n.nodeType&&n.hasChildNodes()&&(n=n.childNodes[Math.min(m-1,n.childNodes.length-1)]);if(c==n)return g(b([c]));p=h.findCommonAncestor(c,n);for(o=c;o;o=o.parentNode){if(o===n)return e(c,p,!0);if(o===p)break}for(o=n;o;o=o.parentNode){if(o===
c)return e(n,p);if(o===p)break}j=f(c,p)||c;p=f(n,p)||n;e(c,j,!0);l=a(j==c?j:j.nextSibling,"nextSibling",p==n?p.nextSibling:p);l.length&&g(b(l));e(n,p)}};this.split=function(d){var g=d.startContainer,b=d.startOffset,a=d.endContainer,d=d.endOffset;if(g==a&&3==g.nodeType)0<b&&b<g.nodeValue.length&&(a=g.splitText(b),g=a.previousSibling,d>b?(g=a=a.splitText(d-b).previousSibling,d=a.nodeValue.length,b=0):d=0);else if(3==g.nodeType&&0<b&&b<g.nodeValue.length&&(g=g.splitText(b),b=0),3==a.nodeType&&0<d&&d<
a.nodeValue.length)a=a.splitText(d).previousSibling,d=a.nodeValue.length;return{startContainer:g,startOffset:b,endContainer:a,endOffset:d}}};d.dom.RangeUtils.compareRanges=function(d,i){if(d&&i)if(d.item||d.duplicate){if(d.item&&i.item&&d.item(0)===i.item(0)||d.isEqual&&i.isEqual&&i.isEqual(d))return!0}else return d.startContainer==i.startContainer&&d.startOffset==i.startOffset;return!1}})(tinymce);
(function(d){var h=d.dom.Event,i=d.each;d.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(g,b){var a=this,f=g.root,e=g.items,c=g.enableUpDown,k=g.enableLeftRight||!g.enableUpDown,n=g.excludeFromTabOrder,m,p,j,o,q,b=b||d.DOM;m=function(a){q=a.target.id};p=function(a){b.setAttrib(a.target.id,"tabindex","-1")};o=function(){var a=b.get(q);b.setAttrib(a,"tabindex","0");a.focus()};a.focus=function(){b.get(q).focus()};a.destroy=function(){i(e,function(a){b.unbind(b.get(a.id),"focus",
m);b.unbind(b.get(a.id),"blur",p)});b.unbind(b.get(f),"focus",o);b.unbind(b.get(f),"keydown",j);e=b=f=a.focus=m=p=j=o=null;a.destroy=function(){}};a.moveFocus=function(a,c){var d=-1,j;if(q){i(e,function(a,c){if(a.id===q)return d=c,!1});d+=a;0>d?d=e.length-1:d>=e.length&&(d=0);j=e[d];b.setAttrib(q,"tabindex","-1");b.setAttrib(j.id,"tabindex","0");b.get(j.id).focus();if(g.actOnFocus)g.onAction(j.id);c&&h.cancel(c)}};j=function(b){switch(b.keyCode){case 37:k&&a.moveFocus(-1);break;case 39:k&&a.moveFocus(1);
break;case 38:c&&a.moveFocus(-1);break;case 40:c&&a.moveFocus(1);break;case 27:g.onCancel&&(g.onCancel(),h.cancel(b));break;case 14:case 13:case 32:g.onAction&&(g.onAction(q),h.cancel(b))}};i(e,function(a,c){var e;a.id||(a.id=b.uniqueId("_mce_item_"));n?(b.bind(a.id,"blur",p),e="-1"):e=0===c?"0":"-1";b.setAttrib(a.id,"tabindex",e);b.bind(b.get(a.id),"focus",m)});e[0]&&(q=e[0].id);b.setAttrib(f,"tabindex","-1");b.bind(b.get(f),"focus",o);b.bind(b.get(f),"keydown",j)}})})(tinymce);
(function(d){var h=d.DOM,i=d.is;d.create("tinymce.ui.Control",{Control:function(g,b,a){this.id=g;this.settings=b=b||{};this.rendered=!1;this.onRender=new d.util.Dispatcher(this);this.classPrefix="";this.scope=b.scope||this;this.active=this.disabled=0;this.editor=a},setAriaProperty:function(d,b){var a=h.get(this.id+"_aria")||h.get(this.id);a&&h.setAttrib(a,"aria-"+d,!!b)},focus:function(){h.get(this.id).focus()},setDisabled:function(d){d!=this.disabled&&(this.setAriaProperty("disabled",d),this.setState("Disabled",
d),this.setState("Enabled",!d),this.disabled=d)},isDisabled:function(){return this.disabled},setActive:function(d){d!=this.active&&(this.setState("Active",d),this.active=d,this.setAriaProperty("pressed",d))},isActive:function(){return this.active},setState:function(d,b){var a=h.get(this.id),d=this.classPrefix+d;b?h.addClass(a,d):h.removeClass(a,d)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(d){h.setHTML(d,this.renderHTML())},postRender:function(){var d;i(this.disabled)&&
(d=this.disabled,this.disabled=-1,this.setDisabled(d));i(this.active)&&(d=this.active,this.active=-1,this.setActive(d))},remove:function(){h.remove(this.id);this.destroy()},destroy:function(){d.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(d,h,i){this.parent(d,h,i);this.controls=[];this.lookup={}},add:function(d){this.lookup[d.id]=d;this.controls.push(d);return d},get:function(d){return this.lookup[d]}});
tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(d,h){this.parent(d,h);this.classPrefix="mceSeparator";this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});
(function(d){var h=d.is;d.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(d,g){this.parent(d,g);this.classPrefix="mceMenuItem"},setSelected:function(d){this.setState("Selected",d);this.setAriaProperty("checked",!!d);this.selected=d},isSelected:function(){return this.selected},postRender:function(){this.parent();h(this.selected)&&this.setSelected(this.selected)}})})(tinymce);
(function(d){var h=d.DOM,i=d.walk;d.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(g,b){this.parent(g,b);this.items={};this.collapsed=!1;this.menuCount=0;this.onAddItem=new d.util.Dispatcher(this)},expand:function(d){d&&i(this,function(b){b.expand&&b.expand()},"items",this);this.collapsed=!1},collapse:function(d){d&&i(this,function(b){b.collapse&&b.collapse()},"items",this);this.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(g){g.settings||(g=new d.ui.MenuItem(g.id||
h.uniqueId(),g));this.onAddItem.dispatch(this,g);return this.items[g.id]=g},addSeparator:function(){return this.add({separator:!0})},addMenu:function(d){d.collapse||(d=this.createMenu(d));this.menuCount++;return this.add(d)},hasMenus:function(){return 0!==this.menuCount},remove:function(d){delete this.items[d.id]},removeAll:function(){i(this,function(d){d.removeAll?d.removeAll():d.remove();d.destroy()},"items",this);this.items={}},createMenu:function(g){g=new d.ui.Menu(g.id||h.uniqueId(),g);g.onAddItem.add(this.onAddItem.dispatch,
this.onAddItem);return g}})})(tinymce);
(function(d){var h=d.is,i=d.DOM,g=d.each,b=d.dom.Event,a=d.dom.Element;d.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(a,b){b=b||{};b.container=b.container||i.doc.body;b.offset_x=b.offset_x||0;b.offset_y=b.offset_y||0;b.vp_offset_x=b.vp_offset_x||0;b.vp_offset_y=b.vp_offset_y||0;h(b.icons)&&!b.icons&&(b["class"]+=" mceNoIcons");this.parent(a,b);this.onShowMenu=new d.util.Dispatcher(this);this.onHideMenu=new d.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(a){var b=
this.settings;a.container=a.container||b.container;a.parent=this;a.constrain=a.constrain||b.constrain;a["class"]=a["class"]||b["class"];a.vp_offset_x=a.vp_offset_x||b.vp_offset_x;a.vp_offset_y=a.vp_offset_y||b.vp_offset_y;a.keyboard_focus=b.keyboard_focus;a=new d.ui.DropMenu(a.id||i.uniqueId(),a);a.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return a},focus:function(){this.keyboardNav&&this.keyboardNav.focus()},update:function(){var a=this.settings,b=i.get("menu_"+this.id+"_tbl"),c=i.get("menu_"+
this.id+"_co"),d,g;d=a.max_width?Math.min(b.clientWidth,a.max_width):b.clientWidth;g=a.max_height?Math.min(b.clientHeight,a.max_height):b.clientHeight;i.boxModel?this.element.setStyles({width:d,height:g}):this.element.setStyles({width:d+2,height:g+2});a.max_width&&i.setStyle(c,"width",d);a.max_height&&(i.setStyle(c,"height",g),b.clientHeight<a.max_height&&i.setStyle(c,"overflow","hidden"))},showMenu:function(f,e,c){var h=this,n=h.settings,m,p=i.getViewPort(),j,o,q,l,r=h.classPrefix;h.collapse(1);
h.isMenuVisible||(h.rendered?m=i.get("menu_"+h.id):(m=i.add(h.settings.container,h.renderNode()),g(h.items,function(a){a.postRender()}),h.element=new a("menu_"+h.id,{blocker:1,container:n.container})),d.isOpera||i.setStyles(m,{left:-65535,top:-65535}),i.show(m),h.update(),f+=n.offset_x||0,e+=n.offset_y||0,p.w-=4,p.h-=4,n.constrain&&(j=m.clientWidth-2,o=m.clientHeight-2,q=p.x+p.w,p=p.y+p.h,f+n.vp_offset_x+j>q&&(f=c?c-j:Math.max(0,q-n.vp_offset_x-j)),e+n.vp_offset_y+o>p&&(e=Math.max(0,p-n.vp_offset_y-
o))),i.setStyles(m,{left:f,top:e}),h.element.update(),h.isMenuVisible=1,h.mouseClickFunc=b.add(m,"click",function(a){var c;if((a=a.target)&&(a=i.getParent(a,"tr"))&&!i.hasClass(a,r+"ItemSub")){c=h.items[a.id];if(!c.isDisabled()){for(l=h;l;){l.hideMenu&&l.hideMenu();l=l.settings.parent}if(c.settings.onclick)c.settings.onclick(a);return false}}}),h.hasMenus()&&(h.mouseOverFunc=b.add(m,"mouseover",function(a){var c;if((a=a.target)&&(a=i.getParent(a,"tr"))){c=h.items[a.id];h.lastMenu&&h.lastMenu.collapse(1);
if(!c.isDisabled()&&a&&i.hasClass(a,r+"ItemSub")){a=i.getRect(a);c.showMenu(a.x+a.w-2,a.y-2,a.x);h.lastMenu=c;i.addClass(i.get(c.id).firstChild,r+"ItemActive")}}})),b.add(m,"keydown",h._keyHandler,h),h.onShowMenu.dispatch(h),n.keyboard_focus&&h._setupKeyboardNav())},hideMenu:function(a){var d=i.get("menu_"+this.id),c;this.isMenuVisible&&(this.keyboardNav&&this.keyboardNav.destroy(),b.remove(d,"mouseover",this.mouseOverFunc),b.remove(d,"click",this.mouseClickFunc),b.remove(d,"keydown",this._keyHandler),
i.hide(d),this.isMenuVisible=0,a||this.collapse(1),this.element&&this.element.hide(),(c=i.get(this.id))&&i.removeClass(c.firstChild,this.classPrefix+"ItemActive"),this.onHideMenu.dispatch(this))},add:function(a){var b,a=this.parent(a);this.isRendered&&(b=i.get("menu_"+this.id))&&this._add(i.select("tbody",b)[0],a);return a},collapse:function(a){this.parent(a);this.hideMenu(1)},remove:function(a){i.remove(a.id);this.destroy();return this.parent(a)},destroy:function(){var a=i.get("menu_"+this.id);this.keyboardNav&&
this.keyboardNav.destroy();b.remove(a,"mouseover",this.mouseOverFunc);b.remove(i.select("a",a),"focus",this.mouseOverFunc);b.remove(a,"click",this.mouseClickFunc);b.remove(a,"keydown",this._keyHandler);this.element&&this.element.remove();i.remove(a)},renderNode:function(){var b=this,d=b.settings,c,h,n;n=i.create("div",{role:"listbox",id:"menu_"+b.id,"class":d["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});b.settings.parent&&i.setAttrib(n,"aria-parent","menu_"+b.settings.parent.id);
h=i.add(n,"div",{role:"presentation",id:"menu_"+b.id+"_co","class":b.classPrefix+(d["class"]?" "+d["class"]:"")});b.element=new a("menu_"+b.id,{blocker:1,container:d.container});d.menu_line&&i.add(h,"span",{"class":b.classPrefix+"Line"});d=i.add(h,"table",{role:"presentation",id:"menu_"+b.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});c=i.add(d,"tbody");g(b.items,function(a){b._add(c,a)});b.rendered=!0;return n},_setupKeyboardNav:function(){var a,b,c=this;a=i.get("menu_"+c.id);b=i.select("a[role=option]",
"menu_"+c.id);b.splice(0,0,a);c.keyboardNav=new d.ui.KeyboardNavigation({root:"menu_"+c.id,items:b,onCancel:function(){c.hideMenu()},enableUpDown:!0});a.focus()},_keyHandler:function(a){switch(a.keyCode){case 37:this.settings.parent&&(this.hideMenu(),this.settings.parent.focus(),b.cancel(a));break;case 39:this.mouseOverFunc&&this.mouseOverFunc(a)}},_add:function(a,b){var c,d=b.settings,g,h,p,j=this.classPrefix;d.separator?(h=i.add(a,"tr",{id:b.id,"class":j+"ItemSeparator"}),i.add(h,"td",{"class":j+
"ItemSeparator"}),(c=h.previousSibling)&&i.addClass(c,"mceLast")):(c=h=i.add(a,"tr",{id:b.id,"class":j+"Item "+j+"ItemEnabled"}),c=p=i.add(c,d.titleItem?"th":"td"),c=g=i.add(c,"a",{id:b.id+"_aria",role:d.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),d.parent&&(i.setAttrib(g,"aria-haspopup","true"),i.setAttrib(g,"aria-owns","menu_"+b.id)),i.addClass(p,d["class"]),g=i.add(c,"span",{"class":"mceIcon"+(d.icon?" mce_"+d.icon:"")}),d.icon_src&&
i.add(g,"img",{src:d.icon_src}),c=i.add(c,d.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&("function"==typeof b.settings.style&&(b.settings.style=b.settings.style()),i.setAttrib(c,"style",b.settings.style)),1==a.childNodes.length&&i.addClass(h,"mceFirst"),(c=h.previousSibling)&&i.hasClass(c,j+"ItemSeparator")&&i.addClass(h,"mceFirst"),b.collapse&&i.addClass(h,j+"ItemSub"),(c=h.previousSibling)&&i.removeClass(c,"mceLast"),i.addClass(h,"mceLast"))}})})(tinymce);
(function(d){var h=d.DOM;d.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(d,g,b){this.parent(d,g,b);this.classPrefix="mceButton"},renderHTML:function(){var d=this.classPrefix,g=this.settings,b,a;a=h.encode(g.label||"");b='<a role="button" id="'+this.id+'" href="javascript:;" class="'+d+" "+d+"Enabled "+g["class"]+(a?" "+d+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+h.encode(g.title)+'">';b=g.image&&(!this.editor||
!this.editor.forcedHighContrastMode)?b+('<img class="mceIcon" src="'+g.image+'" alt="'+h.encode(g.title)+'" />'+a):b+('<span class="mceIcon '+g["class"]+'"></span>'+(a?'<span class="'+d+'Label">'+a+"</span>":""));b+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+g.title+"</span>";return b+"</a>"},postRender:function(){var i=this,g=i.settings,b;d.isIE&&i.editor&&d.dom.Event.add(i.id,"mousedown",function(){b="IMG"===i.editor.selection.getNode().nodeName?i.editor.selection.getBookmark():
null});d.dom.Event.add(i.id,"click",function(a){if(!i.isDisabled())return d.isIE&&i.editor&&null!==b&&i.editor.selection.moveToBookmark(b),g.onclick.call(g.scope,a)});d.dom.Event.add(i.id,"keyup",function(a){if(!i.isDisabled()&&a.keyCode==d.VK.SPACEBAR)return g.onclick.call(g.scope,a)})}})})(tinymce);
(function(d){var h=d.DOM,i=d.dom.Event,g=d.each,b=d.util.Dispatcher;d.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(a,f,e){this.parent(a,f,e);this.items=[];this.onChange=new b(this);this.onPostRender=new b(this);this.onAdd=new b(this);this.onRenderMenu=new d.util.Dispatcher(this);this.classPrefix="mceListBox";this.marked={}},select:function(a){var b=this,d,c;b.marked={};if(void 0==a)return b.selectByIndex(-1);c=a&&"function"==typeof a?a:function(c){return c==a};a!=b.selectedValue&&
(g(b.items,function(a,g){if(c(a.value))return d=1,b.selectByIndex(g),!1}),d||b.selectByIndex(-1))},selectByIndex:function(a){var b,d,c;this.marked={};a!=this.selectedIndex&&(b=h.get(this.id+"_text"),c=h.get(this.id+"_voiceDesc"),(d=this.items[a])?(this.selectedValue=d.value,this.selectedIndex=a,h.setHTML(b,h.encode(d.title)),h.setHTML(c,this.settings.title+" - "+d.title),h.removeClass(b,"mceTitle"),h.setAttrib(this.id,"aria-valuenow",d.title)):(h.setHTML(b,h.encode(this.settings.title)),h.setHTML(c,
h.encode(this.settings.title)),h.addClass(b,"mceTitle"),this.selectedValue=this.selectedIndex=null,h.setAttrib(this.id,"aria-valuenow",this.settings.title)))},mark:function(a){this.marked[a]=!0},add:function(a,b,e){e=e||{};e=d.extend(e,{title:a,value:b});this.items.push(e);this.onAdd.dispatch(this,e)},getLength:function(){return this.items.length},renderHTML:function(){var a="",a=this.settings,b=this.classPrefix,a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+this.id+'_voiceDesc" aria-describedby="'+
this.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+this.id+'" cellpadding="0" cellspacing="0" class="'+b+" "+b+"Enabled"+(a["class"]?" "+a["class"]:"")+'"><tbody><tr>',a=a+("<td>"+h.createHTML("span",{id:this.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},this.settings.title)),a=a+(h.createHTML("a",{id:this.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},h.encode(this.settings.title))+"</td>"),a=a+("<td>"+
h.createHTML("a",{id:this.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25bc</span></span>')+"</td>");return a+"</tr></tbody></table></span>"},showMenu:function(){var a=this,b,e=h.get(this.id),c;if(!(a.isDisabled()||0==a.items.length)){if(a.menu&&a.menu.isMenuVisible)return a.hideMenu();a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);b=h.getPos(e);
c=a.menu;c.settings.offset_x=b.x;c.settings.offset_y=b.y;c.settings.keyboard_focus=!d.isOpera;g(a.items,function(a){c.items[a.id]&&c.items[a.id].setSelected(0)});g(a.items,function(b){c.items[b.id]&&a.marked[b.value]&&c.items[b.id].setSelected(1);b.value===a.selectedValue&&c.items[b.id].setSelected(1)});c.showMenu(0,e.clientHeight);i.add(h.doc,"mousedown",a.hideMenu,a);h.addClass(a.id,a.classPrefix+"Selected")}},hideMenu:function(a){if(this.menu&&this.menu.isMenuVisible&&(h.removeClass(this.id,this.classPrefix+
"Selected"),!a||!("mousedown"==a.type&&(a.target.id==this.id+"_text"||a.target.id==this.id+"_open"))))if(!a||!h.getParent(a.target,".mceMenu"))h.removeClass(this.id,this.classPrefix+"Selected"),i.remove(h.doc,"mousedown",this.hideMenu,this),this.menu.hideMenu()},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});b.onHideMenu.add(function(){a.hideMenu();a.focus()});b.add({title:a.settings.title,
"class":"mceMenuItemTitle",onclick:function(){!1!==a.settings.onselect("")&&a.select("")}});g(a.items,function(d){void 0===d.value?b.add({title:d.title,role:"option","class":"mceMenuItemTitle",onclick:function(){!1!==a.settings.onselect("")&&a.select("")}}):(d.id=h.uniqueId(),d.role="option",d.onclick=function(){!1!==a.settings.onselect(d.value)&&a.select(d.value)},b.add(d))});a.onRenderMenu.dispatch(a,b);a.menu=b},postRender:function(){var a=this,b=a.classPrefix;i.add(a.id,"click",a.showMenu,a);
i.add(a.id,"keydown",function(b){32==b.keyCode&&(a.showMenu(b),i.cancel(b))});i.add(a.id,"focus",function(){a._focused||(a.keyDownHandler=i.add(a.id,"keydown",function(b){40==b.keyCode&&(a.showMenu(),i.cancel(b))}),a.keyPressHandler=i.add(a.id,"keypress",function(b){var c;13==b.keyCode&&(c=a.selectedValue,a.selectedValue=null,i.cancel(b),a.settings.onselect(c))}));a._focused=1});i.add(a.id,"blur",function(){i.remove(a.id,"keydown",a.keyDownHandler);i.remove(a.id,"keypress",a.keyPressHandler);a._focused=
0});if(d.isIE6||!h.boxModel)i.add(a.id,"mouseover",function(){h.hasClass(a.id,b+"Disabled")||h.addClass(a.id,b+"Hover")}),i.add(a.id,"mouseout",function(){h.hasClass(a.id,b+"Disabled")||h.removeClass(a.id,b+"Hover")});a.onPostRender.dispatch(a,h.get(a.id))},destroy:function(){this.parent();i.clear(this.id+"_text");i.clear(this.id+"_open")}})})(tinymce);
(function(d){var h=d.DOM,i=d.dom.Event,g=d.each;d.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(b,a){this.parent(b,a);this.classPrefix="mceNativeListBox"},setDisabled:function(b){h.get(this.id).disabled=b;this.setAriaProperty("disabled",b)},isDisabled:function(){return h.get(this.id).disabled},select:function(b){var a=this,d,e;if(void 0==b)return a.selectByIndex(-1);e=b&&"function"==typeof b?b:function(a){return a==b};b!=a.selectedValue&&(g(a.items,function(b,g){if(e(b.value))return d=
1,a.selectByIndex(g),!1}),d||a.selectByIndex(-1))},selectByIndex:function(b){h.get(this.id).selectedIndex=b+1;this.selectedValue=this.items[b]?this.items[b].value:null},add:function(b,a,d){d=d||{};d.value=a;this.isRendered()&&h.add(h.get(this.id),"option",d,b);b={title:b,value:a,attribs:d};this.items.push(b);this.onAdd.dispatch(this,b)},getLength:function(){return this.items.length},renderHTML:function(){var b;b=h.createHTML("option",{value:""},"-- "+this.settings.title+" --");g(this.items,function(a){b+=
h.createHTML("option",{value:a.value},a.title)});b=h.createHTML("select",{id:this.id,"class":"mceNativeListBox","aria-labelledby":this.id+"_aria"},b);return b+=h.createHTML("span",{id:this.id+"_aria",style:"display: none"},this.settings.title)},postRender:function(){function b(b){if((b=a.items[b.target.selectedIndex-1])&&(b=b.value))if(a.onChange.dispatch(a,b),a.settings.onselect)a.settings.onselect(b)}var a=this,f=!0;a.rendered=!0;i.add(a.id,"change",b);i.add(a.id,"keydown",function(e){var c;i.remove(a.id,
"change",void 0);f=!1;c=i.add(a.id,"blur",function(){f||(f=!0,i.add(a.id,"change",b),i.remove(a.id,"blur",c))});if(d.isWebKit&&(37==e.keyCode||39==e.keyCode))return i.prevent(e);if(13==e.keyCode||32==e.keyCode)return b(e),i.cancel(e)});a.onPostRender.dispatch(a,h.get(a.id))}})})(tinymce);
(function(d){var h=d.DOM,i=d.dom.Event;d.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(g,b,a){this.parent(g,b,a);this.onRenderMenu=new d.util.Dispatcher(this);b.menu_container=b.menu_container||h.doc.body},showMenu:function(){var d,b=h.get(this.id),a;if(!this.isDisabled()){this.isMenuRendered||(this.renderMenu(),this.isMenuRendered=!0);if(this.isMenuVisible)return this.hideMenu();h.getPos(this.settings.menu_container);d=h.getPos(b);a=this.menu;a.settings.offset_x=d.x;a.settings.offset_y=
d.y;a.settings.vp_offset_x=d.x;a.settings.vp_offset_y=d.y;a.settings.keyboard_focus=this._focused;a.showMenu(0,b.clientHeight);i.add(h.doc,"mousedown",this.hideMenu,this);this.setState("Selected",1);this.isMenuVisible=1}},renderMenu:function(){var d=this,b;b=d.settings.control_manager.createDropMenu(d.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:d.settings.icons});b.onHideMenu.add(function(){d.hideMenu();d.focus()});d.onRenderMenu.dispatch(d,b);d.menu=b},hideMenu:function(d){var b=
this;if(!d||!("mousedown"==d.type&&h.getParent(d.target,function(a){return a.id===b.id||a.id===b.id+"_open"}))){if(!d||!h.getParent(d.target,".mceMenu"))b.setState("Selected",0),i.remove(h.doc,"mousedown",b.hideMenu,b),b.menu&&b.menu.hideMenu();b.isMenuVisible=0}},postRender:function(){var d=this,b=d.settings;i.add(d.id,"click",function(){if(!d.isDisabled()){if(b.onclick)b.onclick(d.value);d.showMenu()}})}})})(tinymce);
(function(d){var h=d.DOM,i=d.dom.Event;d.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(d,b,a){this.parent(d,b,a);this.classPrefix="mceSplitButton"},renderHTML:function(){var d,b=this.settings,a;d="<tbody><tr>";a=b.image?h.createHTML("img ",{src:b.image,role:"presentation","class":"mceAction "+b["class"]}):h.createHTML("span",{"class":"mceAction "+b["class"]},"");a+=h.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:this.id+"_voice",style:"display:none;"},b.title);
d+="<td >"+h.createHTML("a",{role:"button",id:this.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+b["class"],onclick:"return false;",onmousedown:"return false;",title:b.title},a)+"</td>";a=h.createHTML("span",{"class":"mceOpen "+b["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25bc</span>');d+="<td >"+h.createHTML("a",{role:"button",id:this.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+b["class"],onclick:"return false;",onmousedown:"return false;",
title:b.title},a)+"</td>";d=h.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+b["class"],cellpadding:"0",cellspacing:"0",title:b.title},d+"</tr></tbody>");return h.createHTML("div",{id:this.id,role:"button",tabindex:"0","aria-labelledby":this.id+"_voice","aria-haspopup":"true"},d)},postRender:function(){var g=this,b=g.settings,a;b.onclick&&(a=function(a){g.isDisabled()||(b.onclick(g.value),i.cancel(a))},i.add(g.id+"_action","click",a),i.add(g.id,["click","keydown"],
function(b){if((32===b.keyCode||13===b.keyCode||14===b.keyCode)&&!b.altKey&&!b.ctrlKey&&!b.metaKey)a(),i.cancel(b);else if("click"===b.type||40===b.keyCode)g.showMenu(),i.cancel(b)}));i.add(g.id+"_open","click",function(a){g.showMenu();i.cancel(a)});i.add([g.id,g.id+"_open"],"focus",function(){g._focused=1});i.add([g.id,g.id+"_open"],"blur",function(){g._focused=0});if(d.isIE6||!h.boxModel)i.add(g.id,"mouseover",function(){h.hasClass(g.id,"mceSplitButtonDisabled")||h.addClass(g.id,"mceSplitButtonHover")}),
i.add(g.id,"mouseout",function(){h.hasClass(g.id,"mceSplitButtonDisabled")||h.removeClass(g.id,"mceSplitButtonHover")})},destroy:function(){this.parent();i.clear(this.id+"_action");i.clear(this.id+"_open");i.clear(this.id)}})})(tinymce);
(function(d){var h=d.DOM,i=d.dom.Event,g=d.is,b=d.each;d.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(a,b,e){this.parent(a,b,e);this.settings=b=d.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},
this.settings);this.onShowMenu=new d.util.Dispatcher(this);this.onHideMenu=new d.util.Dispatcher(this);this.value=b.default_color},showMenu:function(){var a=this,b,d;if(!a.isDisabled()){a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();b=h.get(a.id);h.show(a.id+"_menu");h.addClass(b,"mceSplitButtonSelected");d=h.getPos(b);h.setStyles(a.id+"_menu",{left:d.x,top:d.y+b.clientHeight,zIndex:2E5});b=0;i.add(h.doc,"mousedown",a.hideMenu,a);a.onShowMenu.dispatch(a);
a._focused&&(a._keyHandler=i.add(a.id+"_menu","keydown",function(b){b.keyCode==27&&a.hideMenu()}),h.select("a",a.id+"_menu")[0].focus());a.isMenuVisible=1}},hideMenu:function(a){var b=this;if(b.isMenuVisible&&(!a||!("mousedown"==a.type&&h.getParent(a.target,function(a){return a.id===b.id+"_open"})))){if(!a||!h.getParent(a.target,".mceSplitButtonMenu"))h.removeClass(b.id,"mceSplitButtonSelected"),i.remove(h.doc,"mousedown",b.hideMenu,b),i.remove(b.id+"_menu","keydown",b._keyHandler),h.hide(b.id+"_menu");
b.isMenuVisible=0;b.onHideMenu.dispatch()}},renderMenu:function(){var a=this,f,e=0,c=a.settings,k,n,m,p,j;p=h.add(c.menu_container,"div",{role:"listbox",id:a.id+"_menu","class":c.menu_class+" "+c["class"],style:"position:absolute;left:0;top:-1000px;"});f=h.add(p,"div",{"class":c["class"]+" mceSplitButtonMenu"});h.add(f,"span",{"class":"mceMenuLine"});k=h.add(f,"table",{role:"presentation","class":"mceColorSplitMenu"});n=h.add(k,"tbody");e=0;b(g(c.colors,"array")?c.colors:c.colors.split(","),function(b){b=
b.replace(/^#/,"");e--||(m=h.add(n,"tr"),e=c.grid_width-1);k=h.add(m,"td");var f={href:"javascript:;",style:{backgroundColor:"#"+b},title:a.editor.getLang("colors."+b,b),"data-mce-color":"#"+b};d.isIE||(f.role="option");k=h.add(k,"a",f);a.editor.forcedHighContrastMode&&(k=h.add(k,"canvas",{width:16,height:16,"aria-hidden":"true"}),k.getContext&&(j=k.getContext("2d"))?(j.fillStyle="#"+b,j.fillRect(0,0,16,16)):h.remove(k))});c.more_colors_func&&(k=h.add(n,"tr"),k=h.add(k,"td",{colspan:c.grid_width,
"class":"mceMoreColors"}),k=h.add(k,"a",{role:"option",id:a.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},c.more_colors_title),i.add(k,"click",function(a){c.more_colors_func.call(c.more_colors_scope||this);return i.cancel(a)}));h.addClass(f,"mceColorSplitMenu");new d.ui.KeyboardNavigation({root:a.id+"_menu",items:h.select("a",a.id+"_menu"),onCancel:function(){a.hideMenu();a.focus()}});i.add(a.id+"_menu","mousedown",function(a){return i.cancel(a)});i.add(a.id+"_menu",
"click",function(b){var c;(b=h.getParent(b.target,"a",n))&&b.nodeName.toLowerCase()=="a"&&(c=b.getAttribute("data-mce-color"))&&a.setColor(c);return false});return p},setColor:function(a){this.displayColor(a);this.hideMenu();this.settings.onselect(a)},displayColor:function(a){h.setStyle(this.id+"_preview","backgroundColor",a);this.value=a},postRender:function(){var a=this.id;this.parent();h.add(a+"_action","div",{id:a+"_preview","class":"mceColorPreview"});h.setStyle(this.id+"_preview","backgroundColor",
this.value)},destroy:function(){this.parent();i.clear(this.id+"_menu");i.clear(this.id+"_more");h.remove(this.id+"_menu")}})})(tinymce);
(function(d){var h=d.DOM,i=d.each,g=d.dom.Event;d.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var b=[],a=this.controls,f=d.each,e=this.settings;b.push('<div id="'+this.id+'" role="group" aria-labelledby="'+this.id+'_voice">');b.push("<span role='application'>");b.push('<span id="'+this.id+'_voice" class="mceVoiceLabel" style="display:none;">'+h.encode(e.name)+"</span>");f(a,function(a){b.push(a.renderHTML())});b.push("</span>");b.push("</div>");return b.join("")},
focus:function(){h.get(this.id).focus()},postRender:function(){var b=this,a=[];i(b.controls,function(b){i(b.controls,function(b){b.id&&a.push(b)})});b.keyNav=new d.ui.KeyboardNavigation({root:b.id,items:a,onCancel:function(){d.isWebKit&&h.get(b.editor.id+"_ifr").focus();b.editor.focus()},excludeFromTabOrder:!b.settings.tab_focus_toolbar})},destroy:function(){this.parent();this.keyNav.destroy();g.clear(this.id)}})})(tinymce);
(function(d){var h=d.DOM;d.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var d="",g,b,a=this.settings,f,e,c,k;k=this.controls;for(f=0;f<k.length;f++){b=k[f];e=k[f-1];c=k[f+1];0===f&&(g="mceToolbarStart",b.Button?g+=" mceToolbarStartButton":b.SplitButton?g+=" mceToolbarStartSplitButton":b.ListBox&&(g+=" mceToolbarStartListBox"),d+=h.createHTML("td",{"class":g},h.createHTML("span",null,"<\!-- IE --\>")));if(e&&b.ListBox&&(e.Button||e.SplitButton))d+=h.createHTML("td",{"class":"mceToolbarEnd"},
h.createHTML("span",null,"<\!-- IE --\>"));d=h.stdMode?d+('<td style="position: relative">'+b.renderHTML()+"</td>"):d+("<td>"+b.renderHTML()+"</td>");if(c&&b.ListBox&&(c.Button||c.SplitButton))d+=h.createHTML("td",{"class":"mceToolbarStart"},h.createHTML("span",null,"<\!-- IE --\>"))}g="mceToolbarEnd";b.Button?g+=" mceToolbarEndButton":b.SplitButton?g+=" mceToolbarEndSplitButton":b.ListBox&&(g+=" mceToolbarEndListBox");d+=h.createHTML("td",{"class":g},h.createHTML("span",null,"<\!-- IE --\>"));return h.createHTML("table",
{id:this.id,"class":"mceToolbar"+(a["class"]?" "+a["class"]:""),cellpadding:"0",cellspacing:"0",align:this.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+d+"</tr></tbody>")}})})(tinymce);
(function(d){var h=d.util.Dispatcher;d.create("tinymce.AddOnManager",{AddOnManager:function(){this.items=[];this.urls={};this.lookup={};this.onAdd=new h(this)},get:function(d){if(this.lookup[d])return this.lookup[d].instance},dependencies:function(d){var g;this.lookup[d]&&(g=this.lookup[d].dependencies);return g||[]},requireLangPack:function(h){var g=d.settings;g&&g.language&&!1!==g.language_load&&d.ScriptLoader.add(this.urls[h]+"/langs/"+g.language+".js")},add:function(d,g,b){this.items.push(g);
this.lookup[d]={instance:g,dependencies:b};this.onAdd.dispatch(this,d,g);return g},createUrl:function(d,g){return"object"===typeof g?g:{prefix:d.prefix,resource:g,suffix:d.suffix}},addComponents:function(h,g){var b=this.urls[h];d.each(g,function(a){d.ScriptLoader.add(b+"/"+a)})},load:function(h,g,b,a){function f(){var c=e.dependencies(h);d.each(c,function(a){a=e.createUrl(g,a);e.load(a.resource,a,void 0,void 0)});b&&(a?b.call(a):b.call(d.ScriptLoader))}var e=this,c=g;e.urls[h]||("object"===typeof g&&
(c=g.prefix+g.resource+g.suffix),0!=c.indexOf("/")&&-1==c.indexOf("://")&&(c=d.baseURL+"/"+c),e.urls[h]=c.substring(0,c.lastIndexOf("/")),e.lookup[h]?f():d.ScriptLoader.add(c,f,a))}});d.PluginManager=new d.AddOnManager;d.ThemeManager=new d.AddOnManager})(tinymce);
(function(d){var h=d.each,i=d.extend,g=d.DOM,b=d.dom.Event,a=d.explode,f=d.util.Dispatcher,e=0;d.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");/[\/\\]$/.test(d.documentBaseURL)||(d.documentBaseURL+="/");d.baseURL=(new d.util.URI(d.documentBaseURL)).toAbsolute(d.baseURL);d.baseURI=new d.util.URI(d.baseURL);d.onBeforeUnload=new f(d);b.add(window,"beforeunload",function(a){d.onBeforeUnload.dispatch(d,a)});d.onAddEditor=new f(d);d.onRemoveEditor=new f(d);d.EditorManager=
i(d,{editors:[],i18n:{},activeEditor:null,init:function(c){function f(a){var b=a.id;if(!b){b=(b=a.name)&&!g.get(b)?a.name:g.uniqueId();a.setAttribute("id",b)}return b}function n(a,b,c){var e=a[b];if(e){if(d.is(e,"string")){c=(c=e.replace(/\.\w+$/,""))?d.resolve(c):0;e=d.resolve(e)}return e.apply(c||this,Array.prototype.slice.call(arguments,2))}}var m=[],p;this.settings=c=i({theme:"simple",language:"en"},c);b.bind(window,"ready",function(){var b,i;n(c,"onpageload");switch(c.mode){case "exact":b=c.elements||
"";b.length>0&&h(a(b),function(a){if(g.get(a)){p=new d.Editor(a,c);m.push(p);p.render(1)}else h(document.forms,function(b){h(b.elements,function(b){if(b.name===a){a="mce_editor_"+e++;g.setAttrib(b,"id",a);p=new d.Editor(a,c);m.push(p);p.render(1)}})})});break;case "textareas":case "specific_textareas":h(g.select("textarea"),function(a){if(!c.editor_deselector||!(c.editor_deselector.constructor===RegExp?c.editor_deselector.test(a.className):g.hasClass(a,c.editor_deselector)))if(!c.editor_selector||
(c.editor_selector.constructor===RegExp?c.editor_selector.test(a.className):g.hasClass(a,c.editor_selector))){p=new d.Editor(f(a),c);m.push(p);p.render(1)}});break;default:c.types?h(c.types,function(a){h(g.select(a.selector),function(b){b=new d.Editor(f(b),d.extend({},c,a));m.push(b);b.render(1)})}):c.selector&&h(g.select(c.selector),function(a){a=new d.Editor(f(a),c);m.push(a);a.render(1)})}if(c.oninit){b=i=0;h(m,function(a){i++;a.initialized?b++:a.onInit.add(function(){b++;b==i&&n(c,"oninit")});
b==i&&n(c,"oninit")})}})},get:function(a){return a===void 0?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){var b=this.editors;b[a.id]=a;b.push(a);this._setActive(a);this.onAddEditor.dispatch(this,a);return a},remove:function(a){var b,d=this.editors;if(!d[a.id])return null;delete d[a.id];for(b=0;b<d.length;b++)if(d[b]==a){d.splice(b,1);break}this.activeEditor==a&&this._setActive(d[0]);a.destroy();this.onRemoveEditor.dispatch(this,a);return a},execCommand:function(a,
b,e){var f=this.get(e),g;switch(a){case "mceFocus":f.focus();return true;case "mceAddEditor":case "mceAddControl":this.get(e)||(new d.Editor(e,this.settings)).render();return true;case "mceAddFrameControl":g=e.window;g.tinyMCE=tinyMCE;g.tinymce=d;d.DOM.doc=g.document;d.DOM.win=g;f=new d.Editor(e.element_id,e);f.render();if(d.isIE){var j=function(){f.destroy();g.detachEvent("onunload",j);g=g.tinyMCE=g.tinymce=null};g.attachEvent("onunload",j)}e.page_window=null;return true;case "mceRemoveEditor":case "mceRemoveControl":f&&
f.remove();return true;case "mceToggleEditor":if(!f){this.execCommand("mceAddControl",0,e);return true}f.isHidden()?f.show():f.hide();return true}return this.activeEditor?this.activeEditor.execCommand(a,b,e):false},execInstanceCommand:function(a,b,d,e){return(a=this.get(a))?a.execCommand(b,d,e):false},triggerSave:function(){h(this.editors,function(a){a.save()})},addI18n:function(a,b){var e=this.i18n;d.is(a,"string")?h(b,function(b,d){e[a+"."+d]=b}):h(a,function(a,b){h(a,function(a,c){h(a,function(a,
d){c==="common"?e[b+"."+d]=a:e[b+"."+c+"."+d]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})})(tinymce);
(function(d){var h=d.DOM,i=d.dom.Event,g=d.extend,b=d.util.Dispatcher,a=d.each,f=d.isGecko,e=d.isIE,c=d.is,k=d.ThemeManager,n=d.PluginManager,m=d.explode,p=d.VK;d.create("tinymce.Editor",{Editor:function(c,e){var f=this;f.id=f.editorId=c;f.execCommands={};f.queryStateCommands={};f.queryValueCommands={};f.isNotDirty=!1;f.plugins={};a("onPreInit,onBeforeRenderUI,onPostRender,onLoad,onInit,onRemove,onActivate,onDeactivate,onClick,onEvent,onMouseUp,onMouseDown,onDblClick,onKeyDown,onKeyUp,onKeyPress,onContextMenu,onSubmit,onReset,onPaste,onPreProcess,onPostProcess,onBeforeSetContent,onBeforeGetContent,onSetContent,onGetContent,onLoadContent,onSaveContent,onNodeChange,onChange,onBeforeExecCommand,onExecCommand,onUndo,onRedo,onVisualAid,onSetProgressState,onSetAttrib".split(","),function(a){f[a]=
new b(f)});f.settings=e=g({id:c,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:d.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:d.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':
"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside",
indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside",validate:!0,entity_encoding:"named",url_converter:f.convertURL,url_converter_scope:f,ie7_compat:!0},e);f.documentBaseURI=new d.util.URI(e.document_base_url||d.documentBaseURL,{base_uri:tinyMCE.baseURI});f.baseURI=d.baseURI;f.contentCSS=[];f.execCallback("setup",f)},render:function(){function b(){e.language&&!1!==e.language_load&&g.add(d.baseURL+"/langs/"+e.language+
".js");e.theme&&"-"!=e.theme.charAt(0)&&!k.urls[e.theme]&&k.load(e.theme,"themes/"+e.theme+"/editor_template"+d.suffix+".js");a(m(e.plugins),function(b){b&&!n.urls[b]&&("-"==b.charAt(0)?(b=b.substr(1,b.length),b=n.dependencies(b),a(b,function(a){a=n.createUrl({prefix:"plugins/",resource:a,suffix:"/editor_plugin"+d.suffix+".js"},a);n.load(a.resource,a)})):"safari"!=b&&n.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+d.suffix+".js"}))});g.loadQueue(function(){c.removed||c.init()})}var c=
this,e=c.settings,f=c.id,g=d.ScriptLoader;if(i.domLoaded){if(tinyMCE.settings=e,c.getElement()&&(!d.isIDevice||d.isIOS5))!/TEXTAREA|INPUT/i.test(c.getElement().nodeName)&&e.hidden_input&&h.getParent(f,"form")&&h.insertAfter(h.create("input",{type:"hidden",name:f}),f),d.WindowManager&&(c.windowManager=new d.WindowManager(c)),"xml"==e.encoding&&c.onGetContent.add(function(a,b){if(b.save)b.content=h.encode(b.content)}),e.add_form_submit_trigger&&c.onSubmit.addToTop(function(){if(c.initialized){c.save();
c.isNotDirty=1}}),e.add_unload_trigger&&(c._beforeUnload=tinyMCE.onBeforeUnload.add(function(){c.initialized&&!c.destroyed&&!c.isHidden()&&c.save({format:"raw",no_events:true})})),d.addUnload(c.destroy,c),e.submit_patch&&c.onBeforeRenderUI.add(function(){var a=c.getElement().form;if(a&&!a._mceOldSubmit){if(!a.submit.nodeType&&!a.submit.length){c.formElement=a;a._mceOldSubmit=a.submit;a.submit=function(){d.triggerSave();c.isNotDirty=1;return c.formElement._mceOldSubmit(c.formElement)}}a=null}}),b()}else i.add(window,
"ready",function(){c.render()})},init:function(){function b(e){var f=n.get(e),g=n.urls[e]||d.documentBaseURL.replace(/\/$/,"");f&&-1===d.inArray(u,e)&&(a(n.dependencies(e),function(a){b(a)}),f=new f(c,g),c.plugins[e]=f,f.init&&(f.init(c,g),u.push(e)))}var c=this,g=c.settings,i,r,t=c.getElement(),p,v,x,u=[];d.add(c);g.aria_label=g.aria_label||h.getAttrib(t,"aria-label",c.getLang("aria.rich_text_area"));g.theme&&(g.theme=g.theme.replace(/-/,""),p=k.get(g.theme),c.theme=new p,c.theme.init&&g.init_theme&&
c.theme.init(c,k.urls[g.theme]||d.documentBaseURL.replace(/\/$/,"")));a(m(g.plugins.replace(/\-/g,"")),b);!1!==g.popup_css&&(g.popup_css=g.popup_css?c.documentBaseURI.toAbsolute(g.popup_css):c.baseURI.toAbsolute("themes/"+g.theme+"/skins/"+g.skin+"/dialog.css"));g.popup_css_add&&(g.popup_css+=","+c.documentBaseURI.toAbsolute(g.popup_css_add));c.controlManager=new d.ControlManager(c);g.custom_undo_redo&&(c.onBeforeExecCommand.add(function(a,b,d,e,j){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!j||!j.skip_undo)&&
c.undoManager.beforeChange()}),c.onExecCommand.add(function(a,b,d,e,j){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!j||!j.skip_undo)&&c.undoManager.add()}));c.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||c.nodeChanged()});f&&(x=function(a,b){(!b||!b.initial)&&c.execCommand("mceRepaint")},c.onUndo.add(x),c.onRedo.add(x),c.onSetContent.add(x));c.onBeforeRenderUI.dispatch(c,c.controlManager);g.render_ui&&(i=g.width||t.style.width||t.offsetWidth,r=g.height||t.style.height||t.offsetHeight,
c.orgDisplay=t.style.display,x=/^[0-9\.]+(|px)$/i,x.test(""+i)&&(i=Math.max(parseInt(i)+(p.deltaWidth||0),100)),x.test(""+r)&&(r=Math.max(parseInt(r)+(p.deltaHeight||0),100)),p=c.theme.renderUI({targetNode:t,width:i,height:r,deltaWidth:g.delta_width,deltaHeight:g.delta_height}),c.editorContainer=p.editorContainer);document.domain&&location.hostname!=document.domain&&(d.relaxedDomain=document.domain);h.setStyles(p.sizeContainer||p.editorContainer,{width:i,height:r});g.content_css&&d.each(m(g.content_css),
function(a){c.contentCSS.push(c.documentBaseURI.toAbsolute(a))});r=(p.iframeHeight||r)+("number"==typeof r?p.deltaHeight||0:"");100>r&&(r=100);c.iframeHTML=g.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';g.document_base_url!=d.documentBaseURL&&(c.iframeHTML+='<base href="'+c.documentBaseURI.getURI()+'" />');c.iframeHTML=g.ie7_compat?c.iframeHTML+'<meta http-equiv="X-UA-Compatible" content="IE=7" />':c.iframeHTML+'<meta http-equiv="X-UA-Compatible" content="IE=edge" />';c.iframeHTML+=
'<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(i=0;i<c.contentCSS.length;i++)c.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+c.contentCSS[i]+'" />';c.contentCSS=[];i=g.body_id||"tinymce";-1!=i.indexOf("=")&&(i=c.getParam("body_id","","hash"),i=i[c.id]||i);t=g.body_class||"";-1!=t.indexOf("=")&&(t=c.getParam("body_class","","hash"),t=t[c.id]||"");c.iframeHTML+='</head><body id="'+i+'" class="mceContentBody '+t+'" onload="window.parent.tinyMCE.get(\''+c.id+
"').onLoad.dispatch();\"><br></body></html>";if(d.relaxedDomain&&(e||d.isOpera&&11>parseFloat(opera.version())))v='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+c.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()';h.add(p.iframeContainer,"iframe",{id:c.id+"_ifr",src:v||'javascript:""',frameBorder:"0",allowTransparency:"true",title:g.aria_label,style:{width:"100%",height:r,display:"block"}});c.contentAreaContainer=
p.iframeContainer;h.get(p.editorContainer).style.display=c.orgDisplay;h.get(c.id).style.display="none";h.setAttrib(c.id,"aria-hidden",!0);(!d.relaxedDomain||!v)&&c.setupIframe();t=p=null},setupIframe:function(){var b=this,c=b.settings;h.get(b.id);var g=b.getDoc();if(!e||!d.relaxedDomain)g.open(),g.write(b.iframeHTML),g.close(),d.relaxedDomain&&(g.domain=d.relaxedDomain);g=b.getBody();g.disabled=!0;c.readonly||(g.contentEditable=!0);g.disabled=!1;b.schema=new d.html.Schema(c);b.dom=new d.dom.DOMUtils(b.getDoc(),
{keep_values:!0,url_converter:b.convertURL,url_converter_scope:b,hex_colors:c.force_hex_style_colors,class_filter:c.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:b.schema});b.parser=new d.html.DomParser(c,b.schema);b.settings.allow_html_in_named_anchor||b.parser.addAttributeFilter("name",function(a){for(var b=a.length,c,d,e,f;b--;){f=a[b];if(f.name==="a"&&f.firstChild){e=f.parent;c=f.lastChild;do{d=c.prev;e.insert(c,f);c=d}while(c)}}});b.parser.addAttributeFilter("src,href,style",function(a,
c){for(var d=a.length,e,f=b.dom,g,h;d--;){e=a[d];g=e.attr(c);h="data-mce-"+c;e.attributes.map[h]||(c==="style"?e.attr(h,f.serializeStyle(f.parseStyle(g),e.name)):e.attr(h,b.convertURL(g,c,e.name)))}});b.parser.addNodeFilter("script",function(a){for(var b=a.length,c;b--;){c=a[b];c.attr("type","mce-"+(c.attr("type")||"text/javascript"))}});b.parser.addNodeFilter("#cdata",function(a){for(var b=a.length,c;b--;){c=a[b];c.type=8;c.name="#comment";c.value="[CDATA["+c.value+"]]"}});b.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",
function(a){for(var c=a.length,e,f=b.schema.getNonEmptyElements();c--;){e=a[c];if(e.isEmpty(f))e.empty().append(new d.html.Node("br",1)).shortEnded=true}});b.serializer=new d.dom.Serializer(c,b.dom,b.schema);b.selection=new d.dom.Selection(b.dom,b.getWin(),b.serializer);b.formatter=new d.Formatter(this);b.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",
styles:{textAlign:"center"}},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},
{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",
styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return true},onformat:function(c,d,e){a(e,function(a,d){b.dom.setAttrib(c,d,a)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,
deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]});a("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){b.formatter.register(a,{block:a,remove:"all"})});b.formatter.register(b.settings.formats);b.undoManager=new d.UndoManager(b);b.undoManager.onAdd.add(function(a,c){if(a.hasUndo())return b.onChange.dispatch(b,c,a)});b.undoManager.onUndo.add(function(a,
c){return b.onUndo.dispatch(b,c,a)});b.undoManager.onRedo.add(function(a,c){return b.onRedo.dispatch(b,c,a)});b.forceBlocks=new d.ForceBlocks(b,{forced_root_block:c.forced_root_block});b.editorCommands=new d.EditorCommands(b);b.serializer.onPreProcess.add(function(a,c){return b.onPreProcess.dispatch(b,c,a)});b.serializer.onPostProcess.add(function(a,c){return b.onPostProcess.dispatch(b,c,a)});b.onPreInit.dispatch(b);c.gecko_spellcheck||(b.getBody().spellcheck=0);c.readonly||b._addEvents();b.controlManager.onPostRender.dispatch(b,
b.controlManager);b.onPostRender.dispatch(b);b.quirks=new d.util.Quirks(this);c.directionality&&(b.getBody().dir=c.directionality);c.nowrap&&(b.getBody().style.whiteSpace="nowrap");c.handle_node_change_callback&&b.onNodeChange.add(function(a,c,d){b.execCallback("handle_node_change_callback",b.id,d,-1,-1,true,b.selection.isCollapsed())});c.save_callback&&b.onSaveContent.add(function(a,c){var d=b.execCallback("save_callback",b.id,c.content,b.getBody());if(d)c.content=d});c.onchange_callback&&b.onChange.add(function(a,
c){b.execCallback("onchange_callback",b,c)});c.protect&&b.onBeforeSetContent.add(function(b,d){c.protect&&a(c.protect,function(a){d.content=d.content.replace(a,function(a){return"<\!--mce:protected "+escape(a)+"--\>"})})});c.convert_newlines_to_brs&&b.onBeforeSetContent.add(function(a,b){if(b.initial)b.content=b.content.replace(/\r?\n/g,"<br />")});c.preformatted&&b.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,"");b.content=b.content.replace(/<\/pre>\s*$/,"");if(b.set)b.content=
'<pre class="mceItemHidden">'+b.content+"</pre>"});c.verify_css_classes&&(b.serializer.attribValueFilter=function(c,d){var e,f;if(c=="class"){if(!b.classesRE){f=b.dom.getClasses();if(f.length>0){e="";a(f,function(a){e=e+((e?"|":"")+a["class"])});b.classesRE=RegExp("("+e+")","gi")}}return!b.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(d)||b.classesRE.test(d)?d:""}return d});c.cleanup_callback&&(b.onBeforeSetContent.add(function(a,c){c.content=b.execCallback("cleanup_callback","insert_to_editor",
c.content,c)}),b.onPreProcess.add(function(a,c){c.set&&b.execCallback("cleanup_callback","insert_to_editor_dom",c.node,c);c.get&&b.execCallback("cleanup_callback","get_from_editor_dom",c.node,c)}),b.onPostProcess.add(function(a,c){if(c.set)c.content=b.execCallback("cleanup_callback","insert_to_editor",c.content,c);if(c.get)c.content=b.execCallback("cleanup_callback","get_from_editor",c.content,c)}));c.save_callback&&b.onGetContent.add(function(a,c){if(c.save)c.content=b.execCallback("save_callback",
b.id,c.content,b.getBody())});c.handle_event_callback&&b.onEvent.add(function(a,c,d){b.execCallback("handle_event_callback",c,a,d)===false&&i.cancel(c)});b.onSetContent.add(function(){b.addVisual(b.getBody())});c.padd_empty_editor&&b.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(f){var l=function(b){a(b.dom.select("a"),function(a){var c=a.parentNode;b.dom.isBlock(c)&&c.lastChild===a&&b.dom.add(c,"br",{"data-mce-bogus":1})})};
b.onExecCommand.add(function(a,b){b==="CreateLink"&&l(a)});b.onSetContent.add(b.selection.onSetContent.add(l))}b.load({initial:!0,format:"html"});b.startContent=b.getContent({format:"raw"});b.undoManager.add();b.initialized=!0;b.onInit.dispatch(b);b.execCallback("setupcontent_callback",b.id,b.getBody(),b.getDoc());b.execCallback("init_instance_callback",b);b.focus(!0);b.nodeChanged({initial:1});a(b.contentCSS,function(a){b.dom.loadCSS(a)});c.auto_focus&&setTimeout(function(){var a=d.get(c.auto_focus);
a.selection.select(a.getBody(),1);a.selection.collapse(1);a.getBody().focus();a.getWin().focus()},100)},focus:function(a){var b,c=this.selection,e=this.settings.content_editable,f,g=this.getDoc();a||(a=c.getRng(),a.item&&(f=a.item(0)),this._refreshContentEditable(),e||this.getWin().focus(),d.isGecko&&this.getBody().focus(),f&&f.ownerDocument==g&&(a=g.body.createControlRange(),a.addElement(f),a.select()));d.activeEditor!=this&&(null!=(b=d.activeEditor)&&b.onDeactivate.dispatch(b,this),this.onActivate.dispatch(this,
b));d._setActive(this)},execCallback:function(a){var b=this.settings[a],e;if(b){if(this.callbackLookup&&(e=this.callbackLookup[a]))b=e.func,e=e.scope;c(b,"string")&&(e=(e=b.replace(/\.\w+$/,""))?d.resolve(e):0,b=d.resolve(b),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[a]={func:b,scope:e});return b.apply(e||this,Array.prototype.slice.call(arguments,1))}},translate:function(a){var b=this.settings.language||"en",c=d.i18n;return!a?"":c[b+"."+a]||a.replace(/{\#([^}]+)\}/g,function(a,
d){return c[b+"."+d]||"{#"+d+"}"})},getLang:function(a,b){return d.i18n[(this.settings.language||"en")+"."+a]||(c(b)?b:"{#"+a+"}")},getParam:function(b,e,f){var g=d.trim,b=c(this.settings[b])?this.settings[b]:e,h;return"hash"===f?(h={},c(b,"string")?a(0<b.indexOf("=")?b.split(/[;,](?![^=;,]*(?:[;,]|$))/):b.split(","),function(a){a=a.split("=");1<a.length?h[g(a[0])]=g(a[1]):h[g(a[0])]=g(a)}):h=b,h):b},nodeChanged:function(a){var b=this.selection,c=b.getStart()||this.getBody();this.initialized&&(a=
a||{},c=e&&c.ownerDocument!=this.getDoc()?this.getBody():c,a.parents=[],this.dom.getParent(c,function(b){if("BODY"==b.nodeName)return!0;a.parents.push(b)}),this.onNodeChange.dispatch(this,a?a.controlManager||this.controlManager:this.controlManager,c,b.isCollapsed(),a))},addButton:function(a,b){this.buttons=this.buttons||{};this.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},
addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(b,d,e,f){var g=this,h;if(!g.settings.custom_shortcuts)return!1;g.shortcuts=g.shortcuts||{};c(e,"string")&&(h=e,e=function(){g.execCommand(h,!1,null)});c(e,"object")&&(h=e,e=function(){g.execCommand(h[0],h[1],h[2])});a(m(b),function(b){var c={func:e,scope:f||this,desc:d,alt:false,ctrl:false,shift:false};a(m(b,"+"),function(a){switch(a){case "alt":case "ctrl":case "shift":c[a]=true;break;default:c.charCode=
a.charCodeAt(0);c.keyCode=a.toUpperCase().charCodeAt(0)}});g.shortcuts[(c.ctrl?"ctrl":"")+","+(c.alt?"alt":"")+","+(c.shift?"shift":"")+","+c.keyCode]=c});return!0},execCommand:function(b,c,d,e){var f=this,h=0,i;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(b)&&(!e||!e.skip_focus)&&f.focus();e=g({},e);f.onBeforeExecCommand.dispatch(f,b,c,d,e);if(e.terminate)return!1;if(f.execCallback("execcommand_callback",f.id,f.selection.getNode(),b,c,d))return f.onExecCommand.dispatch(f,
b,c,d,e),!0;if(i=f.execCommands[b])if(i=i.func.call(i.scope,c,d),!0!==i)return f.onExecCommand.dispatch(f,b,c,d,e),i;a(f.plugins,function(a){if(a.execCommand&&a.execCommand(b,c,d))return f.onExecCommand.dispatch(f,b,c,d,e),h=1,!1});if(h)return!0;if(f.theme&&f.theme.execCommand&&f.theme.execCommand(b,c,d)||f.editorCommands.execCommand(b,c,d))return f.onExecCommand.dispatch(f,b,c,d,e),!0;f.getDoc().execCommand(b,c,d);f.onExecCommand.dispatch(f,b,c,d,e)},queryCommandState:function(a){var b;if(!this._isHidden()){if(b=
this.queryStateCommands[a])if(b=b.func.call(b.scope),!0!==b)return b;b=this.editorCommands.queryCommandState(a);if(-1!==b)return b;try{return this.getDoc().queryCommandState(a)}catch(c){}}},queryCommandValue:function(a){var b;if(!this._isHidden()){if(b=this.queryValueCommands[a])if(b=b.func.call(b.scope),!0!==b)return b;b=this.editorCommands.queryCommandValue(a);if(c(b))return b;try{return this.getDoc().queryCommandValue(a)}catch(d){}}},show:function(){h.show(this.getContainer());h.hide(this.id);
this.load()},hide:function(){var a=this.getDoc();e&&a&&a.execCommand("SelectAll");this.save();h.hide(this.getContainer());h.setStyle(this.id,"display",this.orgDisplay)},isHidden:function(){return!h.isHidden(this.id)},setProgressState:function(a,b,c){this.onSetProgressState.dispatch(this,a,b,c);return a},load:function(a){var b=this.getElement(),d;if(b)return a=a||{},a.load=!0,d=this.setContent(c(b.value)?b.value:b.innerHTML,a),a.element=b,a.no_events||this.onLoadContent.dispatch(this,a),a.element=
null,d},save:function(b){var c=this,d=c.getElement(),e,f;if(d&&c.initialized)return b=b||{},b.save=!0,b.no_events||(c.undoManager.typing=!1,c.undoManager.add()),b.element=d,e=b.content=c.getContent(b),b.no_events||c.onSaveContent.dispatch(c,b),e=b.content,/TEXTAREA|INPUT/i.test(d.nodeName)?d.value=e:(d.innerHTML=e,(f=h.getParent(c.id,"form"))&&a(f.elements,function(a){if(a.name==c.id){a.value=e;return false}})),b.element=d=null,e},setContent:function(a,b){var c=this.getBody(),e,b=b||{};b.format=b.format||
"html";b.set=!0;b.content=a;b.no_events||this.onBeforeSetContent.dispatch(this,b);a=b.content;if(!d.isIE&&(0===a.length||/^\s+$/.test(a)))e=this.settings.forced_root_block,c.innerHTML=e?"<"+e+'><br data-mce-bogus="1"></'+e+">":'<br data-mce-bogus="1">',this.selection.select(c,!0),this.selection.collapse(!0);else return"raw"!==b.format&&(a=(new d.html.Serializer({},this.schema)).serialize(this.parser.parse(a))),b.content=d.trim(a),this.dom.setHTML(c,b.content),b.no_events||this.onSetContent.dispatch(this,
b),this.selection.normalize(),b.content},getContent:function(a){var b,a=a||{};a.format=a.format||"html";a.get=!0;a.no_events||this.onBeforeGetContent.dispatch(this,a);b="raw"==a.format?this.getBody().innerHTML:this.serializer.serialize(this.getBody(),a);a.content=d.trim(b);a.no_events||this.onGetContent.dispatch(this,a);return a.content},isDirty:function(){return d.trim(this.startContent)!=d.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},getContainer:function(){this.container||
(this.container=h.get(this.editorContainer||this.id+"_parent"));return this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return h.get(this.settings.content_element||this.id)},getWin:function(){var a;if(!this.contentWindow&&(a=h.get(this.id+"_ifr")))this.contentWindow=a.contentWindow;return this.contentWindow},getDoc:function(){var a;if(!this.contentDocument&&(a=this.getWin()))this.contentDocument=a.document;return this.contentDocument},getBody:function(){return this.bodyElement||
this.getDoc().body},convertURL:function(a,b,c){var d=this.settings;return d.urlconverter_callback?this.execCallback("urlconverter_callback",a,c,!0,b):!d.convert_urls||c&&"LINK"==c.nodeName||0===a.indexOf("file:")?a:d.relative_urls?this.documentBaseURI.toRelative(a):a=this.documentBaseURI.toAbsolute(a,d.remove_script_host)},addVisual:function(b){var d=this,e=d.settings,b=b||d.getBody();c(d.hasVisual)||(d.hasVisual=e.visual);a(d.dom.select("table,a",b),function(a){var b;switch(a.nodeName){case "TABLE":b=
d.dom.getAttrib(a,"border");if(!b||b=="0")d.hasVisual?d.dom.addClass(a,e.visual_table_class):d.dom.removeClass(a,e.visual_table_class);break;case "A":(b=d.dom.getAttrib(a,"name"))&&(d.hasVisual?d.dom.addClass(a,"mceItemAnchor"):d.dom.removeClass(a,"mceItemAnchor"))}});d.onVisualAid.dispatch(d,b,d.hasVisual)},remove:function(){var a=this.getContainer();this.removed||(this.removed=1,this.hide(),this.settings.content_editable||(i.clear(this.getWin()),i.clear(this.getDoc())),i.clear(this.getBody()),i.clear(this.formElement),
i.unbind(a),this.execCallback("remove_instance_callback",this),this.onRemove.dispatch(this),this.onExecCommand.listeners=[],d.remove(this),h.remove(a))},destroy:function(a){this.destroyed||(f&&(i.unbind(this.getDoc()),i.unbind(this.getWin()),i.unbind(this.getBody())),a||(d.removeUnload(this.destroy),tinyMCE.onBeforeUnload.remove(this._beforeUnload),this.theme&&this.theme.destroy&&this.theme.destroy(),this.controlManager.destroy(),this.selection.destroy(),this.dom.destroy()),this.formElement&&(this.formElement.submit=
this.formElement._mceOldSubmit,this.formElement._mceOldSubmit=null),this.contentAreaContainer=this.formElement=this.container=this.settings.content_element=this.bodyElement=this.contentDocument=this.contentWindow=null,this.selection&&(this.selection=this.selection.win=this.selection.dom=this.selection.dom.doc=null),this.destroyed=1)},_addEvents:function(){function b(a,d){c.removed||!1!==c.onEvent.dispatch(c,a,d)&&c[n[a.fakeType||a.type]].dispatch(c,a,d)}var c=this,e,g=c.settings,k=c.dom,n={mouseup:"onMouseUp",
mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};a(n,function(a,d){switch(d){case "contextmenu":k.bind(c.getDoc(),d,b);break;case "paste":k.bind(c.getBody(),d,function(a){b(a)});break;case "submit":case "reset":k.bind(c.getElement().form||h.getParent(c.id,"form"),d,b);break;default:k.bind(g.content_editable?c.getBody():c.getDoc(),d,b)}});k.bind(g.content_editable?
c.getBody():f?c.getDoc():c.getWin(),"focus",function(){c.focus(!0)});d.isGecko&&k.bind(c.getDoc(),"DOMNodeInserted",function(a){var b,a=a.target;if(1===a.nodeType&&"IMG"===a.nodeName&&(b=a.getAttribute("data-mce-src")))a.src=c.documentBaseURI.toAbsolute(b)});f&&(e=function(){var a=this.getDoc(),b=this.settings;if(f&&!b.readonly){this._refreshContentEditable();try{a.execCommand("styleWithCSS",0,!1)}catch(c){if(!this._isHidden())try{a.execCommand("useCSS",0,!0)}catch(d){}}if(!b.table_inline_editing)try{a.execCommand("enableInlineTableEditing",
!1,!1)}catch(e){}if(!b.object_resizing)try{a.execCommand("enableObjectResizing",!1,!1)}catch(g){}}},c.onBeforeExecCommand.add(e),c.onMouseDown.add(e));c.onMouseUp.add(c.nodeChanged);c.onKeyUp.add(function(a,b){var e=b.keyCode;(e>=33&&e<=36||e>=37&&e<=40||e==13||e==45||e==46||e==8||d.isMac&&(e==91||e==93)||b.ctrlKey)&&c.nodeChanged()});c.onKeyDown.add(function(a,b){if(b.keyCode==p.BACKSPACE){var c=a.selection.getRng();if(c.collapsed){for(var d=c.startContainer,e=c.startOffset;d&&d.nodeType&&d.nodeType!=
1&&d.parentNode;)d=d.parentNode;if(d&&d.parentNode&&d.parentNode.tagName==="BLOCKQUOTE"&&d.parentNode.firstChild==d&&e==0){a.formatter.toggle("blockquote",null,d.parentNode);c.setStart(d,0);c.setEnd(d,0);a.selection.setRng(c);a.selection.collapse(false)}}}});c.onReset.add(function(){c.setContent(c.startContent,{format:"raw"})});if(g.custom_shortcuts){g.custom_undo_redo_keyboard_shortcuts&&(c.addShortcut("ctrl+z",c.getLang("undo_desc"),"Undo"),c.addShortcut("ctrl+y",c.getLang("redo_desc"),"Redo"));
c.addShortcut("ctrl+b",c.getLang("bold_desc"),"Bold");c.addShortcut("ctrl+i",c.getLang("italic_desc"),"Italic");c.addShortcut("ctrl+u",c.getLang("underline_desc"),"Underline");for(e=1;6>=e;e++)c.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);c.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]);c.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]);c.addShortcut("ctrl+9","",["FormatBlock",!1,"address"]);var m=function(b){var e=null;if(!b.altKey&&!b.ctrlKey&&!b.metaKey)return e;a(c.shortcuts,function(a){if(!(d.isMac&&
a.ctrl!=b.metaKey)&&(d.isMac||a.ctrl==b.ctrlKey)&&a.alt==b.altKey&&a.shift==b.shiftKey)if(b.keyCode==a.keyCode||b.charCode&&b.charCode==a.charCode){e=a;return false}});return e};c.onKeyUp.add(function(a,b){if(m(b))return i.cancel(b)});c.onKeyPress.add(function(a,b){if(m(b))return i.cancel(b)});c.onKeyDown.add(function(a,b){var c=m(b);if(c){c.func.call(c.scope);return i.cancel(b)}})}d.isIE&&k.bind(c.getDoc(),"controlselect",function(a){var b=c.resizeInfo,a=a.target;if(a.nodeName==="IMG"){b&&k.unbind(b.node,
b.ev,b.cb);if(k.hasClass(a,"mceItemNoResize")){ev="resizestart";b=k.bind(a,"resizestart",i.cancel,i)}else{ev="resizeend";b=k.bind(a,ev,function(a){var b,a=a.target;if(b=k.getStyle(a,"width")){k.setAttrib(a,"width",b.replace(/[^0-9%]+/g,""));k.setStyle(a,"width","")}if(b=k.getStyle(a,"height")){k.setAttrib(a,"height",b.replace(/[^0-9%]+/g,""));k.setStyle(a,"height","")}})}b=c.resizeInfo={node:a,ev:ev,cb:b}}});d.isOpera&&c.onClick.add(function(a,b){i.prevent(b)});if(g.custom_undo_redo){var v=function(){c.undoManager.typing=
false;c.undoManager.add()};e=d.isGecko?"blur":"focusout";k.bind(c.getDoc(),e,function(){!c.removed&&c.undoManager.typing&&v()});c.dom.bind(c.dom.getRoot(),"dragend",function(){v()});c.onKeyUp.add(function(a,b){var c=b.keyCode;(c>=33&&c<=36||c>=37&&c<=40||c==13||c==45||b.ctrlKey)&&v()});c.onKeyDown.add(function(a,b){var e=b.keyCode,f;if(e==8)if((f=c.getDoc().selection)&&f.createRange&&f.createRange().item){c.undoManager.beforeChange();a.dom.remove(f.createRange().item(0));v();return i.cancel(b)}if(e>=
33&&e<=36||e>=37&&e<=40||e==13||e==45){d.isIE&&e==13&&c.undoManager.beforeChange();c.undoManager.typing&&v()}else if((e<16||e>20)&&e!=224&&e!=91&&!c.undoManager.typing){c.undoManager.beforeChange();c.undoManager.typing=true;c.undoManager.add()}});c.onMouseDown.add(function(){c.undoManager.typing&&v()})}},_refreshContentEditable:function(){var a,b;this._isHidden()&&(a=this.getBody(),b=a.parentNode,b.removeChild(a),b.appendChild(a),a.focus())},_isHidden:function(){var a;if(!f)return 0;a=this.selection.getSel();
return!a||!a.rangeCount||0==a.rangeCount}})})(tinymce);
(function(d){var h=d.each,i=!0,g=!1;d.EditorCommands=function(b){function a(a,b,c){var d,a=a.toLowerCase();return(d=p.exec[a])?(d(a,b,c),i):g}function f(a){var b,a=a.toLowerCase();return(b=p.state[a])?b(a):-1}function e(a,b){b=b||"exec";h(a,function(a,c){h(c.toLowerCase().split(","),function(c){p[b][c]=a})})}function c(a,c,d){void 0===c&&(c=g);void 0===d&&(d=null);return b.getDoc().execCommand(a,c,d)}function k(a,b){o.toggle(a,b?{value:b}:void 0)}var n=b.dom,m=b.selection,p={state:{},exec:{},value:{}},
j=b.settings,o=b.formatter,q;d.extend(this,{execCommand:a,queryCommandState:f,queryCommandValue:function(a){var b,a=a.toLowerCase();return(b=p.value[a])?b(a):g},addCommands:e});e({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){b.undoManager.add()},"Cut,Copy,Paste":function(a){var e=b.getDoc(),f;try{c(a)}catch(g){f=i}if(f||!e.queryCommandSupported(a))d.isGecko?b.windowManager.confirm(b.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html",
"_blank")}):b.windowManager.alert(b.getLang("clipboard_no_support"))},unlink:function(a){m.isCollapsed()&&m.select(m.getNode());c(a);m.collapse(g)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(b){var c=b.substring(7);h(["left","center","right","full"],function(a){c!=a&&o.remove("align"+a)});k("align"+c);a("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b;c(a);if(a=n.getParent(m.getNode(),"ol,ul"))b=a.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(b.nodeName)&&(q=
m.getBookmark(void 0),n.split(b,a),m.moveToBookmark(q))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){k(a)},"ForeColor,HiliteColor,FontName":function(a,b,c){k(a,c)},FontSize:function(a,b,c){var e;1<=c&&7>=c&&(e=d.explode(j.font_size_style_values),c=(b=d.explode(j.font_size_classes))?b[c-1]||c:e[c-1]||c);k(a,c)},RemoveFormat:function(a){o.remove(a)},mceBlockQuote:function(){k("blockquote")},FormatBlock:function(a,b,c){return k(c||"p")},mceCleanup:function(){var a=m.getBookmark();
b.setContent(b.getContent({cleanup:i}),{cleanup:i});m.moveToBookmark(a)},mceRemoveNode:function(a,c,d){a=d||m.getNode();a!=b.getBody()&&(q=m.getBookmark(void 0),b.dom.remove(a,i),m.moveToBookmark(q))},mceSelectNodeDepth:function(a,c,d){var e=0;n.getParent(m.getNode(),function(a){if(1==a.nodeType&&e++==d)return m.select(a),g},b.getBody())},mceSelectNode:function(a,b,c){m.select(c)},mceInsertContent:function(a,c,e){var f,g,h,i,j;f=b.parser;g=new d.html.Serializer({},b.schema);a={content:e,format:"html"};
m.onBeforeSetContent.dispatch(m,a);e=a.content;-1==e.indexOf("{$caret}")&&(e+="{$caret}");e=e.replace(/\{\$caret\}/,'<span id="mce_marker" data-mce-type="bookmark">\ufeff</span>');m.isCollapsed()||b.getDoc().execCommand("Delete",!1,null);h=m.getNode();a={context:h.nodeName.toLowerCase()};j=f.parse(e,a);c=j.lastChild;if("mce_marker"==c.attr("id")){e=c;for(c=c.prev;c;c=c.walk(!0))if(3==c.type||!n.isBlock(c.name)){c.parent.insert(e,c,"br"===c.name);break}}if(a.invalid){m.setContent('<span id="mce_marker" data-mce-type="bookmark">\ufeff</span>');
h=b.selection.getNode();i=b.getBody();for(9==h.nodeType?h=c=i:c=h;c!==i;)h=c,c=c.parentNode;e=h==i?i.innerHTML:n.getOuterHTML(h);e=g.serialize(f.parse(e.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return g.serialize(j)})));h==i?n.setHTML(i,e):n.setOuterHTML(h,e)}else e=g.serialize(j),c=h.firstChild,f=h.lastChild,!c||c===f&&"BR"===c.nodeName?n.setHTML(h,e):m.setContent(e);e=n.get("mce_marker");c=n.getRect(e);h=n.getViewPort(b.getWin());if(c.y+c.h>h.y+h.h||c.y<h.y||c.x>h.x+
h.w||c.x<h.x)f=d.isIE?b.getDoc().documentElement:b.getBody(),f.scrollLeft=c.x,f.scrollTop=c.y-h.h+25;h=n.createRng();(c=e.previousSibling)&&3==c.nodeType?h.setStart(c,c.nodeValue.length):(h.setStartBefore(e),h.setEndBefore(e));n.remove(e);m.setRng(h);m.onSetContent.dispatch(m,a);b.addVisual()},mceInsertRawHTML:function(a,c,d){m.setContent("tiny_mce_marker");b.setContent(b.getContent().replace(/tiny_mce_marker/g,function(){return d}))},mceSetContent:function(a,c,d){b.setContent(d)},"Indent,Outdent":function(a){var b,
d,e;b=j.indentation;d=/[a-z%]+$/i.exec(b);b=parseInt(b);!f("InsertUnorderedList")&&!f("InsertOrderedList")?h(m.getSelectedBlocks(),function(c){"outdent"==a?(e=Math.max(0,parseInt(c.style.paddingLeft||0)-b),n.setStyle(c,"paddingLeft",e?e+d:"")):n.setStyle(c,"paddingLeft",parseInt(c.style.paddingLeft||0)+b+d)}):c(a)},mceRepaint:function(){if(d.isGecko)try{q=m.getBookmark(i),m.getSel()&&m.getSel().selectAllChildren(b.getBody()),m.collapse(i),m.moveToBookmark(q)}catch(a){}},mceToggleFormat:function(a,
b,c){o.toggle(c)},InsertHorizontalRule:function(){b.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){b.hasVisual=!b.hasVisual;b.addVisual()},mceReplaceContent:function(a,c,d){b.execCommand("mceInsertContent",!1,d.replace(/\{\$selection\}/g,m.getContent({format:"text"})))},mceInsertLink:function(a,b,c){"string"==typeof c&&(c={href:c});a=n.getParent(m.getNode(),"a");c.href=c.href.replace(" ","%20");(!a||!c.href)&&o.remove("link");c.href&&o.apply("link",c,a)},selectAll:function(){var a=
n.getRoot(),c=n.createRng();c.setStart(a,0);c.setEnd(a,a.childNodes.length);b.selection.setRng(c)}});e({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var b="align"+a.substring(7),a=m.isCollapsed()?[m.getNode()]:m.getSelectedBlocks(),a=d.map(a,function(a){return!!o.matchNode(a,b)});return-1!==d.inArray(a,i)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return o.match(a)},mceBlockQuote:function(){return o.match("blockquote")},Outdent:function(){var a;return j.inline_styles&&
((a=n.getParent(m.getStart(),n.isBlock))&&0<parseInt(a.style.paddingLeft)||(a=n.getParent(m.getEnd(),n.isBlock))&&0<parseInt(a.style.paddingLeft))?i:f("InsertUnorderedList")||f("InsertOrderedList")||!j.inline_styles&&!!n.getParent(m.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){return n.getParent(m.getNode(),"insertunorderedlist"==a?"UL":"OL")}},"state");e({"FontSize,FontName":function(a){var b=0,c;if(c=n.getParent(m.getNode(),"span"))b="fontsize"==a?c.style.fontSize:
c.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return b}},"value");j.custom_undo_redo&&e({Undo:function(){b.undoManager.undo()},Redo:function(){b.undoManager.redo()}})}})(tinymce);
(function(d){var h=d.util.Dispatcher;d.UndoManager=function(i){var g,b=0,a=[],f;return g={typing:!1,onAdd:new h(g),onUndo:new h(g),onRedo:new h(g),beforeChange:function(){f=i.selection.getBookmark(2,!0)},add:function(e){var c;c=i.settings;var h,e=e||{};e.content=d.trim(i.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""));if((h=a[b])&&h.content==e.content)return null;a[b]&&(a[b].beforeBookmark=f);if(c.custom_undo_redo_levels&&a.length>c.custom_undo_redo_levels){for(c=
0;c<a.length-1;c++)a[c]=a[c+1];a.length--;b=a.length}e.bookmark=i.selection.getBookmark(2,!0);b<a.length-1&&(a.length=b+1);a.push(e);b=a.length-1;g.onAdd.dispatch(g,e);i.isNotDirty=0;return e},undo:function(){var d;g.typing&&(g.add(),g.typing=!1);0<b&&(d=a[--b],i.setContent(d.content,{format:"raw"}),i.selection.moveToBookmark(d.beforeBookmark),g.onUndo.dispatch(g,d));return d},redo:function(){var d;b<a.length-1&&(d=a[++b],i.setContent(d.content,{format:"raw"}),i.selection.moveToBookmark(d.bookmark),
g.onRedo.dispatch(g,d));return d},clear:function(){a=[];b=0;g.typing=!1},hasUndo:function(){return 0<b||this.typing},hasRedo:function(){return b<a.length-1&&!this.typing}}}})(tinymce);
(function(d){function h(a,b,d){var h;return b.isEmpty(d)&&!g?(h=b.getParent(d,"ul,ol"),b.getParent(h.parentNode,"ul,ol")||(b.split(h,d),h=b.create("p",0,'<br data-mce-bogus="1" />'),b.replace(h,d),a.select(h,1)),e):f}var i=d.dom.Event,g=d.isIE,b=d.isGecko,a=d.isOpera,f=!0,e=!1;d.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var b=a.settings,d;this.editor=a;this.dom=a.dom;d=(b.forced_root_block||"p").toLowerCase();b.element=d.toUpperCase();a.onPreInit.add(this.setup,this)},setup:function(){var a=
this,e=a.editor,h=e.settings,m=e.dom,p=e.selection,j=e.schema.getBlockElements();if(h.forced_root_block){var o=function(){var a=p.getStart(),b=e.getBody(),c,d,f,g,i,o,y;if(a&&1===a.nodeType){for(;a!=b;){if(j[a.nodeName])return;a=a.parentNode}c=p.getRng();if(c.setStart)d=c.startContainer,f=c.startOffset,g=c.endContainer,i=c.endOffset;else if(c.item&&(c=e.getDoc().body.createTextRange(),c.moveToElementText(c.item(0))),tmpRng=c.duplicate(),tmpRng.collapse(!0),f=-1*tmpRng.move("character",-16777215),
!tmpRng.collapsed)tmpRng=c.duplicate(),tmpRng.collapse(!1),i=-1*tmpRng.move("character",-16777215)-f;for(a=b.firstChild;a;a)3===a.nodeType||1==a.nodeType&&!j[a.nodeName]?(o||(o=m.create(h.forced_root_block),a.parentNode.insertBefore(o,a)),y=a,a=a.nextSibling,o.appendChild(y)):(o=null,a=a.nextSibling);if(c.setStart)c.setStart(d,f),c.setEnd(g,i),p.setRng(c);else try{c=e.getDoc().body.createTextRange(),c.moveToElementText(b),c.collapse(!0),c.moveStart("character",f),0<i&&c.moveEnd("character",i),c.select()}catch(C){}e.nodeChanged()}};
e.onKeyUp.add(o);e.onClick.add(o)}h.force_br_newlines&&g&&e.onKeyPress.add(function(a,b){var c;if(13==b.keyCode&&"LI"!=p.getNode().nodeName)return p.setContent('<br id="__" /> ',{format:"raw"}),c=m.get("__"),c.removeAttribute("id"),p.select(c),p.collapse(),i.cancel(b)});h.force_p_newlines&&(e.onKeyPress.add(function(b,d){13==d.keyCode&&!d.shiftKey&&!a.insertPara(d)&&i.cancel(d)}),b&&e.onKeyDown.add(function(b,d){(8==d.keyCode||46==d.keyCode)&&!d.shiftKey&&a.backspaceDelete(d,8==d.keyCode)}));d.isWebKit&&
e.onKeyPress.add(function(a,b){if(b.keyCode==13&&(b.shiftKey||h.force_br_newlines&&!m.getParent(p.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))){var c=p.getRng(),d,e=m.create("div",null," "),g=m.getViewPort(a.getWin()).h;c.insertNode(d=m.create("br"));c.setStartAfter(d);c.setEndAfter(d);p.setRng(c);if(p.getSel().focusNode==d.previousSibling){p.select(m.insertAfter(m.doc.createTextNode("\u00a0"),d));p.collapse(f)}m.insertAfter(e,d);c=m.getPos(e).y;m.remove(e);c>g&&a.getWin().scrollTo(0,c);i.cancel(b)}});g&&
"P"!=h.element&&(e.onKeyPress.add(function(){a.lastElm=p.getNode().nodeName}),e.onKeyUp.add(function(b,d){var e;e=p.getNode();if(b.getBody().childNodes.length===1&&e.nodeName=="P"){e=m.rename(e,h.element);p.select(e);p.collapse();b.nodeChanged()}else if(d.keyCode==13&&!d.shiftKey&&a.lastElm!="P")if(e=m.getParent(e,"p")){m.rename(e,h.element);b.nodeChanged()}}))},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(){function b(a,c){var d=a.cloneRange();d.setStart(a.endContainer,
a.endOffset);d.setEndAfter(c);return j.isEmpty(d.cloneContents())}function i(a,b){var c,e,f;f=j.createRng();if(a.hasChildNodes())for(c=new d.dom.TreeWalker(a,a);e=c.current();){if(3==e.nodeType){f.setStart(e,0);f.setEnd(e,0);break}if(/^(BR|IMG)$/.test(e.nodeName)){f.setStartBefore(e);f.setEndBefore(e);break}c.next()}else f.setStart(a,0),f.setEnd(a,0);o.setRng(f);if(!1!==b&&(e=j.getViewPort(p.getWin()),c=j.getPos(a).y,c<e.y||c+25>e.y+e.h))p.getWin().scrollTo(0,c<e.y?c:c-e.h+25)}function n(a){3==a.nodeType&&
0==a.nodeValue.length&&j.remove(a);if(a.hasChildNodes())for(var b=0;b<a.childNodes.length;b++)n(a.childNodes[b])}function m(a,b){var c=[],d,f,h;for(h=g?"":"<br />";a.firstChild;)a.removeChild(a.firstChild);if(l.keep_styles){f=b;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(f.nodeName)&&(d=f.cloneNode(e),j.setAttrib(d,"id",""),c.push(d));while(f=f.parentNode)}if(0<c.length){f=c.length-1;for(d=a;0<=f;f--)d=d.appendChild(c[f]);c[0].innerHTML=h;return c[0]}a.innerHTML=h;return a}var p=this.editor,j=p.dom,
o=p.selection,q=p.getDoc(),l=p.settings,r=o.getSel(),t=o.getRng(!0),D=q.body,v,x,u,y,C,z,A,s,B,F,G,J,E,L,M;p.undoManager.beforeChange();"undefined"!=typeof r.anchorNode?(v=j.createRng(),v.setStart(r.anchorNode,r.anchorOffset),v.collapse(f),x=j.createRng(),x.setStart(r.focusNode,r.focusOffset),x.collapse(f),y=(u=0>v.compareBoundaryPoints(v.START_TO_END,x))?r.anchorNode:r.focusNode,C=u?r.anchorOffset:r.focusOffset,z=u?r.focusNode:r.anchorNode,r=u?r.focusOffset:r.anchorOffset):(v=t.cloneRange(),v.collapse(f),
x=t.cloneRange(),x.collapse(e),y=t.startContainer,C=t.startOffset,z=t.endContainer,r=t.endOffset);if(y===z&&/^(TD|TH)$/.test(y.nodeName))return y.innerHTML="",j.add(y,l.element,null,g?"":"<br />"),F=j.add(y,l.element,null,g?"":"<br />"),i(F),e;y==D&&z==D&&D.firstChild&&j.isBlock(D.firstChild)&&(y=z=y.firstChild,C=r=0,v=j.createRng(),v.setStart(y,0),x=j.createRng(),x.setStart(z,0));D.hasChildNodes()||D.appendChild(j.create("br"));y="HTML"==y.nodeName?q.body:y;y="BODY"==y.nodeName?y.firstChild:y;z=
"HTML"==z.nodeName?q.body:z;z="BODY"==z.nodeName?z.firstChild:z;u=this.getParentBlock(y);A=this.getParentBlock(z);s=u?u.nodeName:l.element;if(p.settings.end_container_on_empty_block&&(B=j.getParent(u,"hgroup,blockquote,section,article"))&&(j.isEmpty(u)||u.firstChild===u.lastChild&&(!u.firstChild||"BR"==u.firstChild.nodeName))){j.split(B,u);o.select(u,!0);o.collapse(!0);return}if(E=this.dom.getParent(u,"li"))return"LI"==E.nodeName?h(o,this.dom,E):f;if(u&&("CAPTION"==u.nodeName||/absolute|relative|fixed/gi.test(j.getStyle(u,
"position",1))))s=l.element,u=null;if(A&&("CAPTION"==A.nodeName||/absolute|relative|fixed/gi.test(j.getStyle(u,"position",1))))s=l.element,A=null;if(/(TD|TABLE|TH|CAPTION)/.test(s)||u&&"DIV"==s&&/left|right/gi.test(j.getStyle(u,"float",1)))s=l.element,u=A=null;B=u&&u.nodeName==s?j.clone(u,!1):j.create(s);F=A&&A.nodeName==s?j.clone(A,!1):j.create(s);F.removeAttribute("id");/^(H[1-6])$/.test(s)&&b(t,u,j)&&(F=j.create(l.element),this.dom.getParent(u,"hgroup")&&(F=j.create(s)));E=G=y;do{if(E==D||9==E.nodeType||
this.dom.isBlock(E)||/(TD|TABLE|TH|CAPTION)/.test(E.nodeName))break;G=E}while(E=E.previousSibling?E.previousSibling:E.parentNode);E=J=z;do{if(E==D||9==E.nodeType||this.dom.isBlock(E)||/(TD|TABLE|TH|CAPTION)/.test(E.nodeName))break;J=E}while(E=E.nextSibling?E.nextSibling:E.parentNode);G.nodeName==s?v.setStart(G,0):v.setStartBefore(G);v.setEnd(y,C);B.appendChild(v.cloneContents()||q.createTextNode(""));try{x.setEndAfter(J)}catch(N){}x.setStart(z,r);F.appendChild(x.cloneContents()||q.createTextNode(""));
t=j.createRng();!G.previousSibling&&G.parentNode.nodeName==s?t.setStartBefore(G.parentNode):v.startContainer.nodeName==s&&0==v.startOffset?t.setStartBefore(v.startContainer):t.setStart(v.startContainer,v.startOffset);!J.nextSibling&&J.parentNode.nodeName==s?t.setEndAfter(J.parentNode):t.setEnd(x.endContainer,x.endOffset);(!g||u!=A||u&&!j.isEmpty(u))&&t.deleteContents();(E=t.startContainer.childNodes[t.startOffset])&&!E.hasChildNodes()&&j.remove(E);B.firstChild&&B.firstChild.nodeName==s&&(B.innerHTML=
B.firstChild.innerHTML);F.firstChild&&F.firstChild.nodeName==s&&(F.innerHTML=F.firstChild.innerHTML);g&&(n(B),n(F));j.isEmpty(B)&&(L=m(B,y));j.isEmpty(F)&&(M=m(F,z));a&&9.5>parseFloat(opera.version())?(t.insertNode(B),t.insertNode(F)):(t.insertNode(F),t.insertNode(B));o.tridentSel&&L&&i(L,!1);i(M||F);p.undoManager.add();return e},backspaceDelete:function(a,b){var f=this.editor,g=f.getBody(),h,j=f.selection,o=j.getRng(),q=o.startContainer,l;if(!b&&o.collapsed&&1==q.nodeType&&o.startOffset==q.childNodes.length){l=
new d.dom.TreeWalker(q.lastChild,q);for(h=q.lastChild;h;h=l.prev())if(3==h.nodeType){o.setStart(h,h.nodeValue.length);o.collapse(!0);j.setRng(o);return}}if(q&&f.dom.isBlock(q)&&!/^(TD|TH)$/.test(q.nodeName)&&b&&(0==q.childNodes.length||1==q.childNodes.length&&"BR"==q.firstChild.nodeName)){for(h=q;(h=h.previousSibling)&&!f.dom.isBlock(h););if(h){if(q!=g.firstChild){for(g=f.dom.doc.createTreeWalker(h,NodeFilter.SHOW_TEXT,null,e);o=g.nextNode();)h=o;o=f.getDoc().createRange();o.setStart(h,h.nodeValue?
h.nodeValue.length:0);o.setEnd(h,h.nodeValue?h.nodeValue.length:0);j.setRng(o);f.dom.remove(q)}return i.cancel(a)}}}})})(tinymce);
(function(d){var h=d.dom.Event,i=d.each,g=d.extend;d.create("tinymce.ControlManager",{ControlManager:function(b,a){var f=this,a=a||{};f.editor=b;f.controls={};f.onAdd=new d.util.Dispatcher(f);f.onPostRender=new d.util.Dispatcher(f);f.prefix=a.prefix||b.id+"_";f._cls={};f.onPostRender.add(function(){i(f.controls,function(a){a.postRender()})})},get:function(b){return this.controls[this.prefix+b]||this.controls[b]},setActive:function(b,a){var d=null;(d=this.get(b))&&d.setActive(a);return d},setDisabled:function(b,
a){var d=null;(d=this.get(b))&&d.setDisabled(a);return d},add:function(b){b&&(this.controls[b.id]=b,this.onAdd.dispatch(b,this));return b},createControl:function(b){var a,d=this,e=d.editor;i(e.plugins,function(c){if(c.createControl&&(a=c.createControl(b,d)))return!1});switch(b){case "|":case "separator":return d.createSeparator()}return!a&&e.buttons&&(a=e.buttons[b])?d.createButton(b,a):d.add(a)},createDropMenu:function(b,a,f){var e=this.editor,c,h,i,a=g({"class":"mceDropDown",constrain:e.settings.constrain_menus},
a);a["class"]=a["class"]+" "+e.getParam("skin")+"Skin";if(i=e.getParam("skin_variant"))a["class"]+=" "+e.getParam("skin")+"Skin"+i.substring(0,1).toUpperCase()+i.substring(1);b=this.prefix+b;c=this.controls[b]=new (f||this._cls.dropmenu||d.ui.DropMenu)(b,a);c.onAddItem.add(function(a,b){var c=b.settings;c.title=e.getLang(c.title,c.title);c.onclick||(c.onclick=function(){c.cmd&&e.execCommand(c.cmd,c.ui||!1,c.value)})});e.onRemove.add(function(){c.destroy()});d.isIE&&(c.onShowMenu.add(function(){e.focus();
h=e.selection.getBookmark(1)}),c.onHideMenu.add(function(){h&&(e.selection.moveToBookmark(h),h=0)}));return this.add(c)},createListBox:function(b,a,f){var e=this.editor;if(this.get(b))return null;a.title=e.translate(a.title);a.scope=a.scope||e;a.onselect||(a.onselect=function(b){e.execCommand(a.cmd,a.ui||!1,b||a.value)});a=g({title:a.title,"class":"mce_"+b,scope:a.scope,control_manager:this},a);b=this.prefix+b;e.settings.use_native_selects||e.settings.use_accessible_selects&&!d.isGecko?f=new d.ui.NativeListBox(b,
a):(f=f||this._cls.listbox||d.ui.ListBox,f=new f(b,a,e));this.controls[b]=f;d.isWebKit&&f.onPostRender.add(function(a,b){h.add(b,"mousedown",function(){e.bookmark=e.selection.getBookmark(1)});h.add(b,"focus",function(){e.selection.moveToBookmark(e.bookmark);e.bookmark=null})});f.hideMenu&&e.onMouseDown.add(f.hideMenu,f);return this.add(f)},createButton:function(b,a,f){var e=this.editor;if(this.get(b))return null;a.title=e.translate(a.title);a.label=e.translate(a.label);a.scope=a.scope||e;!a.onclick&&
!a.menu_button&&(a.onclick=function(){e.execCommand(a.cmd,a.ui||!1,a.value)});a=g({title:a.title,"class":"mce_"+b,unavailable_prefix:e.getLang("unavailable",""),scope:a.scope,control_manager:this},a);b=this.prefix+b;a.menu_button?(f=f||this._cls.menubutton||d.ui.MenuButton,b=new f(b,a,e),e.onMouseDown.add(b.hideMenu,b)):(f=this._cls.button||d.ui.Button,b=new f(b,a,e));return this.add(b)},createMenuButton:function(b,a,d){a=a||{};a.menu_button=1;return this.createButton(b,a,d)},createSplitButton:function(b,
a,f){var e=this.editor;if(this.get(b))return null;a.title=e.translate(a.title);a.scope=a.scope||e;a.onclick||(a.onclick=function(b){e.execCommand(a.cmd,a.ui||!1,b||a.value)});a.onselect||(a.onselect=function(b){e.execCommand(a.cmd,a.ui||false,b||a.value)});a=g({title:a.title,"class":"mce_"+b,scope:a.scope,control_manager:this},a);b=this.prefix+b;b=this.add(new (f||this._cls.splitbutton||d.ui.SplitButton)(b,a,e));e.onMouseDown.add(b.hideMenu,b);return b},createColorSplitButton:function(b,a,f){var e=
this.editor,c,h;if(this.get(b))return null;a.title=e.translate(a.title);a.scope=a.scope||e;a.onclick||(a.onclick=function(b){d.isIE&&(h=e.selection.getBookmark(1));e.execCommand(a.cmd,a.ui||!1,b||a.value)});a.onselect||(a.onselect=function(b){e.execCommand(a.cmd,a.ui||false,b||a.value)});a=g({title:a.title,"class":"mce_"+b,menu_class:e.getParam("skin")+"Skin",scope:a.scope,more_colors_title:e.getLang("more_colors")},a);b=this.prefix+b;c=new (f||this._cls.colorsplitbutton||d.ui.ColorSplitButton)(b,
a,e);e.onMouseDown.add(c.hideMenu,c);e.onRemove.add(function(){c.destroy()});d.isIE&&(c.onShowMenu.add(function(){e.focus();h=e.selection.getBookmark(1)}),c.onHideMenu.add(function(){if(h){e.selection.moveToBookmark(h);h=0}}));return this.add(c)},createToolbar:function(b,a,f){b=this.prefix+b;a=new (f||this._cls.toolbar||d.ui.Toolbar)(b,a,this.editor);return this.get(b)?null:this.add(a)},createToolbarGroup:function(b,a,f){b=this.prefix+b;a=new (f||this._cls.toolbarGroup||d.ui.ToolbarGroup)(b,a,this.editor);
return this.get(b)?null:this.add(a)},createSeparator:function(b){return new (b||this._cls.separator||d.ui.Separator)},setControlType:function(b,a){return this._cls[b.toLowerCase()]=a},destroy:function(){i(this.controls,function(b){b.destroy()});this.controls=null}})})(tinymce);
(function(d){var h=d.util.Dispatcher,i=d.each,g=d.isIE,b=d.isOpera;d.create("tinymce.WindowManager",{WindowManager:function(a){this.editor=a;this.onOpen=new h(this);this.onClose=new h(this);this.params={};this.features={}},open:function(a,f){var e="",c="modal"==this.editor.settings.dialog_type,h,n,m;m=d.DOM.getViewPort();a=a||{};f=f||{};n=b?m.w:screen.width;m=b?m.h:screen.height;a.name=a.name||"mc_"+(new Date).getTime();a.width=parseInt(a.width||320);a.height=parseInt(a.height||240);a.resizable=!0;
a.left=a.left||parseInt(n/2)-a.width/2;a.top=a.top||parseInt(m/2)-a.height/2;f.inline=!1;f.mce_width=a.width;f.mce_height=a.height;f.mce_auto_focus=a.auto_focus;c&&g&&(a.center=!0,a.help=!1,a.dialogWidth=a.width+"px",a.dialogHeight=a.height+"px",a.scroll=a.scrollbars||!1);i(a,function(a,b){d.is(a,"boolean")&&(a=a?"yes":"no");/^(name|url)$/.test(b)||(e=g&&c?e+((e?";":"")+b+":"+a):e+((e?",":"")+b+"="+a))});this.features=a;this.params=f;this.onOpen.dispatch(this,a,f);n=a.url||a.file;n=d._addVer(n);try{g&&
c?(h=1,window.showModalDialog(n,window,e)):h=window.open(n,a.name,e)}catch(p){}h||alert(this.editor.getLang("popup_blocked"))},close:function(a){a.close();this.onClose.dispatch(this)},createInstance:function(a,b,e,c,g,h){return new (d.resolve(a))(b,e,c,g,h)},confirm:function(a,b,d,c){b.call(d||this,(c||window).confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,d,c){(c||window).alert(this._decode(this.editor.getLang(a,a)));b&&b.call(d||this)},resizeBy:function(a,b,d){d.resizeBy(a,
b)},_decode:function(a){return d.DOM.decode(a).replace(/\\n/g,"\n")}})})(tinymce);
(function(d){d.Formatter=function(h){function i(a){var b=a.getAttribute("data-mce-contenteditable");return b&&"inherit"!==b?b:"inherit"!==a.contentEditable?a.contentEditable:null}function g(a){return 1===a.nodeType&&"_mce_caret"===a.id}function b(a){return a?z[a]:z}function a(b,c){b&&("string"!==typeof b?A(b,function(b,c){a(c,b)}):(c=c.length?c:[c],A(c,function(a){a.deep===P&&(a.deep=!a.selector);a.split===P&&(a.split=!a.selector||a.inline);a.remove===P&&a.selector&&!a.inline&&(a.remove="none");a.selector&&
a.inline&&(a.mixed=!0,a.block_expand=!0);"string"===typeof a.classes&&(a.classes=a.classes.split(/\s+/))}),z[b]=c))}function f(a,e,f){function k(a,b){b=b||I;if(a){if(b.onformat)b.onformat(a,b,e,f);A(b.styles,function(b,c){s.setStyle(a,c,j(b,e))});A(b.attributes,function(b,c){s.setAttrib(a,c,j(b,e))});A(b.classes,function(b){b=j(b,e);s.hasClass(a,b)||s.addClass(a,b)})}}function p(){var a=h.selection.getRng(),b=a.startContainer,c=a.endContainer;if(b!=c&&0==a.endOffset){a:{c=new F(c);for(f=c.current();f;f=
c.prev())if(1<f.childNodes.length||f==b){b=f;break a}b=void 0}a.setEnd(b,3==b.nodeType?b.length:b.childNodes.length)}return a}function q(a,b,c,e,f){var g=[],h=-1,i,j=-1,k=-1,l;A(a.childNodes,function(a,b){if("UL"===a.nodeName||"OL"===a.nodeName)return h=b,i=a,!1});A(a.childNodes,function(a,c){"SPAN"===a.nodeName&&"bookmark"==s.getAttrib(a,"data-mce-type")&&(a.id==b.id+"_start"?j=c:a.id==b.id+"_end"&&(k=c))});if(0>=h||j<h&&k>h)return A(d.grep(a.childNodes),f),0;l=s.clone(c,K);A(d.grep(a.childNodes),
function(a,b){if(j<h&&b<h||j>h&&b>h)g.push(a),a.parentNode.removeChild(a)});j<h?a.insertBefore(l,i):j>h&&a.insertBefore(l,i.nextSibling);e.push(l);A(g,function(a){l.appendChild(a)});return l}function t(b,f,h){var j=[],l,p,Q=!0;l=I.inline||I.block;p=s.create(l);k(p);G.walk(b,function(b){function n(b){var S,r,t,v,x;x=Q;S=b.nodeName.toLowerCase();r=b.parentNode.nodeName.toLowerCase();1===b.nodeType&&i(b)&&(x=Q,Q="true"===i(b),v=!0);if(m(S,"br"))o=0,I.block&&s.remove(b);else if(I.wrapper&&c(b,a,e))o=
0;else if(Q&&!v&&I.block&&!I.wrapper&&/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(S))b=s.rename(b,l),k(b),j.push(b),o=0;else{if(I.selector&&(A(u,function(a){if(!("collapsed"in a&&a.collapsed!==z)&&s.is(b,a.selector)&&!g(b)){k(b,a);t=true}}),!I.inline||t)){o=0;return}Q&&!v&&J(l,S)&&J(r,l)&&(h||!(3===b.nodeType&&1===b.nodeValue.length&&65279===b.nodeValue.charCodeAt(0)))&&!g(b)?(o||(o=s.clone(p,K),b.parentNode.insertBefore(o,b),j.push(o)),o.appendChild(b)):"li"==S&&f?o=q(b,f,p,j,n):(o=0,A(d.grep(b.childNodes),
n),v&&(Q=x),o=0)}}var o;A(b,n)});!1===I.wrap_links&&A(j,function(a){function b(a){var c,e,f;if("A"===a.nodeName){e=s.clone(p,K);j.push(e);f=d.grep(a.childNodes);for(c=0;c<f.length;c++)e.appendChild(f[c]);a.appendChild(e)}A(d.grep(a.childNodes),b)}b(a)});A(j,function(b){function d(a){var b,c;A(a.childNodes,function(a){if(1==a.nodeType&&!v(a)&&!g(a))return b=a,K});b&&n(b,I)&&(c=s.clone(b,K),k(c),s.replace(c,a,H),s.remove(b,1));return c||a}var f;f=function(a){var b=0;A(a.childNodes,function(a){!o(a)&&
!v(a)&&b++});return b}(b);if((1<j.length||!E(b))&&0===f)s.remove(b,1);else if(I.inline||I.wrapper){!I.exact&&1===f&&(b=d(b));A(u,function(a){A(s.select(a.inline,b),function(b){var c;if(!1===a.wrap_links){c=b.parentNode;do if("A"===c.nodeName)return;while(c=c.parentNode)}r(a,e,b,a.exact?b:null)})});if(c(b.parentNode,a,e))return s.remove(b,1),b=0,H;I.merge_with_parents&&s.getParent(b.parentNode,function(d){if(c(d,a,e))return s.remove(b,1),b=0,H});b&&!1!==I.merge_siblings&&(b=x(D(b),b),b=x(b,D(b,H)))}})}
var u=b(a),I=u[0],O,z=B.isCollapsed();if(I)if(f)f.nodeType?(O=s.createRng(),O.setStartBefore(f),O.setEndAfter(f),t(l(O,u),null,!0)):t(f,null,!0);else if(!z||!I.inline||s.select("td.mceSelected,th.mceSelected").length){var W=h.selection.getNode();h.selection.setRng(p());O=B.getBookmark();t(l(B.getRng(H),u),O);if(I.styles&&(I.styles.color||I.styles.textDecoration))d.walk(W,U,"childNodes"),U(W);B.moveToBookmark(O);C(B.getRng(H));h.nodeChanged()}else y("apply",a,e)}function e(a,e,f){function g(a){var b,
c,f,h,j;1===a.nodeType&&i(a)&&(h=z,z="true"===i(a),j=!0);b=d.grep(a.childNodes);if(z&&!j){c=0;for(f=p.length;c<f&&!r(p[c],e,a,a);c++);}if(t.deep&&b.length){c=0;for(f=b.length;c<f;c++)g(b[c]);j&&(z=h)}}function j(b){var d;A(s.getParents(b.parentNode,void 0,s.getRoot()).reverse(),function(b){var f;!d&&"_start"!=b.id&&"_end"!=b.id&&(f=c(b,a,e))&&!1!==f.split&&(d=b)});return d}function m(a,b,c,d){var f,g,h,i,j,k;if(a){k=a.parentNode;for(f=b.parentNode;f&&f!=k;f=f.parentNode){g=s.clone(f,K);for(j=0;j<
p.length;j++)if(r(p[j],e,g,g)){g=0;break}g&&(h&&g.appendChild(h),i||(i=g),h=g)}if(d&&(!t.mixed||!E(a)))b=s.split(a,b);h&&(c.parentNode.insertBefore(h,c),i.appendChild(c))}return b}function n(a){var b=s.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];v(c)&&(c=c[a?"firstChild":"lastChild"]);s.remove(b,!0);return c}function o(a){var b,c,a=l(a,p,H);t.split&&(b=u(a,H),c=u(a),b!=c?(b=q(b,"span",{id:"_start","data-mce-type":"bookmark"}),c=q(c,"span",{id:"_end","data-mce-type":"bookmark"}),m(j(b),
b,b,!0),m(j(c),c,c,!0),b=n(H),c=n()):b=c=m(j(b),b,b,!0),a.startContainer=b.parentNode,a.startOffset=M(b),a.endContainer=c.parentNode,a.endOffset=M(c)+1);G.walk(a,function(a){A(a,function(a){g(a);a.nodeType===1&&h.dom.getStyle(a,"text-decoration")==="underline"&&a.parentNode&&T(a.parentNode)==="underline"&&r({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,a)})})}var p=b(a),t=p[0],x,z=!0;f?f.nodeType?(x=s.createRng(),x.setStartBefore(f),x.setEndAfter(f),o(x)):o(f):(!B.isCollapsed()||
!t.inline||s.select("td.mceSelected,th.mceSelected").length?(f=B.getBookmark(),o(B.getRng(H)),B.moveToBookmark(f),t.inline&&k(a,e,B.getStart())&&C(B.getRng(!0)),h.nodeChanged()):y("remove",a,e),d.isWebKit&&h.execCommand("mceCleanup"))}function c(a,c,d,e){function f(a,b,c){var g,h,i=b[c];if(b.onmatch)return b.onmatch(a,b,c);if(i)if(i.length===P)for(g in i){if(i.hasOwnProperty(g)&&(h="attributes"===c?s.getAttrib(a,g):p(a,g),e&&!h&&!b.exact||(!e||b.exact)&&!m(h,j(i[g],d))))return}else for(g=0;g<i.length&&
!("attributes"===c?s.getAttrib(a,i[g]):p(a,i[g]));g++);return b}var g=b(c),h;if(g&&a)for(h=0;h<g.length;h++)if(c=g[h],n(a,c)&&f(a,c,"attributes")&&f(a,c,"styles")){if(g=c.classes)for(h=0;h<g.length;h++)if(!s.hasClass(a,g[h]))return;return c}}function k(a,b,d){function e(d){d=s.getParent(d,function(d){return!!c(d,a,b,!0)});return c(d,a,b)}var f;if(d)return e(d);d=B.getNode();if(e(d))return H;f=B.getStart();return f!=d&&e(f)?H:K}function n(a,b){if(m(a,b.inline)||m(a,b.block))return H;if(b.selector)return s.is(a,
b.selector)}function m(a,b){a=a||"";b=b||"";a=""+(a.nodeName||a);b=""+(b.nodeName||b);return a.toLowerCase()==b.toLowerCase()}function p(a,b){var c=s.getStyle(a,b);if("color"==b||"backgroundColor"==b)c=s.toHex(c);"fontWeight"==b&&700==c&&(c="bold");return""+c}function j(a,b){"string"!=typeof a?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a}));return a}function o(a){return a&&3===a.nodeType&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function q(a,b,c){b=s.create(b,c);a.parentNode.insertBefore(b,
a);b.appendChild(a);return b}function l(a,b,c){function d(a){var c,e,f;c=e=a?j:l;f=a?"previousSibling":"nextSibling";root=s.getRoot();if(3==c.nodeType&&!o(c)&&(a?0<k:n<c.nodeValue.length))return c;for(;;){if(!b[0].block_expand&&E(e))return e;for(a=e[f];a;a=a[f])if(!v(a)&&!o(a))return e;if(e.parentNode==root){c=e;break}e=e.parentNode}return c}function e(a,b){for(b===P&&(b=3===a.nodeType?a.length:a.childNodes.length);a&&a.hasChildNodes();)(a=a.childNodes[b])&&(b=3===a.nodeType?a.length:a.childNodes.length);
return{node:a,offset:b}}function f(a){for(var b=a;b;){if(1===b.nodeType&&i(b))return"false"===i(b)?b:a;b=b.parentNode}return a}var g,j=a.startContainer,k=a.startOffset,l=a.endContainer,n=a.endOffset;1==j.nodeType&&j.hasChildNodes()&&(g=j.childNodes.length-1,j=j.childNodes[k>g?g:k],3==j.nodeType&&(k=0));1==l.nodeType&&l.hasChildNodes()&&(g=l.childNodes.length-1,l=l.childNodes[n>g?g:n-1],3==l.nodeType&&(n=l.nodeValue.length));j=f(j);l=f(l);if(v(j.parentNode)||v(j))j=v(j)?j:j.parentNode,j=j.nextSibling||
j,3==j.nodeType&&(k=0);if(v(l.parentNode)||v(l))l=v(l)?l:l.parentNode,l=l.previousSibling||l,3==l.nodeType&&(n=l.length);if(b[0].inline){if(a.collapsed){var p=function(a,b,d){function e(a,b){var f,g;g=a.nodeValue;typeof b=="undefined"&&(b=d?g.length:0);if(d){f=g.lastIndexOf(" ",b);g=g.lastIndexOf("\u00a0",b);f=f>g?f:g;f!==-1&&!c&&f++}else{f=g.indexOf(" ",b);g=g.indexOf("\u00a0",b);f=f!==-1&&(g===-1||f<g)?f:g}return f}var f,g;if(a.nodeType===3){b=e(a,b);if(b!==-1)return{container:a,offset:b};g=a}for(a=
new F(a,s.getParent(a,E)||h.getBody());f=a[d?"prev":"next"]();)if(f.nodeType===3){g=f;b=e(f);if(b!==-1)return{container:f,offset:b}}else if(E(f))break;if(g){b=d?0:g.length;return{container:g,offset:b}}};if(g=p(j,k,!0))j=g.container,k=g.offset;if(g=p(l,n))l=g.container,n=g.offset}g=e(l,n);if(g.node){for(;g.node&&0===g.offset&&g.node.previousSibling;)g=e(g.node.previousSibling);g.node&&0<g.offset&&3===g.node.nodeType&&" "===g.node.nodeValue.charAt(g.offset-1)&&1<g.offset&&(l=g.node,l.splitText(g.offset-
1))}}if(b[0].inline||b[0].block_expand){if(!b[0].inline||3!=j.nodeType||0===k)j=d(!0);if(!b[0].inline||3!=l.nodeType||n===l.nodeValue.length)l=d()}b[0].selector&&b[0].expand!==K&&!b[0].inline&&(g=function(c,d){var e,f,g,h;c.nodeType==3&&c.nodeValue.length==0&&c[d]&&(c=c[d]);e=s.getParents(c,void 0,s.getRoot());for(f=0;f<e.length;f++)for(g=0;g<b.length;g++){h=b[g];if(!("collapsed"in h&&h.collapsed!==a.collapsed)&&s.is(e[f],h.selector))return e[f]}return c},j=g(j,"previousSibling"),l=g(l,"nextSibling"));
if(b[0].block||b[0].selector)g=function(a,c){var d;b[0].wrapper||(d=s.getParent(a,b[0].block));d||(d=s.getParent(a.nodeType==3?a.parentNode:a,E));d&&b[0].wrapper&&(d=s.getParents(d,"ul,ol",s.getRoot()).reverse()[0]||d);if(!d)for(d=a;d[c]&&!E(d[c]);){d=d[c];if(m(d,"br"))break}return d||a},j=g(j,"previousSibling"),l=g(l,"nextSibling"),b[0].block&&(E(j)||(j=d(!0)),E(l)||(l=d()));1==j.nodeType&&(k=M(j),j=j.parentNode);1==l.nodeType&&(n=M(l)+1,l=l.parentNode);return{startContainer:j,startOffset:k,endContainer:l,
endOffset:n}}function r(a,b,c,d){var e,f,g;if(!n(c,a))return K;if("all"!=a.remove){A(a.styles,function(a,e){a=j(a,b);"number"===typeof e&&(e=a,d=0);(!d||m(p(d,e),a))&&s.setStyle(c,e,"");g=1});g&&""==s.getAttrib(c,"style")&&(c.removeAttribute("style"),c.removeAttribute("data-mce-style"));A(a.attributes,function(a,e){var f,a=j(a,b);if(typeof e==="number"){e=a;d=0}if(!d||m(s.getAttrib(d,e),a)){if(e=="class")if(a=s.getAttrib(c,e)){f="";A(a.split(/\s+/),function(a){/mce\w+/.test(a)&&(f=f+((f?" ":"")+a))});
if(f){s.setAttrib(c,e,f);return}}e=="class"&&c.removeAttribute("className");R.test(e)&&c.removeAttribute("data-mce-"+e);c.removeAttribute(e)}});A(a.classes,function(a){a=j(a,b);(!d||s.hasClass(d,a))&&s.removeClass(c,a)});f=s.getAttribs(c);for(e=0;e<f.length;e++)if(0!==f[e].nodeName.indexOf("_"))return K}if("none"!=a.remove)return t(c,a),H}function t(a,b){var c=a.parentNode,e;if(b.block)if(L)c==s.getRoot()&&(!b.list_block||!m(a,b.list_block))&&A(d.grep(a.childNodes),function(a){J(L,a.nodeName.toLowerCase())?
e?e.appendChild(a):e=q(a,L):e=0});else{var f=function(a,b,c){a=D(a,b,c);return!a||"BR"==a.nodeName||E(a)};E(a)&&!E(c)&&(!f(a,K)&&!f(a.firstChild,H,1)&&a.insertBefore(s.create("br"),a.firstChild),!f(a,H)&&!f(a.lastChild,K,1)&&a.appendChild(s.create("br")))}(!b.selector||!b.inline||m(b.inline,a))&&s.remove(a,1)}function D(a,b,c){if(a){b=b?"nextSibling":"previousSibling";for(a=c?a:a[b];a;a=a[b])if(1==a.nodeType||!o(a))return a}}function v(a){return a&&1==a.nodeType&&"bookmark"==a.getAttribute("data-mce-type")}
function x(a,b){function c(a,b){function d(a){var b={};A(s.getAttribs(a),function(c){c=c.nodeName.toLowerCase();0!==c.indexOf("_")&&"style"!==c&&(b[c]=s.getAttrib(a,c))});return b}function e(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){c=b[d];if(c===P||a[d]!=c)return K;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return K;return H}return a.nodeName!=b.nodeName||!e(d(a),d(b))||!e(s.parseStyle(s.getAttrib(a,"style")),s.parseStyle(s.getAttrib(b,"style")))?K:H}var e,f;if(a&&b&&(f=function(a,b){for(e=
a;e&&!(3==e.nodeType&&0!==e.nodeValue.length);e=e[b])if(1==e.nodeType&&!v(e))return e;return a},a=f(a,"previousSibling"),b=f(b,"nextSibling"),c(a,b))){for(e=a.nextSibling;e&&e!=b;)f=e,e=e.nextSibling,a.appendChild(f);s.remove(b);A(d.grep(b.childNodes),function(b){a.appendChild(b)});return a}return b}function u(a,b){var c,d,e;c=a[b?"startContainer":"endContainer"];d=a[b?"startOffset":"endOffset"];1==c.nodeType&&(e=c.childNodes.length-1,!b&&d&&d--,c=c.childNodes[d>e?e:d]);3===c.nodeType&&b&&d>=c.nodeValue.length&&
(c=(new F(c,h.getBody())).next()||c);3===c.nodeType&&!b&&0==d&&(c=(new F(c,h.getBody())).prev()||c);return c}function y(a,g,i){function j(a){var b=s.create("span",{id:r,"data-mce-bogus":!0,style:t?"color:red":""});a&&b.appendChild(h.getDoc().createTextNode(N));return b}function k(a,b){for(;a;){if(3===a.nodeType&&a.nodeValue!==N||1<a.childNodes.length)return!1;b&&1===a.nodeType&&b.push(a);a=a.firstChild}return!0}function m(a){for(;a;){if(a.id===r)return a;a=a.parentNode}}function n(a){var b;if(a){b=
new F(a,a);for(a=b.current();a;a=b.next())if(3===a.nodeType)return a}}function o(a,b){var c,d;if(a)d=B.getRng(!0),k(a)?(!1!==b&&(d.setStartBefore(a),d.setEndBefore(a)),s.remove(a)):(c=n(a),c.nodeValue.charAt(0)===N&&c.deleteData(0,1),s.remove(a,1)),B.setRng(d);else if(a=m(B.getStart()),!a)for(;a=s.get(r);)o(a,!1)}function p(){var a,c,d,e,h;a=B.getRng(!0);e=a.startOffset;h=a.startContainer.nodeValue;(c=m(B.getStart()))&&(d=n(c));if(h&&0<e&&e<h.length&&/\w/.test(h.charAt(e))&&/\w/.test(h.charAt(e-1)))c=
B.getBookmark(),a.collapse(!0),a=l(a,b(g)),a=G.split(a),f(g,i,a),B.moveToBookmark(c);else{if(!c||d.nodeValue!==N)c=j(!0),d=c.firstChild,a.insertNode(c),e=1;f(g,i,c);B.setCursorLocation(d,e)}}function q(){var a=B.getRng(!0),d,f,h,k,m,n=[];d=a.startContainer;f=a.startOffset;h=d;if(3==d.nodeType){if(f!=d.nodeValue.length||d.nodeValue===N)k=!0;h=h.parentNode}for(;h;){if(c(h,g,i)){m=h;break}h.nextSibling&&(k=!0);n.push(h);h=h.parentNode}if(m)if(k)h=B.getBookmark(),a.collapse(!0),a=l(a,b(g),!0),a=G.split(a),
e(g,i,a),B.moveToBookmark(h);else{h=d=j();for(a=n.length-1;0<=a;a--)h.appendChild(s.clone(n[a],!1)),h=h.firstChild;h.appendChild(s.doc.createTextNode(N));h=h.firstChild;s.insertAfter(d,m);B.setCursorLocation(h,1)}}var r="_mce_caret",t=h.settings.caret_debug;self._hasCaretEvents||(h.onBeforeGetContent.addToTop(function(){var a=[],b;if(k(m(B.getStart()),a))for(b=a.length;b--;)s.setAttrib(a[b],"data-mce-bogus","1")}),d.each(["onMouseUp","onKeyUp"],function(a){h[a].addToTop(function(){o()})}),h.onKeyDown.addToTop(function(a,
b){var c=b.keyCode;(8==c||37==c||39==c)&&o(m(B.getStart()))}),self._hasCaretEvents=!0);"apply"==a?p():q()}function C(a){var b=a.startContainer,c=a.startOffset,d;3==b.nodeType&&c>=b.nodeValue.length-1&&(b=b.parentNode,c=M(b)+1);if(1==b.nodeType){d=b.childNodes;b=d[Math.min(c,d.length-1)];b=new F(b);c>d.length-1&&b.next();for(c=b.current();c;c=b.next())if(3==c.nodeType&&!o(c)){b=s.create("a",null,N);c.parentNode.insertBefore(b,c);a.setStart(c,0);B.setRng(a);s.remove(b);break}}}var z={},A=d.each,s=h.dom,
B=h.selection,F=d.dom.TreeWalker,G=new d.dom.RangeUtils(s),J=h.schema.isValidChild,E=s.isBlock,L=h.settings.forced_root_block,M=s.nodeIndex,N=d.isGecko?"\u200b":"\ufeff",R=/^(src|href|style)$/,K=!1,H=!0,P,T=function(a){var b;h.dom.getParent(a,function(a){return(b=h.dom.getStyle(a,"text-decoration"))&&"none"!==b});return b},U=function(a){var b;1===a.nodeType&&a.parentNode&&1===a.parentNode.nodeType&&(b=T(a.parentNode),h.dom.getStyle(a,"color")&&b?h.dom.setStyle(a,"text-decoration",b):h.dom.getStyle(a,
"textdecoration")===b&&h.dom.setStyle(a,"text-decoration",null))};d.extend(this,{get:b,register:a,apply:f,remove:e,toggle:function(a,c,d){var g=b(a);k(a,c,d)&&(!("toggle"in g[0])||g[0].toggle)?e(a,c,d):f(a,c,d)},match:k,matchAll:function(a,b){var d,e=[],f={};d=B.getStart();s.getParent(d,function(d){var g,h;for(g=0;g<a.length;g++)h=a[g],!f[h]&&c(d,h,b)&&(f[h]=!0,e.push(h))});return e},matchNode:c,canApply:function(a){var a=b(a),c,d,e,f;if(a){c=B.getStart();c=s.getParents(c,void 0,s.getRoot());for(e=
a.length-1;0<=e;e--){f=a[e].selector;if(!f)return H;for(d=c.length-1;0<=d;d--)if(s.is(c[d],f))return H}}return K}})}})(tinymce);
tinymce.onAddEditor.add(function(d,h){var i,g,b,a=h.settings;if(a.inline_styles){g=d.explode(a.font_size_legacy_values);var f=function(a,e){d.each(e,function(d,e){d&&b.setStyle(a,e,d)});b.rename(a,"span")};i={font:function(a,b){f(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:g[parseInt(b.size)-1]})},u:function(a,b){f(b,{textDecoration:"underline"})},strike:function(a,b){f(b,{textDecoration:"line-through"})}};var e=function(c,e){b=c.dom;a.convert_fonts_to_spans&&
d.each(b.select("font,u,strike",e.node),function(a){i[a.nodeName.toLowerCase()](h.dom,a)})};h.onPreProcess.add(e);h.onSetContent.add(e);h.onInit.add(function(){h.selection.onSetContent.add(e)})}});